Ext.apply(Ext,{baseCSSPrefix:"x-",capitalize:function(a){return a.charAt(0).toUpperCase()+a.substr(1)},copyTo:function(a,b,e,d){if(typeof e=="string"){e=e.split(/[,;\s]/)}Ext.each(e,function(f){if(d||b.hasOwnProperty(f)){a[f]=b[f]}},this);return a},mixin:function(f,d,a){var g=f;var h=a.prototype,b=g.prototype,e;for(e in h){if(h.hasOwnProperty(e)){if(b[e]===undefined){b[e]=h[e]}}}if(!b.mixins){b.mixins={}}b.mixins[d]=h}});Ext.Number=Ext.util.Numbers;Ext.ns("Ext.fx","Ext.fx.target","Ext.chart","Ext.chart.axis","Ext.chart.series","Ext.chart.theme","Ext.draw","Ext.draw.engine");(function(){var h=Array.prototype,f="forEach" in h,e="map" in h,a="indexOf" in h,d="every" in h,b="some" in h,g="filter" in h;Ext.Array={each:function(n,m,l){if(Ext.isEmpty(n,true)){return 0}if(!Ext.isIterable(n)||Ext.isPrimitive(n)){n=[n]}for(var k=0,j=n.length;k<j;k++){if(m.call(l||n[k],n[k],k,n)===false){return k}}return true},forEach:function(k,j,i){if(f){return k.forEach(j,i)}return Ext.Array.each(k,j,i)},indexOf:function(n,l,m){if(a){return n.indexOf(l,m)}var j,k=n.length;for(j=(m<0)?Math.max(0,k+m):m||0;j<k;j++){if(n[j]===l){return j}}return -1},contains:function(j,i){return(Ext.Array.indexOf(j,i)!==-1)},toArray:function(k,j,i){return Array.prototype.slice.call(k,j||0,i||k.length)},pluck:function(i,k){var j=[];Ext.each(i,function(l){j.push(l[k])});return j},map:function(o,n,m){if(!n){throw new Error("[Ext.Array.map] fn must be a valid callback function")}if(e){return o.map(n,m)}var l=[],k=0,j=o.length;for(;k<j;k++){if(k in o){l[k]=n.call(m,o[k],k,o)}}return l},every:function(n,m,l){if(d){return n.every(m,l)}var k=0,j=n.length;for(;k<j;++k){if(k in n&&!m.call(l,n[k],k,n)){return false}}return true},some:function(n,m,l){if(b){return n.some(m,l)}var k=0,j=n.length;for(;k<j;++k){if(k in n&&m.call(l,n[k],k,n)){return true}}return false},clean:function(n){var k=[],j,m,l;for(j=0,m=n.length;j<m;j++){l=n[j];if(!Ext.isEmpty(l)){k.push(l)}}return k},unique:function(k){var j=[],i=Ext.Array;i.forEach(k,function(l){if(!i.contains(j,l)){j.push(l)}});return j},filter:function(o,n,m){if(!n){throw new Error("[Ext.Array.filter] fn must be a valid callback function")}if(g){return o.filter(n,m)}var l=[],k=0,j=o.length;for(;k<j;k++){if((k in o)&&n.call(m,o[k],k,o)){l.push(o[k])}}return l},from:function(i){if(Ext.isIterable(i)){return Ext.Array.toArray(i)}if(Ext.isDefined(i)&&i!==null){return[i]}return[]},remove:function(k,j){var i=Ext.Array.indexOf(k,j);if(i!==-1){k.splice(i,1)}return k},include:function(j,i){if(!Ext.Array.contains(j,i)){j.push(i)}},clone:function(i){return h.slice.call(i)},merge:function(){var o=Ext.Array,p=o.unique(arguments[0]),m=h.slice.call(arguments,1),l,k,n,r,q;for(l=0,n=m.length;l<n;l++){q=m[l];for(k=0,r=q.length;k<r;k++){o.include(p,q[k])}}return p},intersect:function(){var n=[],l=h.slice.call(arguments),r,p,o,t,u,z,w,v,m,q;if(!l.length){return n}for(r=z=0,v=l.length;r<v,u=l[r];r++){if(!t||u.length<t.length){t=u;z=r}}t=Ext.Array.unique(t);l.splice(z,1);for(r=0,v=t.length;r<v,z=t[r];r++){var s=0;for(p=0,m=l.length;p<m,u=l[p];p++){for(o=0,q=u.length;o<q,w=u[o];o++){if(z===w){s++;break}}}if(s==m){n.push(z)}}return n},difference:function(l,k){var q=Ext.Array.clone(l),o=q.length,n,m,p;for(n=0,p=k.length;n<p;n++){for(m=0;m<o;m++){if(q[m]===k[n]){q.splice(m,1);m--;o--}}}return q}};Ext.Array.union=Ext.Array.merge})();Ext.Date={now:Date.now||function(){return +new Date()},getElapsed:function(b,a){return Math.abs(b-(a||new Date()))}};Ext.fx.target.Sprite=Ext.extend(Object,{isAnimTarget:true,constructor:function(a){this.target=a;this.id=this.getId()},type:"draw",getId:function(){return this.target.id},getFromPrim:function(b,a){var d;if(a=="translate"){d={x:b.attr.translation.x||0,y:b.attr.translation.y||0}}else{if(a=="rotate"){d={degrees:b.attr.rotation.degrees||0,x:b.attr.rotation.x,y:b.attr.rotation.y}}else{d=b.attr[a]}}return d},getAttr:function(a,b){return[[this.target,b!=undefined?b:this.getFromPrim(this.target,a)]]},setAttr:function(n){var h=n.length,l=[],r,g,q,f,b,p,o,e,d,m,k,a;for(e=0;e<h;e++){r=n[e].attrs;for(g in r){q=r[g];a=q.length;for(d=0;d<a;d++){b=q[d][0];f=q[d][1];if(g=="translate"){o={x:f.x,y:f.y}}else{if(g=="rotate"){m=f.x;if(isNaN(m)){m=null}k=f.y;if(isNaN(k)){k=null}o={degrees:f.degrees,x:m,y:k}}else{o=f}}p=Ext.Array.indexOf(l,b);if(p==-1){l.push([b,{}]);p=l.length-1}l[p][1][g]=o}}}h=l.length;for(e=0;e<h;e++){b=l[e];b[0].setAttributes(b[1])}this.target.redraw()}});Ext.fx.target.SpriteGroup=Ext.extend(Ext.fx.target.Sprite,{getAttr:function(a,e){var b=[],d=this.target;d.each(function(f){b.push([f,e!=undefined?e:this.getFromPrim(f,a)])},this);return b}});Ext.fx.CubicBezier={cubicBezierAtTime:function(o,e,b,n,m,i){var j=3*e,l=3*(n-e)-j,a=1-j-l,h=3*b,k=3*(m-b)-h,p=1-h-k;function g(q){return((a*q+l)*q+j)*q}function d(q,s){var r=f(q,s);return((p*r+k)*r+h)*r}function f(q,y){var w,v,t,r,u,s;for(t=q,s=0;s<8;s++){r=g(t)-q;if(Math.abs(r)<y){return t}u=(3*a*t+2*l)*t+j;if(Math.abs(u)<0.000001){break}t=t-r/u}w=0;v=1;t=q;if(t<w){return w}if(t>v){return v}while(w<v){r=g(t);if(Math.abs(r-q)<y){return t}if(q>r){w=t}else{v=t}t=(v-w)/2+w}return t}return d(o,1/(200*i))},cubicBezier:function(b,f,a,d){var e=function(g){return Ext.fx.CubicBezier.cubicBezierAtTime(g,b,f,a,d,1)};e.toCSS3=function(){return"cubic-bezier("+[b,f,a,d].join(",")+")"};e.reverse=function(){return Ext.fx.CubicBezier.cubicBezier(1-a,1-d,1-b,1-f)};return e}};(function(){var f=Math,h=f.PI,e=f.pow,b=f.sin,g=f.sqrt,a=f.abs,d=1.70158;Ext.fx.Easing={};Ext.apply(Ext.fx.Easing,{linear:function(i){return i},ease:function(l){var i=0.07813-l/2,m=-0.25,o=g(0.0066+i*i),r=o-i,k=e(a(r),1/3)*(r<0?-1:1),p=-o-i,j=e(a(p),1/3)*(p<0?-1:1),s=k+j+0.25;return e(1-s,2)*3*s*0.1+(1-s)*3*s*s+s*s*s},easeIn:function(i){return e(i,1.7)},easeOut:function(i){return e(i,0.48)},easeInOut:function(r){var l=0.48-r/1.04,k=g(0.1734+l*l),i=k-l,p=e(a(i),1/3)*(i<0?-1:1),o=-k-l,m=e(a(o),1/3)*(o<0?-1:1),j=p+m+0.5;return(1-j)*3*j*j+j*j*j},backIn:function(i){return i*i*((d+1)*i-d)},backOut:function(i){i=i-1;return i*i*((d+1)*i+d)+1},elasticIn:function(k){if(k==0||k==1){return k}var j=0.3,i=j/4;return e(2,-10*k)*b((k-i)*(2*h)/j)+1},bounceOut:function(m){var j=7.5625,k=2.75,i;if(m<(1/k)){i=j*m*m}else{if(m<(2/k)){m-=(1.5/k);i=j*m*m+0.75}else{if(m<(2.5/k)){m-=(2.25/k);i=j*m*m+0.9375}else{m-=(2.625/k);i=j*m*m+0.984375}}}return i}});Ext.apply(Ext.fx.Easing,{"back-in":Ext.fx.Easing.backIn,"back-out":Ext.fx.Easing.backOut,"ease-in":Ext.fx.Easing.easeIn,"ease-out":Ext.fx.Easing.easeOut,"bounce-out":Ext.fx.Easing.bounceOut,"elastic-in":Ext.fx.Easing.elasticIn,easeInOut:Ext.fx.Easing.easeInOut,"ease-in-out":Ext.fx.Easing.easeInOut,bounceIn:Ext.fx.Easing.bounceOut,"bounce-in":Ext.fx.Easing.bounceOut,"elastic-out":Ext.fx.Easing.elasticIn,elasticOut:Ext.fx.Easing.elasticIn})})();Ext.fx.PropHandler={defaultHandler:{unitRE:/^(-?\d*\.?\d*){1}(em|ex|px|in|cm|mm|pt|pc|%)*$/,computeDelta:function(h,a,f,e){f=(typeof f=="number")?f:1;var d=this.unitRE.exec(h),g,b;if(d){h=d[1];b=d[2]}h=+h||0;d=this.unitRE.exec(a);if(d){a=d[1];b=d[2]||b}a=+a||0;g=(e!=null)?e:h;return{from:h,delta:(a-g)*f,units:b}},get:function(n,b,a,m){var f,h,l=n.length,e=[];for(f=0;f<l;f++){if(m){h=m[f][1].from}if(Ext.isArray(n[f][1])&&Ext.isArray(b)){var k=[];for(var d=0,g=n[f][1].length;d<g;d++){k.push(this.computeDelta(n[f][1][d],b[d],a,h))}e.push([n[f][0],k])}else{e.push([n[f][0],this.computeDelta(n[f][1],b,a,h)])}}return e},set:function(l,g){var e,h=l.length,b=[],a;for(e=0;e<h;e++){a=l[e][1];if(Ext.isArray(a)){var k=[];for(var d=0,f=a.length;d<f;d++){k.push(a[d].from+(a[d].delta*g)+(a[d].units||0))}b.push([l[e][0],k])}else{b.push([l[e][0],a.from+(a.delta*g)+(a.units||0)])}}return b}},color:{rgbRE:/^rgb\(([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\)$/i,hexRE:/^#?([0-9A-F]{2})([0-9A-F]{2})([0-9A-F]{2})$/i,hex3RE:/^#?([0-9A-F]{1})([0-9A-F]{1})([0-9A-F]{1})$/i,parseColor:function(a,e){e=(typeof e=="number")?e:1;var f,d=false,b;Ext.each([this.hexRE,this.rgbRE,this.hex3RE],function(h,g){f=(g%2==0)?16:10;b=h.exec(a);if(b&&b.length==4){if(g==2){b[1]+=b[1];b[2]+=b[2];b[3]+=b[3]}d={red:parseInt(b[1],f),green:parseInt(b[2],f),blue:parseInt(b[3],f)};return false}});return d||a},computeDelta:function(h,a,f,d){h=this.parseColor(h);a=this.parseColor(a,f);var g=d?d:h,b=typeof g,e=typeof a;if(b=="string"||b=="undefined"||e=="string"||e=="undefined"){return a||g}return{from:h,delta:{red:Math.round((a.red-g.red)*f),green:Math.round((a.green-g.green)*f),blue:Math.round((a.blue-g.blue)*f)}}},get:function(j,a,g,e){var h=j.length,d=[],f,b;for(f=0;f<h;f++){if(e){b=e[f][1].from}d.push([j[f][0],this.computeDelta(j[f][1],a,g,b)])}return d},set:function(k,f){var g=k.length,d=[],e,b,a,h,j;for(e=0;e<g;e++){b=k[e][1];if(b){h=b.from;j=b.delta;b=(typeof b=="object"&&"red" in b)?"rgb("+b.red+", "+b.green+", "+b.blue+")":b;b=(typeof b=="object"&&b.length)?b[0]:b;if(typeof b=="undefined"){return[]}a=typeof b=="string"?b:"rgb("+[(h.red+Math.round(j.red*f))%256,(h.green+Math.round(j.green*f))%256,(h.blue+Math.round(j.blue*f))%256].join(",")+")";d.push([k[e][0],a])}}return d}},object:{interpolate:function(e,b){b=(typeof b=="number")?b:1;var a={};for(var d in e){a[d]=parseInt(e[d],10)*b}return a},computeDelta:function(h,a,d,b){h=this.interpolate(h);a=this.interpolate(a,d);var g=b?b:h,f={};for(var e in a){f[e]=a[e]-g[e]}return{from:h,delta:f}},get:function(j,a,g,e){var f,d,h=j.length,b=[];for(f=0;f<h;f++){if(e){d=e[f][1].from}b.push([j[f][0],this.computeDelta(j[f][1],a,g,d)])}return b},set:function(l,g){var e,h=l.length,d=[],f={},j,k,b;for(e=0;e<h;e++){b=l[e][1];j=b.from;k=b.delta;for(var a in j){f[a]=Math.round(j[a]+k[a]*g)}d.push([l[e][0],f])}return d}},path:{computeDelta:function(f,a,d,b){d=(typeof d=="number")?d:1;var e;f=+f||0;a=+a||0;e=(b!=null)?b:f;return{from:f,delta:(a-e)*d}},forcePath:function(a){if(!Ext.isArray(a)&&!Ext.isArray(a[0])){a=Ext.draw.Draw.parsePathString(a)}return a},get:function(b,l,a,q){var o,n,h,t,s,d=this.forcePath(l),g,p,m=[],r=b.length,e,f;for(o=0;o<r;o++){s=this.forcePath(b[o][1]);g=Ext.draw.Draw.interpolatePaths(s,d);s=g[0];d=g[1];e=s.length;t=[];for(n=0;n<e;n++){g=[s[n][0]];f=s[n].length;for(h=1;h<f;h++){p=q&&q[0][1][n][h].from;g.push(this.computeDelta(s[n][h],d[n][h],a,p))}t.push(g)}m.push([b[o][0],t])}return m},set:function(p,o){var h,g,d,l,m,e,a,b,n=p.length,f=[];for(h=0;h<n;h++){e=p[h][1];l=[];a=e.length;for(g=0;g<a;g++){m=[e[g][0]];b=e[g].length;for(d=1;d<b;d++){m.push(e[g][d].from+e[g][d].delta*o)}l.push(m.join(","))}f.push([p[h][0],l.join(",")])}return f}}};Ext.each(["outlineColor","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fill","stroke"],function(a){this[a]=this.color},Ext.fx.PropHandler);Ext.fx.PseudoEasing={"back-in":{isPseudoEasing:true,"40%":{easing:"ease-in-out",damper:-0.1},"100%":{easing:"ease-in",damper:1.1}},"back-out":{isPseudoEasing:true,"60%":{easing:"ease-out",damper:1.1},"100%":{easing:"ease-in-out",damper:-0.1}},"bounce-out":{isPseudoEasing:true,"36%":{easing:"ease-in",damper:1},"54%":{easing:"ease-out",damper:-0.25},"72%":{easing:"ease-in",damper:0.25},"81%":{easing:"ease-out",damper:-0.0625},"90%":{easing:"ease-in",damper:0.0625},"95%":{easing:"ease-out",damper:-0.015},"100%":{easing:"ease-in",damper:0.015}},"bounce-in":{isPseudoEasing:true,"5%":{easing:"ease-in",damper:0.015},"10%":{easing:"ease-out",damper:-0.015},"19%":{easing:"ease-in",damper:0.0625},"28%":{easing:"ease-out",damper:-0.0625},"46%":{easing:"ease-in",damper:0.25},"64%":{easing:"ease-out",damper:-0.25},"100%":{easing:"ease-in",damper:1}},"elastic-in":{isPseudoEasing:true,"14%":{easing:"ease-in",damper:0.005},"29%":{easing:"ease-in-out",damper:-0.015},"43%":{easing:"ease-in-out",damper:0.025},"57%":{easing:"ease-in-out",damper:-0.065},"71%":{easing:"ease-in-out",damper:0.19},"86%":{easing:"ease-in-out",damper:-0.51},"100%":{easing:"ease-out",damper:1.37}},"elastic-out":{isPseudoEasing:true,"14%":{easing:"ease-in",damper:1.37},"29%":{easing:"ease-in-out",damper:-0.51},"43%":{easing:"ease-in-out",damper:0.19},"57%":{easing:"ease-in-out",damper:-0.065},"71%":{easing:"ease-in-out",damper:0.025},"86%":{easing:"ease-in-out",damper:-0.015},"100%":{easing:"ease-out",damper:0.005}}};Ext.fx.Queue=Ext.extend(Object,{constructor:function(){this.targets=new Ext.util.HashMap();this.fxQueue={}},getFxDefaults:function(a){var b=this.targets.get(a);if(b){return b.fxDefaults}return{}},setFxDefaults:function(a,d){var b=this.targets.get(a);if(b){b.fxDefaults=Ext.apply(b.fxDefaults||{},d)}},stopFx:function(b){var e=this,a=e.getFxQueue(b),d=a.length;while(d){a[d-1].end();d--}},hasActiveFx:function(b){var a=this.getFxQueue(b);return(a&&!!a.length)?a[0]:false},hasFxBlock:function(b){var a=this.getFxQueue(b);return a&&a[0]&&a[0].block},getFxQueue:function(b){if(!b){return false}var d=this,a=d.fxQueue[b],e=d.targets.get(b);if(!e){return false}if(!a){d.fxQueue[b]=[];if(e.type!="element"){e.target.on("destroy",function(){d.stopFx(b)})}}return d.fxQueue[b]},queueFx:function(e){var d=this,f=e.target,a,b;if(!f){return}a=d.getFxQueue(f.getId());b=a.length;if(b){if(e.concurrent){e.paused=false}else{a[b-1].on("afteranimate",function(){e.paused=false})}}else{e.paused=false}e.on("afteranimate",function(){Ext.Array.remove(a,e);if(e.remove){if(f.type=="element"){var g=Ext.get(f.id);if(g){g.remove()}}}},this);a.push(e)}});Ext.fx.Animator=Ext.extend(Ext.util.Observable,{isAnimator:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",running:false,paused:false,damper:1,iterations:1,currentIteration:0,keyframeStep:0,animKeyFramesRE:/^(from|to|\d+%?)$/,constructor:function(a){var b=this;a=Ext.apply(b,a||{});b.config=a;b.id=Ext.id(null,"ext-animator-");b.addEvents("beforeanimate","keyframe","afteranimate");Ext.fx.Animator.superclass.constructor.call(b,a);b.timeline=[];b.createTimeline(b.keyframes);if(b.target){b.applyAnimator(b.target);Ext.fx.Manager.addAnim(b)}},sorter:function(e,d){return e.pct-d.pct},createTimeline:function(g){var k=this,n=[],l=k.to||{},d=k.duration,o,a,f,j,m,b,e,h;if(g.isPseudoEasing){k.isPseudoEasing=true}for(m in g){if(g.hasOwnProperty(m)&&k.animKeyFramesRE.test(m)){h={attrs:Ext.apply(g[m],l)};if(m=="from"){m=0}else{if(m=="to"){m=100}}h.pct=parseInt(m,10);n.push(h)}}n.sort(k.sorter);j=n.length;for(f=0;f<j;f++){o=(n[f-1])?d*(n[f-1].pct/100):0;a=d*(n[f].pct/100);k.timeline.push({duration:a-o,attrs:n[f].attrs})}},applyAnimator:function(g){var l=this,m=[],p=l.timeline,h=l.reverse,e=l.isPseudoEasing,k=p.length,b,j,a,f,o,n,d;if(l.fireEvent("beforeanimate",l)!==false){for(d=0;d<k;d++){b=p[d];o=b.attrs;j=o.easing||l.easing;a=o.damper||l.damper;delete o.easing;delete o.damper;b=new Ext.fx.Anim({target:g,easing:j,damper:a,duration:b.duration,paused:true,to:o});m.push(b)}l.animations=m;l.target=b.target;for(d=0;d<k-1;d++){b=m[d];b.nextAnim=m[d+1];b.on("afteranimate",function(){this.nextAnim.paused=false});b.on("afteranimate",function(){this.fireEvent("keyframe",this,++this.keyframeStep)},l)}m[k-1].on("afteranimate",function(){this.lastFrame()},l)}},start:function(e){var f=this,d=f.delay,b=f.delayStart,a;if(d){if(!b){f.delayStart=e;return}else{a=e-b;if(a<d){return}else{e=new Date(b.getTime()+d)}}}if(f.fireEvent("beforeanimate",f)!==false){f.startTime=e;f.running=true;f.animations[f.keyframeStep].paused=false}},lastFrame:function(){var d=this,a=d.iterations,b=d.currentIteration;b++;if(b<a){d.startTime=new Date();d.currentIteration=b;d.keyframeStep=0;d.applyAnimator(d.target);d.animations[d.keyframeStep].paused=false}else{d.currentIteration=0;d.end()}},end:function(){var a=this;a.fireEvent("afteranimate",a,a.startTime,new Date()-a.startTime)}});Ext.fx.Anim=Ext.extend(Ext.util.Observable,{isAnimation:true,duration:250,delay:0,delayStart:0,dynamic:false,easing:"ease",damper:1,bezierRE:/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,reverse:false,running:false,paused:false,iterations:1,alternate:false,currentIteration:0,startTime:0,constructor:function(a){var b=this;a=a||{};if(a.keyframes){return new Ext.fx.Animator(a)}a=Ext.apply(b,a);if(b.from==undefined){b.from={}}b.propHandlers={};b.config=a;b.target=Ext.fx.Manager.createTarget(b.target);b.easingFn=Ext.fx.Easing[b.easing];b.target.dynamic=b.dynamic;if(!b.easingFn){b.easingFn=String(b.easing).match(b.bezierRE);if(b.easingFn&&b.easingFn.length==5){var d=b.easingFn;b.easingFn=Ext.fx.cubicBezier(+d[1],+d[2],+d[3],+d[4])}}b.id=Ext.id(null,"ext-anim-");Ext.fx.Manager.addAnim(b);b.addEvents("beforeanimate","afteranimate");Ext.fx.Anim.superclass.constructor.call(b,a);if(a.callback){b.on("afteranimate",a.callback,a.scope)}return b},setAttr:function(a,b){return Ext.fx.Manager.items.get(this.id).setAttr(this.target,a,b)},initAttrs:function(){var f=this,h=f.from,i=f.to,g=f.initialFrom||{},d={},a,b,j,e;for(e in i){if(i.hasOwnProperty(e)){a=f.target.getAttr(e,h[e]);b=i[e];if(!Ext.fx.PropHandler[e]){if(Ext.isObject(b)){j=f.propHandlers[e]=Ext.fx.PropHandler.object}else{j=f.propHandlers[e]=Ext.fx.PropHandler.defaultHandler}}else{j=f.propHandlers[e]=Ext.fx.PropHandler[e]}d[e]=j.get(a,b,f.damper,g[e])}}f.currentAttrs=d},start:function(e){var f=this,d=f.delay,b=f.delayStart,a;if(d){if(!b){f.delayStart=e;return}else{a=e-b;if(a<d){return}else{e=new Date(b.getTime()+d)}}}if(f.fireEvent("beforeanimate",f)!==false){f.startTime=e;if(!f.paused&&!f.currentAttrs){f.initAttrs()}f.running=true}},runAnim:function(l){var i=this,k=i.currentAttrs,e=i.duration,d=i.easingFn,b=i.propHandlers,g={},h,j,f,a;if(l>=e){l=e;a=true}if(i.reverse){l=e-l}for(f in k){if(k.hasOwnProperty(f)){j=k[f];h=a?1:d(l/e);g[f]=b[f].set(j,h)}}return g},lastFrame:function(){var d=this,a=d.iterations,b=d.currentIteration;b++;if(b<a){if(d.alternate){d.reverse=!d.reverse}d.startTime=new Date();d.currentIteration=b;d.paused=false}else{d.currentIteration=0;d.end()}},end:function(){var a=this;a.startTime=0;a.paused=false;a.running=false;Ext.fx.Manager.removeAnim(a);a.fireEvent("afteranimate",a,a.startTime)}});Ext.enableFx=true;Ext.util.TaskRunner=function(f){f=f||10;var g=[],a=[],b=0,h=false,e=function(){h=false;clearInterval(b);b=0},i=function(){if(!h){h=true;b=setInterval(j,f)}},d=function(k){a.push(k);if(k.onStop){k.onStop.apply(k.scope||k)}},j=function(){var m=a.length,o=new Date().getTime(),q;if(m>0){for(q=0;q<m;q++){Ext.Array.remove(g,a[q])}a=[];if(g.length<1){e();return}}q=0;var p,l,n,k=g.length;for(;q<k;++q){p=g[q];l=o-p.taskRunTime;if(p.interval<=l){n=p.run.apply(p.scope||p,p.args||[++p.taskRunCount]);p.taskRunTime=o;if(n===false||p.taskRunCount===p.repeat){d(p);return}}if(p.duration&&p.duration<=(o-p.taskStartTime)){d(p)}}};this.start=function(k){g.push(k);k.taskStartTime=new Date().getTime();k.taskRunTime=0;k.taskRunCount=0;i();return k};this.stop=function(k){d(k);return k};this.stopAll=function(){e();for(var l=0,k=g.length;l<k;l++){if(g[l].onStop){g[l].onStop()}}g=[];a=[]}};Ext.TaskMgr=new Ext.util.TaskRunner();Ext.fx.AnimateQueue=Ext.extend(Ext.fx.Queue,{constructor:function(){this.items=new Ext.util.MixedCollection();Ext.fx.AnimateQueue.superclass.constructor.call(this)},interval:16,forceJS:true,createTarget:function(f){var b=this,e=!b.forceJS&&Ext.supports.Transitions,a;b.useCSS3=e;if(Ext.isString(f)){f=Ext.get(f)}if(Ext.isObject(f)){if(f.tagName){a=Ext.get(f);b.targets.add(a);return a}else{if(f.dom){var d="Ext.fx.target.Element"+(e?"CSS":"");a=new d(f)}else{if(f.isComposite){console.log("It is Element Composite in animate, don't support it")}else{if(f.isSprite){a=new Ext.fx.target.Sprite(f)}else{if(f.isSpriteGroup){a=Ext.fx.target.SpriteGroup(f)}else{if(f.isComponent){a=new Ext.fx.target.Component(f)}else{if(f.isAnimTarget){return f}else{return null}}}}}}}b.targets.add(a);return a}else{return null}},addAnim:function(d){var b=this.items,a=this.task;b.add(d);if(!a&&b.length){a=this.task={run:this.runner,interval:this.interval,scope:this};Ext.TaskMgr.start(a)}},removeAnim:function(d){var b=this.items,a=this.task;b.remove(d);if(a&&!b.length){Ext.TaskMgr.stop(a);delete this.task}},startingFilter:function(a){return a.paused===false&&a.running===false&&a.iterations>0},runningFilter:function(a){return a.paused===false&&a.running===true&&a.isAnimator!==true},runner:function(){var b=this,a=b.items;b.targetData={};b.targetArr={};b.timestamp=new Date();a.filterBy(b.startingFilter).each(b.startAnim,b);a.filterBy(b.runningFilter).each(b.runAnim,b);b.applyPendingAttrs()},startAnim:function(a){a.start(this.timestamp)},runAnim:function(e){if(!e){return}var d=this,b=e.target.getId(),g=d.useCSS3&&e.target.type=="element",a=d.timestamp-e.startTime,f,h;this.collectTargetData(e,a,g);if(g){e.target.setAttr(d.targetData[b],true);d.targetData[b]=[];d.collectTargetData(e,e.duration,g);e.paused=true;f=e.target.target;if(e.target.isComposite){f=e.target.target.last()}h={};h[Ext.supports.CSS3TransitionEnd]=e.lastFrame;h.scope=e;h.single=true;f.on(h)}else{if(a>=e.duration){d.applyPendingAttrs(true);delete d.targetData[b];delete d.targetArr[b];e.lastFrame()}}},collectTargetData:function(e,a,f){var b=e.target.getId(),g=this.targetData[b],d;if(!g){g=this.targetData[b]=[];this.targetArr[b]=e.target}d={duration:e.duration,easing:(f&&e.reverse)?e.easingFn.reverse().toCSS3():e.easing,attrs:{}};Ext.apply(d.attrs,e.runAnim(a));g.push(d)},applyPendingAttrs:function(e){var d=this.targetData,b=this.targetArr,a;for(a in d){if(d.hasOwnProperty(a)){b[a].setAttr(d[a],false,e)}}}});Ext.fx.Manager=new Ext.fx.AnimateQueue();Ext.util.Animate=Ext.extend(Object,{animate:function(a){var b=this;if(Ext.fx.Manager.hasFxBlock(b.id)){return b}Ext.fx.Manager.queueFx(new Ext.fx.Anim(b.anim(a)));return this},anim:function(a){if(!Ext.isObject(a)){return(a)?{}:false}var b=this;if(a.stopFx){b.stopFx()}Ext.applyIf(a,Ext.fx.Manager.getFxDefaults(b.id));return Ext.apply({target:b,paused:true},a)},stopFx:function(){Ext.fx.Manager.stopFx(this.id)},syncFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:true})},sequenceFx:function(){Ext.fx.Manager.setFxDefaults(this.id,{concurrent:false})},hasActiveFx:function(){return Ext.fx.Manager.hasActiveFx(this.id)}});Ext.layout.Draw=Ext.extend(Ext.layout.AutoComponentLayout,{type:"draw",onLayout:function(b,a){this.owner.surface.setSize(b,a);Ext.layout.Draw.superclass.onLayout.apply(this,arguments)}});Ext.regLayout("draw",Ext.layout.Draw);Ext.chart.Callouts=Ext.extend(Object,{constructor:function(a){if(a.callouts){a.callouts.styles=Ext.applyIf(a.callouts.styles||{},{color:"#000",font:"11px Helvetica, sans-serif"});this.callouts=Ext.apply(this.callouts||{},a.callouts);this.calloutsArray=[]}},renderCallouts:function(){if(!this.callouts){return}var v=this,m=v.items,a=v.chart.animate,u=v.callouts,h=u.styles,f=v.calloutsArray,b=v.chart.store,s=b.getCount(),e=m.length/s,l=[],r,d,q,n;for(r=0,d=0;r<s;r++){for(q=0;q<e;q++){var t=m[d],g=f[d],k=b.getAt(r),o;o=u.filter(k);if(!o&&!g){d++;continue}if(!g){f[d]=g=v.onCreateCallout(k,t,r,o,q,d)}for(n in g){if(g[n]&&g[n].setAttributes){g[n].setAttributes(h,true)}}if(!o){for(n in g){if(g[n]){if(g[n].setAttributes){g[n].setAttributes({hidden:true},true)}else{if(g[n].setVisible){g[n].setVisible(false)}}}}}u.renderer(g,k);v.onPlaceCallout(g,k,t,r,o,a,q,d,l);l.push(g);d++}}this.hideCallouts(d)},onCreateCallout:function(g,n,f,j){var k=this,l=k.calloutsGroup,e=k.callouts,o=e.styles,d=o.width,m=o.height,h=k.chart,b=h.surface,a={lines:false};a.lines=b.add(Ext.apply({},{type:"path",path:"M0,0",stroke:k.getLegendColor()||"#555"},o));if(e.items){a.panel=new Ext.Panel({style:"position: absolute;",width:d,height:m,items:e.items,renderTo:h.el})}return a},hideCallouts:function(b){var e=this.calloutsArray,a=e.length,f,d;while(a-->b){f=e[a];for(d in f){if(f[d]){f[d].hide(true)}}}}});Ext.chart.Mask=Ext.extend(Ext.util.Observable,{constructor:function(a){var b=this;b.addEvents("select");if(a){Ext.apply(b,a)}if(b.mask){b.on("afterrender",function(){var d=new Ext.chart.MaskLayer({renderTo:b.el});d.el.on({mousemove:function(f){b.onMouseMove(f)},mouseup:function(f){b.resized(f)}});var e=new Ext.resizer.Resizer({el:d.el,handles:"all",pinned:true});e.on({resize:function(f){b.resized(f)}});d.initDraggable();b.mask=d;b.maskSprite=b.surface.add({type:"path",path:["M",0,0],zIndex:1001,opacity:0.7,hidden:true,stroke:"#444"})},b,{single:true})}},resized:function(f){var g=this,l=g.bbox||g.chartBBox,j=l.x,i=l.y,a=l.width,m=l.height,d=g.mask.getBox(true),h=Math.max,b=Math.min,n=d.x-j,k=d.y-i;n=h(n,j);k=h(k,i);n=b(n,a);k=b(k,m);d.x=n;d.y=k;g.fireEvent("select",g,d)},onMouseUp:function(d){var a=this,f=a.bbox||a.chartBBox,b=a.maskSelection;a.maskMouseDown=false;a.mouseDown=false;if(a.mouseMoved){a.onMouseMove(d);a.mouseMoved=false;a.fireEvent("select",a,{x:b.x-f.x,y:b.y-f.y,width:b.width,height:b.height})}},onMouseDown:function(b){var a=this;a.mouseDown=true;a.mouseMoved=false;a.maskMouseDown={x:b.getPageX()-a.el.getX(),y:b.getPageY()-a.el.getY()}},onMouseMove:function(t){var u=this,o=u.mask,a=u.bbox||u.chartBBox,i=a.x,h=a.y,b=Math,q=b.floor,j=b.abs,n=b.min,p=b.max,k=q(h+a.height),m=q(i+a.width),f=t.getPageX(),d=t.getPageY(),s=f-u.el.getX(),r=d-u.el.getY(),g=u.maskMouseDown,l;u.mouseMoved=u.mouseDown;s=p(s,i);r=p(r,h);s=n(s,m);r=n(r,k);if(g&&u.mouseDown){if(o=="horizontal"){r=h;g.y=k}else{if(o=="vertical"){s=i;g.x=m}}m=g.x-s;k=g.y-r;l=["M",s,r,"l",m,0,0,k,-m,0,"z"];u.mask;u.maskSelection={x:m>0?s:s+m,y:k>0?r:r+k,width:j(m),height:j(k)};u.mask.updateBox({x:f-j(m),y:d-j(k),width:j(m),height:j(k)});u.mask.show();u.maskSprite.setAttributes({hidden:true},true)}else{if(o=="horizontal"){l=["M",s,h,"L",s,k]}else{if(o=="vertical"){l=["M",i,r,"L",m,r]}else{l=["M",s,h,"L",s,k,"M",i,r,"L",m,r]}}u.maskSprite.setAttributes({path:l,fill:u.maskMouseDown?u.maskSprite.stroke:false,"stroke-width":o===true?1:3,hidden:false},true)}},onMouseLeave:function(b){var a=this;a.mouseMoved=false;a.mouseDown=false;a.maskMouseDown=false;a.mask.hide();a.maskSprite.hide(true)}});Ext.chart.Shapes={circle:function(a,b){return a.add(Ext.apply({type:"circle",x:b.x,y:b.y,stroke:null,radius:b.radius},b))},line:function(a,b){return a.add(Ext.apply({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius/5},b))},square:function(a,b){return a.add(Ext.applyIf({type:"rect",x:b.x-b.radius,y:b.y-b.radius,height:2*b.radius,width:2*b.radius,radius:null},b))},triangle:function(a,b){b.radius*=1.75;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(b.x,",",b.y,"m0-",b.radius*0.58,"l",b.radius*0.5,",",b.radius*0.87,"-",b.radius,",0z")},b))},diamond:function(a,d){var b=d.radius;b*=1.5;return a.add(Ext.apply({type:"path",stroke:null,path:["M",d.x,d.y-b,"l",b,b,-b,b,-b,-b,b,-b,"z"]},d))},cross:function(a,d){var b=d.radius;b=b/1.7;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(d.x-b,",",d.y,"l",[-b,-b,b,-b,b,b,b,-b,b,b,-b,b,b,b,-b,b,-b,-b,-b,b,-b,-b,"z"])},d))},plus:function(a,d){var b=d.radius/1.3;return a.add(Ext.apply({type:"path",stroke:null,path:"M".concat(d.x-b/2,",",d.y-b/2,"l",[0,-b,b,0,0,b,b,0,0,b,-b,0,0,b,-b,0,0,-b,-b,0,0,-b,"z"])},d))},arrow:function(a,d){var b=d.radius;return a.add(Ext.apply({type:"path",path:"M".concat(d.x-b*0.7,",",d.y-b*0.4,"l",[b*0.6,0,0,-b*0.4,b,b*0.8,-b,b*0.8,0,-b*0.4,-b*0.6,0],"z")},d))},drop:function(b,a,g,f,d,e){d=d||30;e=e||0;b.add({type:"path",path:["M",a,g,"l",d,0,"A",d*0.4,d*0.4,0,1,0,a+d*0.7,g-d*0.7,"z"],fill:"#000",stroke:"none",rotate:{degrees:22.5-e,x:a,y:g}});e=(e+90)*Math.PI/180;b.add({type:"text",x:a+d*Math.sin(e)-10,y:g+d*Math.cos(e)+5,text:f,"font-size":d*12/40,stroke:"none",fill:"#fff"})}};Ext.draw.Color=Ext.extend(Object,{colorToHexRe:/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/,rgbRe:/\s*rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)\s*/,hexRe:/\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\s*/,lightnessFactor:0.2,constructor:function(e,d,a){var b=this,f=Ext.Number.constrain;b.r=f(e,0,255);b.g=f(d,0,255);b.b=f(a,0,255)},getRed:function(){return this.r},getGreen:function(){return this.g},getBlue:function(){return this.b},getRGB:function(){var a=this;return[a.r,a.g,a.b]},getHSL:function(){var j=this,a=j.r/255,i=j.g/255,k=j.b/255,m=Math.max(a,i,k),e=Math.min(a,i,k),n=m-e,f,o=0,d=0.5*(m+e);if(e!=m){o=(d<0.5)?n/(m+e):n/(2-m-e);if(a==m){f=60*(i-k)/n}else{if(i==m){f=120+60*(k-a)/n}else{f=240+60*(a-i)/n}}if(f<0){f+=360}if(f>=360){f-=360}}return[f,o,d]},getLighter:function(b){var a=this.getHSL();b=b||this.lightnessFactor;a[2]=Ext.Number.constrain(a[2]+b,0,1);return this.fromHSL(a[0],a[1],a[2])},getDarker:function(a){a=a||this.lightnessFactor;return this.getLighter(-a)},toString:function(){var h=this,d=Math.round,f=d(h.r).toString(16),e=d(h.g).toString(16),a=d(h.b).toString(16);f=(f.length==1)?"0"+f:f;e=(e.length==1)?"0"+e:e;a=(a.length==1)?"0"+a:a;return["#",f,e,a].join("")},toHex:function(b){if(Ext.isArray(b)){b=b[0]}if(!Ext.isString(b)){return""}if(b.substr(0,1)==="#"){return b}var f=this.colorToHexRe.exec(b);if(Ext.isArray(f)){var g=parseInt(f[2],10),e=parseInt(f[3],10),a=parseInt(f[4],10),d=a|(e<<8)|(g<<16);return f[1]+"#"+("000000"+d.toString(16)).slice(-6)}else{return""}},fromString:function(i){var d,f,e,a,h=parseInt;if((i.length==4||i.length==7)&&i.substr(0,1)==="#"){d=i.match(this.hexRe);if(d){f=h(d[1],16)>>0;e=h(d[2],16)>>0;a=h(d[3],16)>>0;if(i.length==4){f+=(f*16);e+=(e*16);a+=(a*16)}}}else{d=i.match(this.rgbRe);if(d){f=d[1];e=d[2];a=d[3]}}return(typeof f=="undefined")?undefined:new Ext.draw.Color(f,e,a)},getGrayscale:function(){return this.r*0.3+this.g*0.59+this.b*0.11},fromHSL:function(g,o,e){var a,b,d,f,k=[],n=Math.abs,j=Math.floor;if(o==0||g==null){k=[e,e,e]}else{g/=60;a=o*(1-n(2*e-1));b=a*(1-n(g-2*j(g/2)-1));d=e-a/2;switch(j(g)){case 0:k=[a,b,0];break;case 1:k=[b,a,0];break;case 2:k=[0,a,b];break;case 3:k=[0,b,a];break;case 4:k=[b,0,a];break;case 5:k=[a,0,b];break}k=[k[0]+d,k[1]+d,k[2]+d]}return new Ext.draw.Color(k[0]*255,k[1]*255,k[2]*255)}});Ext.draw.Color.fromHSL=function(){return Ext.draw.Color.prototype.fromHSL.apply(Ext.draw.Color.prototype,arguments)};Ext.draw.Color.fromString=function(){return Ext.draw.Color.prototype.fromString.apply(Ext.draw.Color.prototype,arguments)};Ext.draw.Color.toHex=function(){return Ext.draw.Color.prototype.toHex.apply(Ext.draw.Color.prototype,arguments)};Ext.draw.Draw=Ext.extend(Object,{});Ext.apply(Ext.draw.Draw,{pathToStringRE:/,?([achlmqrstvxz]),?/gi,pathCommandRE:/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,pathValuesRE:/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,stopsRE:/^(\d+%?)$/,radian:Math.PI/180,availableAnimAttrs:{along:"along",blur:null,"clip-rect":"csv",cx:null,cy:null,fill:"colour","fill-opacity":null,"font-size":null,height:null,opacity:null,path:"path",r:null,rotation:"csv",rx:null,ry:null,scale:"csv",stroke:"colour","stroke-opacity":null,"stroke-width":null,translation:"csv",width:null,x:null,y:null},is:function(b,a){a=String(a).toLowerCase();return(a=="object"&&b===Object(b))||(a=="undefined"&&typeof b==a)||(a=="null"&&b==null)||(a=="array"&&Array.isArray&&Array.isArray(b))||(Object.prototype.toString.call(b).toLowerCase().slice(8,-1))==a},ellipsePath:function(b){var a=b.attr;return Ext.String.format("M{0},{1}A{2},{3},0,1,1,{0},{4}A{2},{3},0,1,1,{0},{1}z",a.x,a.y-a.ry,a.rx,a.ry,a.y+a.ry)},rectPath:function(b){var a=b.attr;if(a.radius){return Ext.String.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",a.x+a.radius,a.y,a.width-a.radius*2,a.radius,-a.radius,a.height-a.radius*2,a.radius*2-a.width,a.radius*2-a.height)}else{return Ext.String.format("M{0},{1}l{2},0,0,{3},{4},0z",a.x,a.y,a.width,a.height,-a.width)}},path2string:function(){return this.join(",").replace(Ext.draw.Draw.pathToStringRE,"$1")},parsePathString:function(a){if(!a){return null}var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[],b=this;if(b.is(a,"array")&&b.is(a[0],"array")){d=b.pathClone(a)}if(!d.length){String(a).replace(b.pathCommandRE,function(g,f,j){var i=[],h=f.toLowerCase();j.replace(b.pathValuesRE,function(l,k){k&&i.push(+k)});if(h=="m"&&i.length>2){d.push([f].concat(i.splice(0,2)));h="l";f=(f=="m")?"l":"L"}while(i.length>=e[h]){d.push([f].concat(i.splice(0,e[h])));if(!e[h]){break}}})}d.toString=b.path2string;return d},mapPath:function(l,g){if(!g){return l}var h,f,d,k,a,e,b;l=this.path2curve(l);for(d=0,k=l.length;d<k;d++){b=l[d];for(a=1,e=b.length;a<e-1;a+=2){h=g.x(b[a],b[a+1]);f=g.y(b[a],b[a+1]);b[a]=h;b[a+1]=f}}return l},pathClone:function(g){var d=[],a,f,b,e;if(!this.is(g,"array")||!this.is(g&&g[0],"array")){g=this.parsePathString(g)}for(b=0,e=g.length;b<e;b++){d[b]=[];for(a=0,f=g[b].length;a<f;a++){d[b][a]=g[b][a]}}d.toString=this.path2string;return d},pathToAbsolute:function(e){if(!this.is(e,"array")||!this.is(e&&e[0],"array")){e=this.parsePathString(e)}var m=[],o=0,n=0,s=0,q=0,d=0,h,t,a,p,g,l,f,b;if(e[0][0]=="M"){o=+e[0][1];n=+e[0][2];s=o;q=n;d++;m[0]=["M",o,n]}for(h=d,t=e.length;h<t;h++){a=m[h]=[];p=e[h];if(p[0]!=p[0].toUpperCase()){a[0]=p[0].toUpperCase();switch(a[0]){case"A":a[1]=p[1];a[2]=p[2];a[3]=p[3];a[4]=p[4];a[5]=p[5];a[6]=+(p[6]+o);a[7]=+(p[7]+n);break;case"V":a[1]=+p[1]+n;break;case"H":a[1]=+p[1]+o;break;case"M":s=+p[1]+o;q=+p[2]+n;default:for(g=1,l=p.length;g<l;g++){a[g]=+p[g]+((g%2)?o:n)}}}else{for(f=0,b=p.length;f<b;f++){m[h][f]=p[f]}}switch(a[0]){case"Z":o=s;n=q;break;case"H":o=a[1];break;case"V":n=a[1];break;case"M":s=m[h][m[h].length-2];q=m[h][m[h].length-1];default:o=m[h][m[h].length-2];n=m[h][m[h].length-1]}}m.toString=this.path2string;return m},pathToRelative:function(e){if(!this.is(e,"array")||!this.is(e&&e[0],"array")){e=this.parsePathString(e)}var n=[],p=0,o=0,t=0,s=0,d=0;if(e[0][0]=="M"){p=e[0][1];o=e[0][2];t=p;s=o;d++;n.push(["M",p,o])}for(var h=d,u=e.length;h<u;h++){var a=n[h]=[],q=e[h];if(q[0]!=q[0].toLowerCase()){a[0]=q[0].toLowerCase();switch(a[0]){case"a":a[1]=q[1];a[2]=q[2];a[3]=q[3];a[4]=q[4];a[5]=q[5];a[6]=+(q[6]-p).toFixed(3);a[7]=+(q[7]-o).toFixed(3);break;case"v":a[1]=+(q[1]-o).toFixed(3);break;case"m":t=q[1];s=q[2];default:for(var g=1,l=q.length;g<l;g++){a[g]=+(q[g]-((g%2)?p:o)).toFixed(3)}}}else{a=n[h]=[];if(q[0]=="m"){t=q[1]+p;s=q[2]+o}for(var f=0,b=q.length;f<b;f++){n[h][f]=q[f]}}var m=n[h].length;switch(n[h][0]){case"z":p=t;o=s;break;case"h":p+=+n[h][m-1];break;case"v":o+=+n[h][m-1];break;default:p+=+n[h][m-2];o+=+n[h][m-1]}}n.toString=this.path2string;return n},path2curve:function(k){var e=this,h=e.pathToAbsolute(k),d=h.length,j={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b,a,g,f;for(b=0;b<d;b++){h[b]=e.command2curve(h[b],j);if(h[b].length>7){h[b].shift();f=h[b];while(f.length){h.splice(b++,0,["C"].concat(f.splice(0,6)))}h.splice(b,1);d=h.length}a=h[b];g=a.length;j.x=a[g-2];j.y=a[g-1];j.bx=parseFloat(a[g-4])||j.x;j.by=parseFloat(a[g-3])||j.y}return h},interpolatePaths:function(r,l){var j=this,e=j.pathToAbsolute(r),m=j.pathToAbsolute(l),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b=function(p,s){if(p[s].length>7){p[s].shift();var t=p[s];while(t.length){p.splice(s++,0,["C"].concat(t.splice(0,6)))}p.splice(s,1);o=Math.max(e.length,m.length||0)}},d=function(v,u,s,p,t){if(v&&u&&v[t][0]=="M"&&u[t][0]!="M"){u.splice(t,0,["M",p.x,p.y]);s.bx=0;s.by=0;s.x=v[t][1];s.y=v[t][2];o=Math.max(e.length,m.length||0)}};for(var h=0,o=Math.max(e.length,m.length||0);h<o;h++){e[h]=j.command2curve(e[h],n);b(e,h);(m[h]=j.command2curve(m[h],a));b(m,h);d(e,m,n,a,h);d(m,e,a,n,h);var g=e[h],q=m[h],f=g.length,k=q.length;n.x=g[f-2];n.y=g[f-1];n.bx=parseFloat(g[f-4])||n.x;n.by=parseFloat(g[f-3])||n.y;a.bx=(parseFloat(q[k-4])||a.x);a.by=(parseFloat(q[k-3])||a.y);a.x=q[k-2];a.y=q[k-1]}return[e,m]},command2curve:function(e,b){var a=this;if(!e){return["C",b.x,b.y,b.x,b.y,b.x,b.y]}if(e[0]!="T"&&e[0]!="Q"){b.qx=b.qy=null}switch(e[0]){case"M":b.X=e[1];b.Y=e[2];break;case"A":e=["C"].concat(a.arc2curve.apply(a,[b.x,b.y].concat(e.slice(1))));break;case"S":e=["C",b.x+(b.x-(b.bx||b.x)),b.y+(b.y-(b.by||b.y))].concat(e.slice(1));break;case"T":b.qx=b.x+(b.x-(b.qx||b.x));b.qy=b.y+(b.y-(b.qy||b.y));e=["C"].concat(a.quadratic2curve(b.x,b.y,b.qx,b.qy,e[1],e[2]));break;case"Q":b.qx=e[1];b.qy=e[2];e=["C"].concat(a.quadratic2curve(b.x,b.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(b.x,b.y,e[1],e[2],e[1],e[2]);break;case"H":e=["C"].concat(b.x,b.y,e[1],b.y,e[1],b.y);break;case"V":e=["C"].concat(b.x,b.y,b.x,e[1],b.x,e[1]);break;case"Z":e=["C"].concat(b.x,b.y,b.X,b.Y,b.X,b.Y);break}return e},quadratic2curve:function(b,e,h,f,a,d){var g=1/3,i=2/3;return[g*b+i*h,g*e+i*f,g*a+i*h,g*d+i*f,a,d]},rotate:function(b,h,a){var e=Math.cos(a),d=Math.sin(a),g=b*e-h*d,f=b*d+h*e;return{x:g,y:f}},arc2curve:function(v,ai,J,H,B,o,j,u,ah,C){var z=this,f=Math.PI,A=z.radian,G=f*120/180,b=A*(+B||0),O=[],L=Math,W=L.cos,a=L.sin,Y=L.sqrt,w=L.abs,p=L.asin,K,d,r,Q,P,ad,e,U,X,E,D,n,m,s,l,ag,g,af,S,V,T,ae,ac,ab,Z,N,aa,M,F,I,q;if(!C){K=z.rotate(v,ai,-b);v=K.x;ai=K.y;K=z.rotate(u,ah,-b);u=K.x;ah=K.y;d=W(A*B);r=a(A*B);Q=(v-u)/2;P=(ai-ah)/2;ad=(Q*Q)/(J*J)+(P*P)/(H*H);if(ad>1){ad=Y(ad);J=ad*J;H=ad*H}e=J*J;U=H*H;X=(o==j?-1:1)*Y(w((e*U-e*P*P-U*Q*Q)/(e*P*P+U*Q*Q)));E=X*J*P/H+(v+u)/2;D=X*-H*Q/J+(ai+ah)/2;n=p(((ai-D)/H).toFixed(7));m=p(((ah-D)/H).toFixed(7));n=v<E?f-n:n;m=u<E?f-m:m;if(n<0){n=f*2+n}if(m<0){m=f*2+m}if(j&&n>m){n=n-f*2}if(!j&&m>n){m=m-f*2}}else{n=C[0];m=C[1];E=C[2];D=C[3]}s=m-n;if(w(s)>G){F=m;I=u;q=ah;m=n+G*(j&&m>n?1:-1);u=E+J*W(m);ah=D+H*a(m);O=z.arc2curve(u,ah,J,H,B,0,j,I,q,[m,F,E,D])}s=m-n;l=W(n);ag=a(n);g=W(m);af=a(m);S=L.tan(s/4);V=4/3*J*S;T=4/3*H*S;ae=[v,ai];ac=[v+V*ag,ai-T*l];ab=[u+V*af,ah-T*g];Z=[u,ah];ac[0]=2*ae[0]-ac[0];ac[1]=2*ae[1]-ac[1];if(C){return[ac,ab,Z].concat(O)}else{O=[ac,ab,Z].concat(O).join().split(",");N=[];M=O.length;for(aa=0;aa<M;aa++){N[aa]=aa%2?z.rotate(O[aa-1],O[aa],b).y:z.rotate(O[aa],O[aa+1],b).x}return N}},rotatePoint:function(b,h,f,a,g){if(!f){return{x:b,y:h}}a=a||0;g=g||0;b=b-a;h=h-g;f=f*this.radian;var e=Math.cos(f),d=Math.sin(f);return{x:b*e-h*d+a,y:b*d+h*e+g}},rotateAndTranslatePath:function(k){var d=k.rotation.degrees,e=k.rotation.x,b=k.rotation.y,o=k.translation.x,l=k.translation.y,n,g,a,m,f,h=[];if(!d&&!o&&!l){return this.pathToAbsolute(k.attr.path)}o=o||0;l=l||0;n=this.pathToAbsolute(k.attr.path);for(g=n.length;g--;){a=h[g]=n[g].slice();if(a[0]=="A"){m=this.rotatePoint(a[6],a[7],d,e,b);a[6]=m.x+o;a[7]=m.y+l}else{f=1;while(a[f+1]!=null){m=this.rotatePoint(a[f],a[f+1],d,e,b);a[f]=m.x+o;a[f+1]=m.y+l;f+=2}}}return h},pathDimensions:function(m){if(!m||!(m+"")){return{x:0,y:0,width:0,height:0}}m=this.path2curve(m);var j=0,h=0,e=[],b=[],d,f,l,a,k,g;for(f=0,l=m.length;f<l;f++){d=m[f];if(d[0]=="M"){j=d[1];h=d[2];e.push(j);b.push(h)}else{g=this.curveDim(j,h,d[1],d[2],d[3],d[4],d[5],d[6]);e=e.concat(g.min.x,g.max.x);b=b.concat(g.min.y,g.max.y);j=d[5];h=d[6]}}a=Math.min.apply(0,e);k=Math.min.apply(0,b);return{x:a,y:k,width:Math.max.apply(0,e)-a,height:Math.max.apply(0,b)-k}},curveDim:function(f,d,h,g,s,r,o,l){var q=(s-2*h+f)-(o-2*s+h),n=2*(h-f)-2*(s-h),k=f-h,j=(-n+Math.sqrt(n*n-4*q*k))/2/q,i=(-n-Math.sqrt(n*n-4*q*k))/2/q,m=[d,l],p=[f,o],e;if(Math.abs(j)>1000000000000){j=0.5}if(Math.abs(i)>1000000000000){i=0.5}if(j>0&&j<1){e=this.findDotAtSegment(f,d,h,g,s,r,o,l,j);p.push(e.x);m.push(e.y)}if(i>0&&i<1){e=this.findDotAtSegment(f,d,h,g,s,r,o,l,i);p.push(e.x);m.push(e.y)}q=(r-2*g+d)-(l-2*r+g);n=2*(g-d)-2*(r-g);k=d-g;j=(-n+Math.sqrt(n*n-4*q*k))/2/q;i=(-n-Math.sqrt(n*n-4*q*k))/2/q;if(Math.abs(j)>1000000000000){j=0.5}if(Math.abs(i)>1000000000000){i=0.5}if(j>0&&j<1){e=this.findDotAtSegment(f,d,h,g,s,r,o,l,j);p.push(e.x);m.push(e.y)}if(i>0&&i<1){e=this.findDotAtSegment(f,d,h,g,s,r,o,l,i);p.push(e.x);m.push(e.y)}return{min:{x:Math.min.apply(0,p),y:Math.min.apply(0,m)},max:{x:Math.max.apply(0,p),y:Math.max.apply(0,m)}}},getAnchors:function(e,d,q,o,j,h,t){t=t||4;var f=Math.min(Math.sqrt(Math.pow(e-q,2)+Math.pow(d-o,2))/t,Math.sqrt(Math.pow(j-q,2)+Math.pow(h-o,2))/t),r=Math.atan((q-e)/Math.abs(o-d)),p=Math.atan((j-q)/Math.abs(o-h)),m=Math.PI;r=d<o?m-r:r;p=h<o?m-p:p;var g=m/2-((r+p)%(m*2))/2;g>m/2&&(g-=m);var u=f*Math.sin(g+r),n=f*Math.cos(g+r),s=f*Math.sin(g+p),k=f*Math.cos(g+p),i={x1:q-u,y1:o+n,x2:q+s,y2:o+k};return i},smooth:function(a,r){var q=this.path2curve(a),f=[q[0]],k=q[0][1],h=q[0][2],s,u,v=1,l=q.length,g=1,n=k,m=h,d=0,b=0;for(;v<l;v++){var A=q[v],z=A.length,w=q[v-1],o=w.length,t=q[v+1],p=t&&t.length;if(A[0]=="M"){n=A[1];m=A[2];s=v+1;while(q[s][0]!="C"){s++}d=q[s][5];b=q[s][6];f.push(["M",n,m]);g=f.length;k=n;h=m;continue}if(A[z-2]==n&&A[z-1]==m&&(!t||t[0]=="M")){var e=f[g].length;u=this.getAnchors(w[o-2],w[o-1],n,m,f[g][e-2],f[g][e-1],r);f[g][1]=u.x2;f[g][2]=u.y2}else{if(!t||t[0]=="M"){u={x1:A[z-2],y1:A[z-1]}}else{u=this.getAnchors(w[o-2],w[o-1],A[z-2],A[z-1],t[p-2],t[p-1],r)}}f.push(["C",k,h,u.x1,u.y1,A[z-2],A[z-1]]);k=u.x2;h=u.y2}return f},findDotAtSegment:function(b,a,e,d,j,i,h,g,k){var f=1-k;return{x:Math.pow(f,3)*b+Math.pow(f,2)*3*k*e+f*3*k*k*j+Math.pow(k,3)*h,y:Math.pow(f,3)*a+Math.pow(f,2)*3*k*d+f*3*k*k*i+Math.pow(k,3)*g}},snapEnds:function(q,r,e){var d=(r-q)/e,a=Math.floor(Math.log(d)/Math.LN10)+1,f=Math.pow(10,a),s,o=Math.round((d%f)*Math.pow(10,2-a)),b=[[0,15],[20,4],[30,2],[40,4],[50,9],[60,4],[70,2],[80,4],[100,15]],h=0,p,k,j,g,l=1000000000,n=b.length;s=q=Math.floor(q/f)*f;for(j=0;j<n;j++){p=b[j][0];k=(p-o)<0?1000000:(p-o)/b[j][1];if(k<l){g=p;l=k}}d=Math.floor(d*Math.pow(10,-a))*Math.pow(10,a)+g*Math.pow(10,a-2);while(s<r){s+=d;h++}r=+s.toFixed(10);return{from:q,to:r,power:a,step:d,steps:h}},sorter:function(e,d){return e.offset-d.offset},rad:function(a){return a%360*Math.PI/180},degrees:function(a){return a*180/Math.PI%360},withinBox:function(a,d,b){b=b||{};return(a>=b.x&&a<=(b.x+b.width)&&d>=b.y&&d<=(b.y+b.height))},parseGradient:function(k){var f=this,g=k.type||"linear",d=k.angle||0,i=f.radian,l=k.stops,a=[],j,b,h,e;if(g=="linear"){b=[0,0,Math.cos(d*i),Math.sin(d*i)];h=1/(Math.max(Math.abs(b[2]),Math.abs(b[3]))||1);b[2]*=h;b[3]*=h;if(b[2]<0){b[0]=-b[2];b[2]=0}if(b[3]<0){b[1]=-b[3];b[3]=0}}for(j in l){if(l.hasOwnProperty(j)&&f.stopsRE.test(j)){e={offset:parseInt(j,10),color:Ext.draw.Color.toHex(l[j].color)||"#ffffff",opacity:l[j].opacity||1};a.push(e)}}a.sort(f.sorter);if(g=="linear"){return{id:k.id,type:g,vector:b,stops:a}}else{return{id:k.id,type:g,centerX:k.centerX,centerY:k.centerY,focalX:k.focalX,focalY:k.focalY,radius:k.radius,vector:b,stops:a}}}});Ext.draw.Matrix=Ext.extend(Object,{constructor:function(h,g,l,k,j,i){if(h!=null){this.matrix=[[h,l,j],[g,k,i],[0,0,1]]}else{this.matrix=[[1,0,0],[0,1,0],[0,0,1]]}},add:function(s,p,m,k,i,h){var n=this,g=[[],[],[]],r=[[s,m,i],[p,k,h],[0,0,1]],q,o,l,j;for(q=0;q<3;q++){for(o=0;o<3;o++){j=0;for(l=0;l<3;l++){j+=n.matrix[q][l]*r[l][o]}g[q][o]=j}}n.matrix=g},prepend:function(s,p,m,k,i,h){var n=this,g=[[],[],[]],r=[[s,m,i],[p,k,h],[0,0,1]],q,o,l,j;for(q=0;q<3;q++){for(o=0;o<3;o++){j=0;for(l=0;l<3;l++){j+=r[q][l]*n.matrix[l][o]}g[q][o]=j}}n.matrix=g},invert:function(){var j=this.matrix,i=j[0][0],h=j[1][0],n=j[0][1],m=j[1][1],l=j[0][2],k=j[1][2],g=i*m-h*n;return new Ext.draw.Matrix(m/g,-h/g,-n/g,i/g,(n*k-m*l)/g,(h*l-i*k)/g)},clone:function(){var i=this.matrix,h=i[0][0],g=i[1][0],m=i[0][1],l=i[1][1],k=i[0][2],j=i[1][2];return new Ext.draw.Matrix(h,g,m,l,k,j)},translate:function(a,b){this.prepend(1,0,0,1,a,b)},scale:function(b,f,a,e){var d=this;if(f==null){f=b}d.add(1,0,0,1,a,e);d.add(b,0,0,f,0,0);d.add(1,0,0,1,-a,-e)},rotate:function(d,b,h){d=Ext.draw.Draw.rad(d);var f=this,g=+Math.cos(d).toFixed(9),e=+Math.sin(d).toFixed(9);f.add(g,e,-e,g,b,h);f.add(1,0,0,1,-b,-h)},x:function(a,d){var b=this.matrix;return a*b[0][0]+d*b[0][1]+b[0][2]},y:function(a,d){var b=this.matrix;return a*b[1][0]+d*b[1][1]+b[1][2]},get:function(b,a){return +this.matrix[b][a].toFixed(4)},toString:function(){var a=this;return[a.get(0,0),a.get(0,1),a.get(1,0),a.get(1,1),0,0].join()},toSVG:function(){var a=this;return"matrix("+[a.get(0,0),a.get(1,0),a.get(0,1),a.get(1,1),a.get(0,2),a.get(1,2)].join()+")"},toFilter:function(){var a=this;return"progid:DXImageTransform.Microsoft.Matrix(M11="+a.get(0,0)+", M12="+a.get(0,1)+", M21="+a.get(1,0)+", M22="+a.get(1,1)+", Dx="+a.get(0,2)+", Dy="+a.get(1,2)+")"},offset:function(){var a=this.matrix;return[a[0][2].toFixed(4),a[1][2].toFixed(4)]}});Ext.chart.Labels=Ext.extend(Object,{colorStringRe:/url\s*\(\s*#([^\/)]+)\s*\)/,constructor:function(a){var b=this;b.label=Ext.applyIf(b.label||{},{display:"none",color:"#000",field:"name",minMargin:50,font:"11px Helvetica, sans-serif",orientation:"horizontal",renderer:function(d){return d}});if(b.label.display!=="none"){b.labelsGroup=b.chart.surface.getGroup(b.seriesId+"-labels")}},renderLabels:function(){var G=this,r=G.chart,u=r.gradients,b,s=G.items,e=r.animate,E=G.label,x=E.display,w=E.color,d=[].concat(E.field),m=G.labelsGroup,f=G.chart.store,A=f.getCount(),h=s.length/A,z,g,y,v,a=(u||0)&&u.length,q,C,o,D,l,p,t,n,B,F,I=Ext.draw.Color,H;if(x=="none"){return}for(z=0,g=0;z<A;z++){for(y=0;y<h;y++){D=s[g];l=m.getAt(g);p=f.getAt(z);if(!D&&l){l.hide(true)}if(D&&d[y]){if(!l){l=G.onCreateLabel(p,D,z,x,y,g)}G.onPlaceLabel(l,p,D,z,x,e,y,g);if(E.contrast&&D.sprite){t=D.sprite;H=t._to&&t._to.fill||t.attr.fill;n=I.fromString(H);if(H&&!n){H=H.match(G.colorStringRe)[1];for(v=0;v<a;v++){b=u[v];if(b.id==H){o=0;q=0;for(C in b.stops){o++;q+=I.fromString(b.stops[C].color).getGrayscale()}B=(q/o)/255;break}}}else{B=n.getGrayscale()/255}F=I.fromString(l.attr.color||l.attr.fill).getHSL();F[2]=B>0.5?0.2:0.8;l.setAttributes({fill:String(I.fromHSL.apply({},F))},true)}}g++}}G.hideLabels(g)},hideLabels:function(d){var b=this.labelsGroup,a;if(b){a=b.getCount();while(a-->d){b.getAt(a).hide(true)}}}});Ext.chart.theme=function(d,b){d=d||{};var k=0,h,a,j,p,q,f,n,o,m=[],e,g;if(d.baseColor){e=Ext.draw.Color.fromString(d.baseColor);g=e.getHSL()[2];if(g<0.15){e=e.getLighter(0.3)}else{if(g<0.3){e=e.getLighter(0.15)}else{if(g>0.85){e=e.getDarker(0.3)}else{if(g>0.7){e=e.getDarker(0.15)}}}}d.colors=[e.getDarker(0.3).toString(),e.getDarker(0.15).toString(),e.toString(),e.getLighter(0.15).toString(),e.getLighter(0.3).toString()];delete d.baseColor}if(d.colors){a=d.colors.slice();q=b.markerThemes;p=b.seriesThemes;h=a.length;b.colors=a;for(;k<h;k++){j=a[k];n=q[k]||{};f=p[k]||{};n.fill=f.fill=n.stroke=f.stroke=j;q[k]=n;p[k]=f}b.markerThemes=q.slice(0,h);b.seriesThemes=p.slice(0,h)}for(o in b){if(o in d){if(Ext.isObject(d[o])&&Ext.isObject(b[o])){Ext.apply(b[o],d[o])}else{b[o]=d[o]}}}if(d.useGradients){a=b.colors||(function(){var i=[];for(k=0,p=b.seriesThemes,h=p.length;k<h;k++){i.push(p[k].fill||p[k].stroke)}return i})();for(k=0,h=a.length;k<h;k++){e=Ext.draw.Color.fromString(a[k]);if(e){j=e.getDarker(0.1).toString();e=e.toString();o="theme-"+e.substr(1)+"-"+j.substr(1);m.push({id:o,angle:45,stops:{0:{color:e.toString()},100:{color:j.toString()}}});a[k]="url(#"+o+")"}}b.gradients=m;b.colors=a}Ext.apply(this,b)};Ext.chart.theme.Theme=Ext.extend(Object,{theme:"Base",themeAttrs:false,initTheme:function(f){var e=this,b=Ext.chart.theme,d,a;if(f){f=f.split(":");for(d in b){if(d==f[0]){a=f[1]=="gradients";e.themeAttrs=new b[d]({useGradients:a});if(a){e.gradients=e.themeAttrs.gradients}if(e.themeAttrs.background){e.background=e.themeAttrs.background}return}}throw"No theme found named "+f}}});Ext.chart.theme.Base=Ext.extend(Object,{constructor:function(a){Ext.chart.theme.call(this,a,{background:false,axis:{stroke:"#444","stroke-width":1},axisLabelTop:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelRight:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelBottom:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisLabelLeft:{fill:"#444",font:"12px Arial, Helvetica, sans-serif",spacing:2,padding:5,renderer:function(b){return b}},axisTitleTop:{font:"bold 18px Arial",fill:"#444"},axisTitleRight:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},axisTitleBottom:{font:"bold 18px Arial",fill:"#444"},axisTitleLeft:{font:"bold 18px Arial",fill:"#444",rotate:{x:0,y:0,degrees:270}},series:{"stroke-width":0},seriesLabel:{font:"12px Arial",fill:"#333"},marker:{stroke:"#555",fill:"#000",radius:3,size:3},colors:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],seriesThemes:[{fill:"#115fa6"},{fill:"#94ae0a"},{fill:"#a61120"},{fill:"#ff8809"},{fill:"#ffd13e"},{fill:"#a61187"},{fill:"#24ad9a"},{fill:"#7c7474"},{fill:"#a66111"}],markerThemes:[{fill:"#115fa6",type:"circle"},{fill:"#94ae0a",type:"cross"},{fill:"#a61120",type:"plus"}]})}});Ext.onReady(function(){var d=["#b1da5a","#4ce0e7","#e84b67","#da5abd","#4d7fe6","#fec935"],k=["Green","Sky","Red","Purple","Blue","Yellow"],h=0,g=0,b=d.length,a=Ext.chart.theme,e=[["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]],f=e.length;for(;h<b;h++){a[k[h]]=(function(i){return Ext.extend(a.Base,{constructor:function(j){a.Base.prototype.constructor.call(this,Ext.apply({baseColor:i},j))}})})(d[h])}for(h=0;h<f;h++){a["Category"+(h+1)]=(function(i){return Ext.extend(a.Base,{constructor:function(j){a.Base.prototype.constructor.call(this,Ext.apply({colors:i},j))}})})(e[h])}});Ext.draw.Sprite=Ext.extend(Ext.util.Observable,{dirty:false,dirtyHidden:false,dirtyTransform:false,dirtyPath:true,dirtyFont:true,zIndexDirty:true,isSprite:true,zIndex:0,fontProperties:["font","font-size","font-weight","font-style","font-family","text-anchor","text"],pathProperties:["x","y","d","path","height","width","radius","r","rx","ry","cx","cy"],constructor:function(a){a=a||{};this.id=Ext.id(null,"ext-sprite-");this.transformations=[];Ext.copyTo(this,a,"surface,group,type");this.bbox={};this.attr={zIndex:0,translation:{x:null,y:null},rotation:{degrees:null,x:null,y:null},scaling:{x:null,y:null,cx:null,cy:null}};delete a.surface;delete a.group;delete a.type;this.setAttributes(a);this.addEvents("render","mousedown","mouseup","mouseover","mouseout","click");Ext.draw.Sprite.superclass.constructor.apply(this,arguments)},setAttributes:function(p,r){var n=this,s=n.fontProperties,l=s.length,g=n.pathProperties,o=g.length,d=n.surface.customAttributes,b=n.attr,m,k,f,a,j,q,h,e;if(typeof p=="undefined"){return this}for(m in d){if(p.hasOwnProperty(m)&&typeof d[m]=="function"){Ext.apply(p,d[m].apply(n,[].concat(p[m])))}}if(!!p.hidden!==!!b.hidden){n.dirtyHidden=true}for(k=0;k<o;k++){m=g[k];if(m in p&&p[m]!==b[m]){n.dirtyPath=true;break}}if("zIndex" in p){n.zIndexDirty=true}for(k=0;k<l;k++){m=s[k];if(m in p&&p[m]!==b[m]){n.dirtyFont=true;break}}f=p.translate;a=b.translation;if(f){if((f.x&&f.x!==a.x)||(f.y&&f.y!==a.y)){Ext.apply(a,f);n.dirtyTransform=true}delete p.translate}j=p.rotate;q=b.rotation;if(j){if((j.x&&j.x!==q.x)||(j.y&&j.y!==q.y)||(j.degrees&&j.degrees!==q.degrees)){Ext.apply(q,j);n.dirtyTransform=true}delete p.rotate}h=p.scale;e=b.scaling;if(h){if((h.x&&h.x!==e.x)||(h.y&&h.y!==e.y)||(h.cx&&h.cx!==e.cx)||(h.cy&&h.cy!==e.cy)){Ext.apply(e,h);n.dirtyTransform=true}delete p.scale}Ext.apply(b,p);n.dirty=true;if(r===true){n.redraw()}return this},getBBox:function(){return this.surface.getBBox(this)},hide:function(a){this.setAttributes({hidden:true},a);return this},show:function(a){this.setAttributes({hidden:false},a);return this},redraw:function(){this.surface.renderItem(this);return this},setStyle:function(){this.el.setStyle.apply(this.el,arguments);return this},addCls:function(a){this.surface.addCls(this,a);return this},removeCls:function(a){this.surface.removeCls(this,a);return this}});Ext.mixin(Ext.draw.Sprite,"animate",Ext.util.Animate);Ext.draw.SpriteGroup=Ext.extend(Ext.util.MixedCollection,{isSpriteGroup:true,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.addEvents("mousedown","mouseup","mouseover","mouseout","click");b.id=Ext.id(null,"ext-sprite-group-");Ext.draw.SpriteGroup.superclass.constructor.call(this)},onClick:function(a){this.fireEvent("click",a)},onMouseUp:function(a){this.fireEvent("mouseup",a)},onMouseDown:function(a){this.fireEvent("mousedown",a)},onMouseOver:function(a){this.fireEvent("mouseover",a)},onMouseOut:function(a){this.fireEvent("mouseout",a)},attachEvents:function(b){var a=this;b.on({scope:a,mousedown:a.onMouseDown,mouseup:a.onMouseUp,mouseover:a.onMouseOver,mouseout:a.onMouseOut,click:a.onClick})},add:function(b,d){var a=Ext.draw.SpriteGroup.superclass.add.apply(this,arguments);this.attachEvents(a);return a},insert:function(a,b,d){return Ext.draw.SpriteGroup.superclass.insert.apply(this,arguments)},remove:function(b){var a=this;b.un({scope:a,mousedown:a.onMouseDown,mouseup:a.onMouseUp,mouseover:a.onMouseOver,mouseout:a.onMouseOut,click:a.onClick});Ext.draw.SpriteGroup.superclass.remove.apply(this,arguments)},getBBox:function(){var f=0,n,j,k=this.items,g=this.length,h=Infinity,d=h,m=-h,b=h,l=-h,e,a;for(;f<g;f++){n=k[f];if(n.el){j=n.getBBox();d=Math.min(d,j.x);b=Math.min(b,j.y);m=Math.max(m,j.height+j.y);l=Math.max(l,j.width+j.x)}}return{x:d,y:b,height:m-b,width:l-d}},setAttributes:function(d,f){var e=0,b=this.items,a=this.length;for(;e<a;e++){b[e].setAttributes(d,f)}return this},hide:function(d){var e=0,b=this.items,a=this.length;for(;e<a;e++){b[e].hide()}return this},show:function(d){var e=0,b=this.items,a=this.length;for(;e<a;e++){b[e].show()}return this},redraw:function(){var f=this,e=0,d=f.items,b=f.getSurface(),a=f.length;if(b){for(;e<a;e++){b.renderItem(d[e])}}return f},setStyle:function(f){var d=0,b=this.items,a=this.length,e;for(;d<a;d++){e=b[d];if(e.el){el.setStyle(f)}}},addCls:function(f){var e=0,d=this.items,b=this.getSurface(),a=this.length;if(b){for(;e<a;e++){b.addCls(d[e],f)}}},removeCls:function(f){var e=0,d=this.items,b=this.getSurface(),a=this.length;if(b){for(;e<a;e++){b.removeCls(d[e],f)}}},getSurface:function(){var a=this.first();if(a){return a.surface}return null},destroy:function(){var d=this,a=d.getSurface(),b;if(a){while(d.getCount()>0){b=d.first();d.remove(b);a.remove(b)}}d.clearListeners()}});Ext.mixin(Ext.draw.SpriteGroup,"animate",Ext.util.Animate);Ext.chart.LegendItem=Ext.extend(Ext.draw.SpriteGroup,{x:0,y:0,zIndex:500,constructor:function(a){Ext.chart.LegendItem.superclass.constructor.apply(this,arguments);this.createSprites(a)},createSprites:function(s){var t=this,h=s.yFieldIndex,k=t.series,a=k.type,m=t.yFieldIndex,d=t.legend,p=t.surface,q=d.x+t.x,n=d.y+t.y,b,j=t.zIndex,l,i,r,e,o=false,g=Ext.apply(k.seriesStyle,k.style);function f(u){var v=k[u];return(Ext.isArray(v)?v[m]:v)}i=t.add("label",p.add({type:"text",x:20,y:0,zIndex:j||0,font:d.labelFont,text:f("title")||f("yField")}));if(a==="line"||a==="scatter"){if(a==="line"){t.add("line",p.add({type:"path",path:"M0.5,0.5L16.5,0.5",zIndex:j,"stroke-width":k.lineWidth,"stroke-linejoin":"round","stroke-dasharray":k.dash,stroke:g.stroke||"#000",style:{cursor:"pointer"}}))}if(k.showMarkers||a==="scatter"){l=Ext.apply(k.markerStyle,k.markerCfg||{});t.add("marker",Ext.chart.Shapes[l.type](p,{fill:l.fill,x:8.5,y:0.5,zIndex:j,radius:l.radius||l.size,style:{cursor:"pointer"}}))}}else{t.add("box",p.add({type:"rect",zIndex:j,x:0,y:0,width:12,height:12,fill:k.getLegendColor(h),style:{cursor:"pointer"}}))}t.setAttributes({hidden:false},true);b=t.getBBox();r=t.add("mask",p.add({type:"rect",x:b.x,y:b.y,width:b.width||20,height:b.height||20,zIndex:(j||0)+1000,fill:"#f00",opacity:0,style:{cursor:"pointer"}}));t.on("mouseover",function(){i.setStyle({"font-weight":"bold"});r.setStyle({cursor:"pointer"});k._index=h;k.highlightItem()},t);t.on("mouseout",function(){i.setStyle({"font-weight":"normal"});k._index=h;k.unHighlightItem()},t);if(!k.visibleInLegend(h)){o=true;i.setAttributes({opacity:0.5},true)}t.on("mousedown",function(){if(!o){k.hideAll();i.setAttributes({opacity:0.5},true)}else{k.showAll();i.setAttributes({opacity:1},true)}o=!o},t);t.updatePosition({x:0,y:0})},updatePosition:function(d){var g=this,a=g.items,f=a.length,b=0,e;if(!d){d=g.legend}for(;b<f;b++){e=a[b];switch(e.type){case"text":e.setAttributes({x:20+d.x+g.x,y:d.y+g.y},true);break;case"rect":e.setAttributes({translate:{x:d.x+g.x,y:d.y+g.y-6}},true);break;default:e.setAttributes({translate:{x:d.x+g.x,y:d.y+g.y}},true)}}}});Ext.chart.Legend=Ext.extend(Object,{visible:true,position:"bottom",x:0,y:0,labelFont:"12px Helvetica, sans-serif",boxStroke:"#000",boxStrokeWidth:1,boxFill:"#FFF",itemSpacing:10,padding:5,width:0,height:0,boxZIndex:100,constructor:function(a){var b=this;if(a){Ext.apply(b,a)}b.items=[];b.isVertical=("left|right|float".indexOf(b.position)!==-1);b.origX=b.x;b.origY=b.y},create:function(){var a=this;a.createItems();if(!a.created&&a.isDisplayed()){a.createBox();a.created=true}},isDisplayed:function(){return this.visible&&this.chart.series.findIndex("showInLegend",true)!==-1},createItems:function(){var A=this,n=A.chart,s=n.surface,p=A.items,m=A.padding,B=A.itemSpacing,j=2,v=0,r=0,f=0,z=0,b=A.isVertical,e=Math,d=e.floor,C=e.max,h=0,t=0,u=p?p.length:0,l,k,g,w,a,o,q;if(u){for(;t<u;t++){p[t].destroy()}}p.length=[];n.series.each(function(y,x){if(y.showInLegend){Ext.each([].concat(y.yField),function(D,i){w=new Ext.chart.LegendItem({legend:this,series:y,surface:n.surface,yFieldIndex:i});a=w.getBBox();q=a.width;o=a.height;if(x+i===0){g=b?m+o/2:m}else{g=B/(b?2:1)}w.x=d(b?m:f+g);w.y=d(b?z+g:m+o/2);f+=q+g;z+=o+g;v=C(v,q);r=C(r,o);p.push(w)},this)}},A);A.width=d((b?v:f)+m*2);if(b&&p.length===1){j=1}A.height=d((b?z-j*g:r)+(m*2));A.itemHeight=r},getBBox:function(){var a=this;return{x:Math.round(a.x)-a.boxStrokeWidth/2,y:Math.round(a.y)-a.boxStrokeWidth/2,width:a.width,height:a.height}},createBox:function(){var b=this,a=b.boxSprite=b.chart.surface.add(Ext.apply({type:"rect",stroke:b.boxStroke,"stroke-width":b.boxStrokeWidth,fill:b.boxFill,zIndex:b.boxZIndex},b.getBBox()));a.redraw()},updatePosition:function(){var i=this,l,j,n=i.width,m=i.height,k=i.padding,h=i.chart,o=h.chartBBox,b=h.insetPadding,e=o.width-(b*2),d=o.height-(b*2),g=o.x+b,f=o.y+b,a=h.surface,p=Math.floor;if(i.isDisplayed()){switch(i.position){case"left":l=b;j=p(f+d/2-m/2);break;case"right":l=p(a.width-n)-b;j=p(f+d/2-m/2);break;case"top":l=p(g+e/2-n/2);j=b;break;case"bottom":l=p(g+e/2-n/2);j=p(a.height-m)-b;break;default:l=p(i.origX)+b;j=p(i.origY)+b}i.x=l;i.y=j;Ext.each(i.items,function(q){q.updatePosition()});i.boxSprite.setAttributes(i.getBBox(),true)}}});Ext.draw.Surface=Ext.extend(Ext.util.Observable,{separatorRe:/[, ]+/,availableAttrs:{blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,"dominant-baseline":"auto",fill:"none","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:"",height:0,hidden:false,href:"http://sencha.com/",opacity:1,path:"M0,0",radius:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank",text:"","text-anchor":"middle",title:"Ext Draw",width:0,x:0,y:0,zIndex:0},container:undefined,height:352,width:512,x:0,y:0,constructor:function(a){var b=this;a=a||{};Ext.apply(b,a);b.domRef=Ext.getDoc().dom;b.customAttributes={};b.addEvents("mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","click");Ext.draw.Surface.superclass.constructor.call(b);b.getId();b.initGradients();b.initItems();if(b.renderTo){b.render(b.renderTo);delete b.renderTo}b.initBackground(a.background)},initSurface:Ext.emptyFn,renderItem:Ext.emptyFn,renderItems:Ext.emptyFn,setViewBox:Ext.emptyFn,addCls:Ext.emptyFn,removeCls:Ext.emptyFn,setStyle:Ext.emptyFn,initGradients:function(){var a=this.gradients;if(a){Ext.each(a,this.addGradient,this)}},initItems:function(){var a=this.items;this.items=new Ext.draw.SpriteGroup();this.groups=new Ext.draw.SpriteGroup();if(a){this.add(a)}},initBackground:function(b){var f,g,e,d=this.width,a=this.height;if(b){if(b.gradient){g=b.gradient;f=g.id;this.addGradient(g);this.background=this.add({type:"rect",x:0,y:0,width:d,height:a,fill:"url(#"+f+")"})}else{if(b.fill){this.background=this.add({type:"rect",x:0,y:0,width:d,height:a,fill:b.fill})}else{if(b.image){this.background=this.add({type:"image",x:0,y:0,width:d,height:a,src:b.image})}}}}},setSize:function(a,b){if(this.background){this.background.setAttributes({width:a,height:b,hidden:false},true)}},scrubAttrs:function(e){var d,b={},a={},f=e.attr;for(d in f){if(this.translateAttrs.hasOwnProperty(d)){b[this.translateAttrs[d]]=f[d];a[this.translateAttrs[d]]=true}else{if(this.availableAttrs.hasOwnProperty(d)&&!a[d]){b[d]=f[d]}}}return b},onClick:function(a){this.processEvent("click",a)},onMouseUp:function(a){this.processEvent("mouseup",a)},onMouseDown:function(a){this.processEvent("mousedown",a)},onMouseOver:function(a){this.processEvent("mouseover",a)},onMouseOut:function(a){this.processEvent("mouseout",a)},onMouseMove:function(a){this.fireEvent("mousemove",a)},onMouseEnter:Ext.emptyFn,onMouseLeave:Ext.emptyFn,addGradient:Ext.emptyFn,add:function(){var g=Array.prototype.slice.call(arguments),j,e;var a=g.length>1;if(a||Ext.isArray(g[0])){var h=a?g:g[0],b=[],d,f,k;for(d=0,f=h.length;d<f;d++){k=h[d];k=this.add(k);b.push(k)}return b}j=this.prepareItems(g[0],true)[0];this.positionSpriteInList(j);this.onAdd(j);return j},positionSpriteInList:function(d){var b=this.items,e=d.attr.zIndex,a=b.indexOf(d);if(a<0||(a>0&&b.getAt(a-1).attr.zIndex>e)||(a<b.length-1&&b.getAt(a+1).attr.zIndex<e)){b.removeAt(a);a=b.findIndexBy(function(f){return f.attr.zIndex>e});if(a<0){a=b.length}b.insert(a,d)}return a},onAdd:function(d){var f=d.group,a,e,b;if(f){a=[].concat(f);e=a.length;for(b=0;b<e;b++){f=a[b];this.getGroup(f).add(d)}delete d.group}},remove:function(a){if(a){this.items.remove(a);this.onRemove(a);this.groups.each(function(b){b.remove(a)})}},removeAll:function(){var a=this.items.items,d=a.length,b;for(b=d;b>-1;b--){this.remove(a[b])}},onRemove:Ext.emptyFn,applyTransformations:function(b){b.bbox.transform=0;this.transform(b);var e=this,d=false,a=b.attr;if(a.translation.x!=null||a.translation.y!=null){e.translate(b);d=true}if(a.scaling.x!=null||a.scaling.y!=null){e.scale(b);d=true}if(a.rotation.degrees!=null){e.rotate(b);d=true}if(d){b.bbox.transform=0;this.transform(b);b.transformations=[]}},rotate:function(a){var f,b=a.attr.rotation.degrees,e=a.attr.rotation.x,d=a.attr.rotation.y;if(!Ext.isNumber(e)||!Ext.isNumber(d)){f=this.getBBox(a);e=!Ext.isNumber(e)?f.x+f.width/2:e;d=!Ext.isNumber(d)?f.y+f.height/2:d}a.transformations.push({type:"rotate",degrees:b,x:e,y:d})},translate:function(b){var a=b.attr.translation.x||0,d=b.attr.translation.y||0;b.transformations.push({type:"translate",x:a,y:d})},scale:function(b){var f,a=b.attr.scaling.x||1,g=b.attr.scaling.y||1,e=b.attr.scaling.centerX,d=b.attr.scaling.centerY;if(!Ext.isNumber(e)||!Ext.isNumber(d)){f=this.getBBox(b);e=!Ext.isNumber(e)?f.x+f.width/2:e;d=!Ext.isNumber(d)?f.y+f.height/2:d}b.transformations.push({type:"scale",x:a,y:g,centerX:e,centerY:d})},rectPath:function(a,f,b,d,e){if(e){return[["M",a+e,f],["l",b-e*2,0],["a",e,e,0,0,1,e,e],["l",0,d-e*2],["a",e,e,0,0,1,-e,e],["l",e*2-b,0],["a",e,e,0,0,1,-e,-e],["l",0,e*2-d],["a",e,e,0,0,1,e,-e],["z"]]}return[["M",a,f],["l",b,0],["l",0,d],["l",-b,0],["z"]]},ellipsePath:function(a,e,d,b){if(b==null){b=d}return[["M",a,e],["m",0,-b],["a",d,b,0,1,1,0,2*b],["a",d,b,0,1,1,0,-2*b],["z"]]},getPathpath:function(a){return a.attr.path},getPathcircle:function(d){var b=d.attr;return this.ellipsePath(b.x,b.y,b.radius,b.radius)},getPathellipse:function(d){var b=d.attr;return this.ellipsePath(b.x,b.y,b.radiusX,b.radiusY)},getPathrect:function(d){var b=d.attr;return this.rectPath(b.x,b.y,b.width,b.height,b.r)},getPathimage:function(d){var b=d.attr;return this.rectPath(b.x,b.y,b.width,b.height)},getPathtext:function(a){var b=this.getBBoxText(a);return this.rectPath(b.x,b.y,b.width,b.height)},createGroup:function(b){var a=this.groups.get(b);if(!a){a=new Ext.draw.SpriteGroup({surface:this});a.id=b||Ext.id(null,"ext-surface-group-");this.groups.add(a)}return a},getGroup:function(b){if(typeof b=="string"){var a=this.groups.get(b);if(!a){a=this.createGroup(b)}}else{a=b}return a},prepareItems:function(a,d){a=[].concat(a);var f,b,e;for(b=0,e=a.length;b<e;b++){f=a[b];f.surface=this;a[b]=this.createItem(f)}return a},createItem:Ext.emptyFn,getId:function(){return this.id||(this.id=Ext.id(null,"ext-surface-"))},destroy:function(){delete this.domRef;this.removeAll()}});Ext.draw.Surface.newInstance=function(b,e){e=e||["SVG","Canvas","VML"];var d=0,a=e.length,f;for(;d<a;d++){if(Ext.supports[e[d]]){f=Ext.draw.engine[e[d]];if(f){return new f(b)}}}return false};Ext.draw.engine.Canvas=Ext.extend(Ext.draw.Surface,{fontSizeRE:/(?:^|\s)(\d+)px(?:\s|$)/,fontWeightRE:/(?:^|\s)(normal|bold|bolder|lighter|[1-9]00)(?:\s|$)/,fontStyleRE:/(?:^|\s)(normal|italic)(?:\s|$)/,fontFamilyRE:/^\s+|\s+$/g,urlRE:/^url\(['"]?([^\)]+?)['"]?\)$/i,separatorRE:/[, ]+/,constructor:function(a){this.translateAttrs={rotate:"rotation",stroke:"strokeStyle",fill:"fillStyle","text-anchor":"textAlign","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit",opacity:"globalAlpha"};this.attrDefaults={strokeStyle:"#000",fillStyle:"#000",lineWidth:1,lineCap:"square",lineJoin:"miter",miterLimit:1,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,rotate:null,font:"10px Helvetica, sans-serif",translation:null,"font-size":null,"font-family":null,"font-weight":null,"font-style":null,textAlign:"left",globalAlpha:1};Ext.draw.engine.Canvas.superclass.constructor.call(this,a)},updateMaxBoundingBox:function(d){if(d.type=="image"||d.type=="text"){delete d.realPath;Ext.draw.Draw.rectPath(this.getBBox(d));d.realPath=Ext.draw.Draw.rotateAndTranslatePath(d)}var b=this.getBBox(d),e=d.curBBox,a,f;if(!e){d.maxBBox=b}else{a=Math.min(b.x,e.x);f=Math.min(b.y,e.y);d.maxBBox={x:a,y:f,width:Math.max(b.x+b.width,e.x+e.width)-a,height:Math.max(b.y+b.height,e.y+e.height)-f}}d.curBBox=b},getBBox:function(j){var e,b;if(j.realPath){e=Ext.draw.Draw.pathDimensions(j.realPath)}else{switch(j.type){case"rect":case"image":e={x:j.x,y:j.y,width:j.width,height:j.height};break;case"circle":e={x:j.x-j.radius,y:j.y-j.radius,width:j.radius*2,height:j.radius*2};break;case"ellipse":e={x:j.x-j.radiusX,y:j.y-j.radiusY,width:j.radiusX*2,height:j.radiusY*2};break;case"path":e=Ext.draw.Draw.pathDimensions(j.path);break;case"text":var h=this.shadow;h.save();b=j["text-anchor"]||this.attrDefaults.textAlign;if(b=="middle"){b="center"}h.textAlign=b;h.font=j.font||this.attrDefaults.font;var a=0,m=(j.text+"").split("\n"),l=m.length,d=l,k=j["font-size"]*1.2,g=j.x,f=j.y-l*k/2;while(d--){a=Math.max(a,h.measureText(m[d]).width)}switch(h.textAlign){case"center":g-=a/2;break;case"end":g-=a;break}e={x:g,y:f,width:a,height:k*l};break}}e.x2=e.x+e.width;e.y2=e.y+e.height;return e},setSize:function(a,b){if(typeof a=="object"){b=a.height;a=a.width}this.el.width=this.shadow.width=a;this.el.height=this.shadow.height=b;this.width=a;this.height=b},render:function(a){var g=Ext.getDoc().dom,d,h,b,f=Ext.get(a).getHeight(),e=Ext.get(a).getWidth();this.container=Ext.get(a);d=g.createElement("canvas");d.id=this.id;h=g.createElement("canvas").getContext("2d");b=g.createElement("span");b.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";h.save();a.appendChild(d);a.appendChild(b);this.el=d;this.context=d.getContext("2d");this.shadow=h;this.span=b;this.renderAll()},createItem:function(a){a.context=Ext.getDoc().dom.createElement("canvas").getContext("2d");a.context.canvas.width=this.width;a.context.canvas.height=this.height;var b=Ext.apply(new Ext.draw.Sprite(a),{change:this.change});return b},renderItem:function(){this.renderAll()},renderAll:function(){var a=this.context;a.restore();a.save();a.clearRect(0,0,this.width,this.height);a.restore();a.save();this.items.each(this.renderItems,this)},updateSprite:function(a){this.applyChange(a);this.updateMaxBoundingBox(a)},applyChange:function(a){var b=a.path;this.cleanAttrs(a,this.scrubAttrs(a));switch(a.type){case"circle":a.radiusX=a.radiusY=a.radius;a.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.ellipsePath(a));break;case"ellipse":a.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.ellipsePath(a));break;case"path":a.path=Ext.draw.Draw.path2curve(a.path);break;case"rect":a.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.rectPath(a));break;case"text":a.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.rectPath(a));break}if(a.path&&a.path.length){a.realPath=Ext.draw.Draw.rotateAndTranslatePath(a)}if(b!=a.path){a.dirty=true}},drawPath:function(d,f){if(!f){return}var a,g,b,e=f.length;d.beginPath();for(b=0;b<e;b++){switch(f[b][0]){case"M":d.moveTo(f[b][1],f[b][2]);if(a==null){a=f[b][1]}if(g==null){g=f[b][2]}break;case"C":d.bezierCurveTo(f[b][1],f[b][2],f[b][3],f[b][4],f[b][5],f[b][6]);break;case"Z":d.lineTo(a,g);break}}},scrubAttrs:function(b){var a=Ext.draw.engine.Canvas.superclass.scrubAttrs.apply(this,[b]);if(a.hasOwnProperty("textAlign")&&a.textAlign=="middle"){a.textAlign="center"}return a},renderItems:function(z){this.updateSprite(z);var e=this.context,u=z.context,m,D;if(z.hidden||z.opacity==0){return}e.restore();e.save();if(m){e.beginPath();e.rect(m.x,m.y,m.width,m.height);e.clip()}if(z.dirty){u.restore();u.save();u.clearRect(-1000,-1000,this.width+2000,this.height+2000);var A=this.scrubAttrs(z);for(D in A){u[D]=A[D]}var E=z.rotation,K=E.degrees*Math.PI/180,I=z.translation.x,H=z.translation.y,L=this.scaling;if(E.degrees){u.translate(E.x,E.y);u.rotate(K);u.translate(-E.x,-E.y);if(I!==0||H!==0){var s=I,q=H,d=Math.cos(-K),a=Math.sin(-K);I=s*d-q*a;H=s*a+q*d;u.translate(I,H)}}else{u.translate(I,H)}if(this.type=="image"){if(!(this._imgdata&&this._imgdata[A.src])){var M=R.doc.createElement("img"),b=this,t=this.m;M.src=A.src;M.style.cssText="position:absolute;left:-9999em;top-9999em";M.onload=function(){var i=R.doc.createElement("canvas"),g=i.getContext("2d");i.width=M.offsetWidth;i.height=M.offsetHeight;g.drawImage(M,0,0,i.width,i.height);b._imgdata=b._imgdata||{};b._imgdatacount=b._imgdatacount||[];b._imgdatacount.push(b._imgdata[b.attrs.src]=i);b._imgdatacount[length]>1000&&delete b._imgdata[b._imgdatacount.shift()];M.parentNode.removeChild(M);t.refresh(this)};this.m.canvas.parentNode.appendChild(M)}else{if(sc.x||sc.y){c.scale(sc.x,sc.y);c.translate(sc.cx/sc.x-sc.cx,sc.cy/sc.y-sc.cy)}c.drawImage(this._imgdata[A.src],A.x,A.y,A.width,A.height);c.restore();return}}else{if(z.type=="text"){var C,p,B,G,v,r=(z.text+"").split("\n"),k;k=z["text-anchor"]||this.attrDefaults.textAlign;if(k=="middle"){k="center"}u.textAlign=k;u.font=z.font||this.attrDefaults.font;u.textBaseline="middle";C=z.fillStyle&&z.fillStyle!="none";p=z.strokeStyle&&z.strokeStyle!="none";v=z.y-(r.length-1)*z["font-size"]*1.2/2;for(B=0,G=r.length;B<G;B++){if(C){u.fillText(r[B],z.x,v+z["font-size"]*1.2*B)}if(p){u.strokeText(r[B],z.x,v+z["font-size"]*1.2*B)}}}else{this.drawPath(u,z.path)}}u.save();if(this.type!="text"){var o=A.gradient;if(o){var F;if(o.type=="linear"){var n=this.getBBox();F=u.createLinearGradient(n.x+o.vector[0]*n.width,n.y+o.vector[1]*n.height,n.x+o.vector[2]*n.width,n.y+o.vector[3]*n.height)}else{var l=A.rx||A.r,h=A.ry||A.r;F=u.createRadialGradient(A.cx-l+l*2*o.fx,A.cy-h+h*2*o.fy,0,A.cx,A.cy,mmax(l,h))}var f=(isNaN(A["fill-opacity"])?1:A["fill-opacity"])*(isNaN(A.opacity)?1:A.opacity),w=o.dots[o.dots[length]-1],J=w.color;w.color="rgba("+[J.r,J.g,J.b,f]+")";for(D=o.dots.length;D--;){w=o.dots[D];F.addColorStop(toFloat(w.offset)/100,w.color)}u.globalAlpha=1;u.fillStyle=F;u.fill()}else{if(A.fillStyle&&A.fillStyle!="none"){u.fill()}}if(A.strokeStyle&&A.strokeStyle!="none"){u.stroke()}}u.restore();u.translate(-I,-H);z.dirty=false}e.drawImage(u.canvas,0,0)},cleanAttrs:function(e,b){var f,a,g,d;for(d in b){f=b[d];switch(d){case"translate":g=(f+"").split(this.separatorRE);e.translation.x+=+g[0];e.translation.y+=+g[1];break;case"font-size":e["font-size"]=parseInt(f,10);case"font-family":case"font-weight":case"font-style":e.font=(e["font-weight"]||"")+" "+(e["font-style"]||"")+" "+(e["font-size"]?e["font-size"]+"px ":"")+(e["font-family"]||"");break;case"font":f=f.replace(this.fontSizeRE,function(i,h){e["font-size"]=h;return""});f=f.replace(this.fontWeightRE,function(h,i){e["font-weight"]=i;return""});f=f.replace(this.fontStyleRE,function(i,h){e["font-style"]=h;return""});e["font-family"]=f.replace(this.fontFamilyRE,"")||e["font-family"];case"stroke":case"strokeStyle":e.stroke=e.strokeStyle=f;break;case"fill":case"fillStyle":e.fill=e.fillStyle=f;break;case"rotate":case"rotation":this.rotate(e,f);break;case"scale":break}}},change:function(){var a=this.path;this.surface.cleanAttrs(this,this.surface.scrubAttrs(this));switch(this.type){case"circle":this.radiusX=this.radiusY=this.radius;this.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.ellipsePath(this));break;case"ellipse":this.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.ellipsePath(this));break;case"rect":this.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.rectPath(this));break;case"text":this.path=Ext.draw.Draw.path2curve(Ext.draw.Draw.rectPath(this));break}if(this.path&&this.path.length){this.realPath=Ext.draw.Draw.rotateAndTranslatePath(this)}if(a!=this.path){this.dirty=true;return true}},rotate:function(b,a){if(typeof a.x=="number"){b.rotation={degrees:a.degrees,x:a.x,y:a.y}}else{if(typeof a.degrees=="number"){var d=this.getBBox(b);b.rotation={degrees:parseFloat(a.degrees),x:d.x+d.width/2,y:d.y+d.height/2}}}b.dirty=true},getRegion:function(){return Ext.fly(this.el).getRegion()}});Ext.draw.engine.SVG=Ext.extend(Ext.draw.Surface,{engine:"SVG",trimRe:/^\s+|\s+$/g,spacesRe:/\s+/,xlink:"http://www.w3.org/1999/xlink",translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",path:"d",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{cx:0,cy:0,r:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start","font-family":null,"font-size":null,"font-weight":null,"font-style":null,fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},createSVGElement:function(e,a){var d=this.domRef.createElementNS("http://www.w3.org/2000/svg",e),b;if(a){for(b in a){d.setAttribute(b,String(a[b]))}}return d},createSprite:function(a){var b=this.createSVGElement(a.type);b.id=a.id;b.style.webkitTapHighlightColor="rgba(0,0,0,0)";a.el=Ext.get(b);this.applyZIndex(a);a.matrix=new Ext.draw.Matrix;a.bbox={plain:0,transform:0};a.fireEvent("render",a);return b},getBBox:function(a,b){var d=this["getPath"+a.type](a);if(b){a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(d);return a.bbox.plain}a.bbox.transform=a.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(d,a.matrix));return a.bbox.transform},getBBoxText:function(j){var k={},g,l,a,d,h,b;if(j&&j.el){b=j.el.dom;try{k=b.getBBox();return k}catch(f){}k={x:k.x,y:Infinity,width:0,height:0};h=b.getNumberOfChars();for(d=0;d<h;d++){g=b.getExtentOfChar(d);k.y=Math.min(g.y,k.y);l=g.y+g.height-k.y;k.height=Math.max(k.height,l);a=g.x+g.width-k.x;k.width=Math.max(k.width,a)}return k}},hide:function(){Ext.get(this.el).hide()},show:function(){Ext.get(this.el).show()},hidePrim:function(a){this.addCls(a,Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(a){this.removeCls(a,Ext.baseCSSPrefix+"hide-visibility")},getDefs:function(){return this._defs||(this._defs=this.createSVGElement("defs"))},transform:function(e){var h=this,a=new Ext.draw.Matrix,g=e.transformations,j=g.length,d=0,b,f;for(;d<j;d++){b=g[d];f=b.type;if(f=="translate"){a.translate(b.x,b.y)}else{if(f=="rotate"){a.rotate(b.degrees,b.x,b.y)}else{if(f=="scale"){a.scale(b.x,b.y,b.centerX,b.centerY)}}}}e.matrix=a;e.el.set({transform:a.toSVG()})},setSize:function(a,d){var e=this,b=e.el;a=+a||e.width;d=+d||e.height;e.width=a;e.height=d;b.setSize(a,d);b.set({width:a,height:d});Ext.draw.engine.SVG.superclass.setSize.apply(this,arguments)},getRegion:function(){var f=this.el.getXY(),d=this.bgRect.getXY(),b=Math.max,a=b(f[0],d[0]),e=b(f[1],d[1]);return{left:a,top:e,right:a+this.width,bottom:e+this.height}},onRemove:function(a){if(a.el){a.el.remove();delete a.el}Ext.draw.engine.SVG.superclass.onRemove.apply(this,arguments)},setViewBox:function(b,e,d,a){Ext.draw.engine.SVG.superclass.setViewBox.apply(this,arguments);this.el.dom.setAttribute("viewBox",[b,e,d,a].join(" "))},render:function(d){var g=this;if(!g.el){var f=g.width||10,b=g.height||10,e=g.createSVGElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:f,height:b}),a=g.getDefs(),h=g.createSVGElement("rect",{width:"100%",height:"100%",fill:"#000",stroke:"none",opacity:0});e.appendChild(a);e.appendChild(h);d.appendChild(e);g.el=Ext.get(e);g.bgRect=Ext.get(h);g.el.on({scope:g,mouseup:g.onMouseUp,mousedown:g.onMouseDown,mouseover:g.onMouseOver,mouseout:g.onMouseOut,mousemove:g.onMouseMove,mouseenter:g.onMouseEnter,mouseleave:g.onMouseLeave,click:g.onClick})}g.renderAll()},onMouseEnter:function(a){if(this.el.parent().getRegion().contains(a.getPoint())){this.fireEvent("mouseenter",a)}},onMouseLeave:function(a){if(!this.el.parent().getRegion().contains(a.getPoint())){this.fireEvent("mouseleave",a)}},processEvent:function(b,g){var f=g.getTarget(),a=this.surface,d;this.fireEvent(b,g);if(f.nodeName=="tspan"&&f.parentNode){f=f.parentNode}d=this.items.get(f.id);if(d){d.fireEvent(b,d,g)}},tuneText:function(j,k){var a=j.el.dom,h=a.getAttribute("x"),b=[],m,g,l,e,f,d;if(k.hasOwnProperty("text")){while(a.firstChild){a.removeChild(a.firstChild)}d=String(k.text).split("\n");for(e=0,f=d.length;e<f;e++){l=d[e];if(l){g=this.createSVGElement("tspan");g.appendChild(Ext.getDoc().dom.createTextNode(l));g.setAttribute("x",h);a.appendChild(g);b[e]=g}}}if(b.length){m=this.getBBoxText(j).height;for(e=0,f=b.length;e<f;e++){b[e].setAttribute("dy",e?m*1.2:m/4)}j.dirty=true}},renderAll:function(){this.items.each(this.renderItem,this)},renderItem:function(a){if(!this.el){return}if(!a.el){this.createSprite(a)}if(a.zIndexDirty){this.applyZIndex(a)}if(a.dirty){this.applyAttrs(a);this.applyTransformations(a)}},redraw:function(a){a.dirty=a.zIndexDirty=true;this.renderItem(a)},applyAttrs:function(p){var k=this,d=p.el,o=p.group,h=p.attr,f,g,j,n,e,m,b,a,l;if(o){f=[].concat(o);j=f.length;for(g=0;g<j;g++){o=f[g];k.getGroup(o).add(p)}delete p.group}n=k.scrubAttrs(p)||{};p.bbox.plain=0;p.bbox.transform=0;if(p.type=="circle"||p.type=="ellipse"){n.cx=n.cx||n.x;n.cy=n.cy||n.y}else{if(p.type=="rect"){n.rx=n.ry=n.r}else{if(p.type=="path"&&n.d){n.d=Ext.draw.Draw.pathToAbsolute(n.d)}}}p.dirtyPath=false;if(n["clip-rect"]){k.setClip(p,n);delete n["clip-rect"]}if(p.type=="text"&&n.font&&p.dirtyFont){d.set({style:"font: "+n.font});p.dirtyFont=false}if(p.type=="image"){d.dom.setAttributeNS(k.xlink,"href",n.src)}Ext.applyIf(n,k.minDefaults[p.type]);if(p.dirtyHidden){(h.hidden)?k.hidePrim(p):k.showPrim(p);p.dirtyHidden=false}for(m in n){if(n.hasOwnProperty(m)&&n[m]!=null){d.dom.setAttribute(m,String(n[m]))}}if(p.type=="text"){k.tuneText(p,n)}b=h.style;if(b){d.setStyle(b)}p.dirty=false},setClip:function(b,g){var f=this,e=g["clip-rect"],a,d;if(e){if(b.clip){b.clip.parentNode.parentNode.removeChild(b.clip.parentNode)}a=f.createSVGElement("clipPath");d=f.createSVGElement("rect");a.id=Ext.id(null,"ext-clip-");d.setAttribute("x",e.x);d.setAttribute("y",e.y);d.setAttribute("width",e.width);d.setAttribute("height",e.height);a.appendChild(d);f.getDefs().appendChild(a);b.el.dom.setAttribute("clip-path","url(#"+a.id+")");b.clip=d}},applyZIndex:function(d){var a=this.positionSpriteInList(d),e=d.el,b;if(this.el.dom.childNodes[a+2]!==e.dom){if(a>0){do{b=this.items.getAt(--a).el}while(!b&&a>0)}e.insertAfter(b||this.bgRect)}d.zIndexDirty=false},createItem:function(a){var b=new Ext.draw.Sprite(a);b.surface=this;return b},addGradient:function(h){h=Ext.draw.Draw.parseGradient(h);var f=h.stops.length,a=h.vector,b,e,g,d;if(h.type=="linear"){b=this.createSVGElement("linearGradient");b.setAttribute("x1",a[0]);b.setAttribute("y1",a[1]);b.setAttribute("x2",a[2]);b.setAttribute("y2",a[3])}else{b=this.createSVGElement("radialGradient");b.setAttribute("cx",h.centerX);b.setAttribute("cy",h.centerY);b.setAttribute("r",h.radius);if(Ext.isNumber(h.focalX)&&Ext.isNumber(h.focalY)){b.setAttribute("fx",h.focalX);b.setAttribute("fy",h.focalY)}}b.id=h.id;this.getDefs().appendChild(b);for(d=0;d<f;d++){e=h.stops[d];g=this.createSVGElement("stop");g.setAttribute("offset",e.offset+"%");g.setAttribute("stop-color",e.color);g.setAttribute("stop-opacity",e.opacity);b.appendChild(g)}},hasCls:function(a,b){return b&&(" "+(a.el.dom.getAttribute("class")||"")+" ").indexOf(" "+b+" ")!=-1},addCls:function(f,h){var g=f.el,e,a,d,b=[],j=g.getAttribute("class")||"";if(!Ext.isArray(h)){if(typeof h=="string"&&!this.hasCls(f,h)){g.set({"class":j+" "+h})}}else{for(e=0,a=h.length;e<a;e++){d=h[e];if(typeof d=="string"&&(" "+j+" ").indexOf(" "+d+" ")==-1){b.push(d)}}if(b.length){g.set({"class":" "+b.join(" ")})}}},removeCls:function(k,g){var h=this,b=k.el,e=b.getAttribute("class")||"",d,j,f,l,a;if(!Ext.isArray(g)){g=[g]}if(e){a=e.replace(h.trimRe," ").split(h.spacesRe);for(d=0,f=g.length;d<f;d++){l=g[d];if(typeof l=="string"){l=l.replace(h.trimRe,"");j=Ext.Array.indexOf(a,l);if(j!=-1){a.splice(j,1)}}}b.set({"class":a.join(" ")})}},destroy:function(){var a=this;Ext.draw.engine.SVG.superclass.destroy.call(this);if(a.el){a.el.remove()}delete a.el}});Ext.draw.engine.VML=Ext.extend(Ext.draw.Surface,{engine:"VML",map:{M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bitesRe:/([clmz]),?([^clmz]*)/gi,valRe:/-?[^,\s-]+/g,fillUrlRe:/^url\(\s*['"]?([^\)]+?)['"]?\s*\)$/i,pathlike:/^(path|rect)$/,NonVMLPathRe:/[ahqstv]/ig,partialPathRe:/[clmz]/g,fontFamilyRe:/^['"]+|['"]+$/g,baseVMLCls:Ext.baseCSSPrefix+"vml-base",vmlGroupCls:Ext.baseCSSPrefix+"vml-group",spriteCls:Ext.baseCSSPrefix+"vml-sprite",measureSpanCls:Ext.baseCSSPrefix+"vml-measure-span",zoom:21600,coordsize:1000,coordorigin:"0 0",path2vml:function(t){var n=this,u=n.NonVMLPathRe,b=n.map,f=n.valRe,s=n.zoom,e=n.bitesRe,g=Ext.Function.bind(Ext.draw.Draw.pathToAbsolute,Ext.draw.Draw),m,o,d,a,k,q,h,l;if(String(t).match(u)){g=Ext.Function.bind(Ext.draw.Draw.path2curve,Ext.draw.Draw)}else{if(!String(t).match(n.partialPathRe)){m=String(t).replace(e,function(r,w,j){var v=[],i=w.toLowerCase()=="m",p=b[w];j.replace(f,function(x){if(i&&v[length]==2){p+=v+b[w=="m"?"l":"L"];v=[]}v.push(Math.round(x*s))});return p+v});return m}}o=g(t);m=[];for(k=0,q=o.length;k<q;k++){d=o[k];a=o[k][0].toLowerCase();if(a=="z"){a="x"}for(h=1,l=d.length;h<l;h++){a+=Math.round(d[h]*n.zoom)+(h!=l-1?",":"")}m.push(a)}return m.join(" ")},translateAttrs:{radius:"r",radiusX:"rx",radiusY:"ry",lineWidth:"stroke-width",fillOpacity:"fill-opacity",strokeOpacity:"stroke-opacity",strokeLinejoin:"stroke-linejoin"},minDefaults:{circle:{fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},ellipse:{cx:0,cy:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},rect:{x:0,y:0,width:0,height:0,rx:0,ry:0,fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},text:{x:0,y:0,"text-anchor":"start",font:'10px "Arial"',fill:"#000",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},path:{d:"M0,0",fill:"none",stroke:null,"stroke-width":null,opacity:null,"fill-opacity":null,"stroke-opacity":null},image:{x:0,y:0,width:0,height:0,preserveAspectRatio:"none",opacity:null}},onMouseEnter:function(a){this.fireEvent("mouseenter",a)},onMouseLeave:function(a){this.fireEvent("mouseleave",a)},processEvent:function(b,g){var f=g.getTarget(),a=this.surface,d;this.fireEvent(b,g);d=this.items.get(f.id);if(d){d.fireEvent(b,d,g)}},createElement:function(h){var f=this,e=h.attr,g=h.type,j=f.zoom,b=h.vml||(h.vml={}),k=Math.round,d=f.createNode("shape"),i=f.createNode("skew"),l,a;d.coordsize=j+" "+j;d.coordorigin=e.coordorigin||"0 0";Ext.get(d).addCls(f.spriteCls);if(g=="text"){b.path=l=f.createNode("path");l.textpathok=true;b.textpath=a=f.createNode("textpath");a.on=true;d.appendChild(a);d.appendChild(l)}d.id=h.id;h.el=Ext.get(d);f.el.appendChild(d);i.on=true;d.appendChild(i);h.skew=i;h.matrix=new Ext.draw.Matrix;h.bbox={plain:null,transform:null};h.fireEvent("render",h);return h.el},getBBox:function(a,b){var d=this["getPath"+a.type](a);if(b){a.bbox.plain=a.bbox.plain||Ext.draw.Draw.pathDimensions(d);return a.bbox.plain}a.bbox.transform=a.bbox.transform||Ext.draw.Draw.pathDimensions(Ext.draw.Draw.mapPath(d,a.matrix));return a.bbox.transform},getBBoxText:function(b){var a=b.vml;return{x:a.X+(a.bbx||0)-a.W/2,y:a.Y-a.H/2,width:a.W,height:a.H}},applyAttrs:function(m){var s=this,d=m.vml,j=m.group,a=m.attr,b=m.el,o=b.dom,p,u,r,n,k,q,l,t;if(j){r=[].concat(j);k=r.length;for(n=0;n<k;n++){j=r[n];s.getGroup(j).add(m)}delete m.group}q=s.scrubAttrs(m)||{};if(m.zIndexDirty){s.setZIndex(m)}if(m.type=="image"){o.src=q.src}Ext.applyIf(q,s.minDefaults[m.type]);if(o.href){o.href=q.href}if(o.title){o.title=q.title}if(o.target){o.target=q.target}if(o.cursor){o.cursor=q.cursor}if(m.dirtyHidden){(q.hidden)?s.hidePrim(m):s.showPrim(m);m.dirtyHidden=false}if(m.dirtyPath){if(m.type=="circle"||m.type=="ellipse"){var f=q.x,e=q.y,h=q.rx||q.r||0,g=q.ry||q.r||0;o.path=Ext.String.format("ar{0},{1},{2},{3},{4},{1},{4},{1}",Math.round((f-h)*s.zoom),Math.round((e-g)*s.zoom),Math.round((f+h)*s.zoom),Math.round((e+g)*s.zoom),Math.round(f*s.zoom));m.dirtyPath=false}else{if(m.type!="text"){m.attr.path=q.path=s.setPaths(m,q)||q.path;o.path=s.path2vml(q.path);m.dirtyPath=false}}}if("clip-rect" in q){s.setClip(m,q)}if(m.type=="text"){s.setText(m,q)}if(q.opacity||q.fill){s.setFill(m,q)}if(q.stroke||q.fill){s.setStroke(m,q)}p=a.style;if(p){b.setStyle(p)}m.dirty=false},setZIndex:function(a){if(a.el){if(a.attr.zIndex!=undefined){a.el.setStyle("zIndex",a.attr.zIndex)}a.zIndexDirty=false}},setPaths:function(b,d){var a=b.attr;b.bbox.plain=null;b.bbox.transform=null;if(b.type=="circle"){a.rx=a.ry=d.r;return Ext.draw.Draw.ellipsePath(b)}else{if(b.type=="ellipse"){a.rx=d.rx;a.ry=d.ry;return Ext.draw.Draw.ellipsePath(b)}else{if(b.type=="rect"){a.rx=a.ry=d.r;return Ext.draw.Draw.rectPath(b)}else{if(b.type=="path"&&a.path){return Ext.draw.Draw.pathToAbsolute(a.path)}else{if(b.type=="image"){return Ext.draw.Draw.rectPath(b)}}}}}return false},setFill:function(j,e){var g=this,d=j.el.dom,i=d.fill,b=false,f,h,a,k;if(!i){i=d.fill=g.createNode("fill");b=true}if(Ext.isArray(e.fill)){e.fill=e.fill[0]}if(e.fill=="none"){i.on=false}else{if(typeof e.opacity=="number"){i.opacity=e.opacity}if(typeof e["fill-opacity"]=="number"){i.opacity=e["fill-opacity"]}i.on=true;if(typeof e.fill=="string"){a=e.fill.match(g.fillUrlRe);if(a){a=a[1];if(a.charAt(0)=="#"){h=g.gradientsColl.getByKey(a.substring(1))}if(h){k=e.rotation;i.angle=-(h.angle+270+(k?k.degrees:0))%360;i.type="gradient";i.method="sigma";i.colors.value=h.colors}else{i.src=a;i.type="tile"}}else{i.color=Ext.draw.Color.toHex(e.fill);i.src="";i.type="solid"}}}if(b){d.appendChild(i)}},setStroke:function(b,h){var f=this,e=b.el.dom,i=b.strokeEl,g=false,d,a;if(!i){i=b.strokeEl=f.createNode("stroke");g=true}if(Ext.isArray(h.stroke)){h.stroke=h.stroke[0]}if(!h.stroke||h.stroke=="none"||h.stroke==0||h["stroke-width"]==0){i.on=false}else{i.on=true;if(h.stroke&&!h.stroke.match(f.fillUrlRe)){i.color=Ext.draw.Color.toHex(h.stroke)}i.joinstyle=h["stroke-linejoin"];i.endcap=h["stroke-linecap"]||"round";i.miterlimit=h["stroke-miterlimit"]||8;d=parseFloat(h["stroke-width"]||1)*0.75;a=h["stroke-opacity"]||1;if(Ext.isNumber(d)&&d<1){i.weight=1;i.opacity=a*d}else{i.weight=d;i.opacity=a}}if(g){e.appendChild(i)}},setClip:function(b,g){var f=this,d=b.el,a=b.clipEl,e=String(g["clip-rect"]).split(f.separatorRe);if(!a){a=b.clipEl=f.el.insertFirst(Ext.getDoc().dom.createElement("div"));a.addCls(Ext.baseCSSPrefix+"vml-sprite")}if(e.length==4){e[2]=+e[2]+(+e[0]);e[3]=+e[3]+(+e[1]);a.setStyle("clip",Ext.String.format("rect({1}px {2}px {3}px {0}px)",e[0],e[1],e[2],e[3]));a.setSize(f.el.width,f.el.height)}else{a.setStyle("clip","")}},setText:function(i,d){var h=this,a=i.vml,f=a.textpath.style,g=h.span.style,j=h.zoom,k=Math.round,l={fontSize:"font-size",fontWeight:"font-weight",fontStyle:"font-style"},b,e;if(i.dirtyFont){if(d.font){f.font=g.font=d.font}if(d["font-family"]){f.fontFamily='"'+d["font-family"].split(",")[0].replace(h.fontFamilyRe,"")+'"';g.fontFamily=d["font-family"]}for(b in l){e=d[l[b]];if(e){f[b]=g[b]=e}}a.textpath.string=d.text;if(a.textpath.string){h.span.innerHTML=String(a.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>")}a.W=h.span.offsetWidth;a.H=h.span.offsetHeight+2;if(d["text-anchor"]=="middle"){f["v-text-align"]="center"}else{if(d["text-anchor"]=="end"){f["v-text-align"]="right";a.bbx=-Math.round(a.W/2)}else{f["v-text-align"]="left";a.bbx=Math.round(a.W/2)}}}a.X=d.x;a.Y=d.y;a.path.v=Ext.String.format("m{0},{1}l{2},{1}",Math.round(a.X*j),Math.round(a.Y*j),Math.round(a.X*j)+1);i.bbox.plain=null;i.bbox.transform=null;i.dirtyFont=false},hide:function(){this.el.hide()},show:function(){this.el.show()},hidePrim:function(a){a.el.addCls(Ext.baseCSSPrefix+"hide-visibility")},showPrim:function(a){a.el.removeCls(Ext.baseCSSPrefix+"hide-visibility")},setSize:function(a,n){var j=this,r=j.viewBox,m,l,g,d,f;a=a||j.width;n=n||j.height;j.width=a;j.height=n;if(!j.el){return}if(a!=undefined){j.el.setWidth(a)}if(n!=undefined){j.el.setHeight(n)}if(r&&(a||n)){var k=r.x,h=r.y,p=r.width,b=r.height,o=n/b,e=a/p,q;if(p*o<a){k-=(a-p*o)/2/o}if(b*e<n){h-=(n-b*e)/2/e}q=1/Math.max(p/a,b/n);j.viewBoxShift={dx:-k,dy:-h,scale:q};g=j.items.items;for(d=0,f=g.length;d<f;d++){j.transform(g[d])}}Ext.draw.engine.VML.superclass.setSize.apply(this,arguments)},setViewBox:function(b,e,d,a){Ext.draw.engine.VML.superclass.setViewBox.apply(this,arguments);this.viewBox={x:b,y:e,width:d,height:a}},onAdd:function(a){Ext.draw.engine.VML.superclass.onAdd.apply(this,arguments);if(this.el){this.renderItem(a)}},onRemove:function(a){if(a.el){a.el.remove();delete a.el}Ext.draw.engine.VML.superclass.onRemove.apply(this,arguments)},render:function(a){var d=this,g=Ext.getDoc().dom;if(!d.createNode){try{if(!g.namespaces.rvml){g.namespaces.add("rvml","urn:schemas-microsoft-com:vml")}d.createNode=function(e){return g.createElement("<rvml:"+e+' class="rvml">')}}catch(f){d.createNode=function(e){return g.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}}if(!d.el){var b=g.createElement("div");d.el=Ext.get(b);d.el.addCls(d.baseVMLCls);d.span=g.createElement("span");Ext.get(d.span).addCls(d.measureSpanCls);b.appendChild(d.span);d.el.setSize(d.width||10,d.height||10);a.appendChild(b);d.el.on({scope:d,mouseup:d.onMouseUp,mousedown:d.onMouseDown,mouseover:d.onMouseOver,mouseout:d.onMouseOut,mousemove:d.onMouseMove,mouseenter:d.onMouseEnter,mouseleave:d.onMouseLeave,click:d.onClick})}d.renderAll()},renderAll:function(){this.items.each(this.renderItem,this)},redraw:function(a){a.dirty=true;this.renderItem(a)},renderItem:function(a){if(!this.el){return}if(!a.el){this.createElement(a)}if(a.dirty){this.applyAttrs(a);if(a.dirtyTransform){this.applyTransformations(a)}}},rotationCompensation:function(e,d,a){var b=new Ext.draw.Matrix;b.rotate(-e,0.5,0.5);return{x:b.x(d,a),y:b.y(d,a)}},transform:function(t){var C=this,w=new Ext.draw.Matrix,m=t.transformations,r=m.length,x=0,k=0,d=1,b=1,j="",f=t.el,z=f.dom,u=z.style,a=C.zoom,g=t.skew,B,A,o,h,n,l,v,s,q,p,e;for(;x<r;x++){o=m[x];h=o.type;if(h=="translate"){w.translate(o.x,o.y)}else{if(h=="rotate"){w.rotate(o.degrees,o.x,o.y);k+=o.degrees}else{if(h=="scale"){w.scale(o.x,o.y,o.centerX,o.centerY);d*=o.x;b*=o.y}}}}if(C.viewBoxShift){w.scale(C.viewBoxShift.scale,C.viewBoxShift.scale,0,0);w.add(1,0,0,1,C.viewBoxShift.dx,C.viewBoxShift.dy)}t.matrix=w;if(C.type!="image"&&g){g.matrix=w.toString();g.offset=w.offset()}else{B=w.m[0][2];A=w.m[1][2];q=a/d;p=a/b;z.coordsize=Math.abs(q)+" "+Math.abs(p);s=k*(d*((b<0)?-1:1));if(s!=u.rotation&&!(s===0&&!u.rotation)){u.rotation=s}if(k){n=C.rotationCompensation(k,B,A);B=n.x;A=n.y}if(d<0){j+="x"}if(b<0){j+=" y";l=-1}if(j!=""&&!z.style.flip){u.flip=j}e=(B*-q)+" "+(A*-p);if(e!=z.coordorigin){z.coordorigin=(B*-q)+" "+(A*-p)}}},createItem:function(a){return new Ext.draw.Sprite(a)},getRegion:function(){return this.el.getRegion()},addCls:function(a,b){if(a&&a.el){a.el.addCls(b)}},removeCls:function(a,b){if(a&&a.el){a.el.removeCls(b)}},addGradient:function(e){var a=this.gradientsColl||(this.gradientsColl=new Ext.util.MixedCollection()),b=[],d=new Ext.util.MixedCollection();d.addAll(e.stops);d.sortByKey("ASC",function(g,f){g=parseInt(g,10);f=parseInt(f,10);return g>f?1:(g<f?-1:0)});d.eachKey(function(g,f){b.push(g+"% "+f.color)});a.add(e.id,{colors:b.join(","),angle:e.angle})},destroy:function(){var a=this;Ext.draw.engine.VML.superclass.destroy.call(this);if(a.el){a.el.remove()}delete a.el}});Ext.chart.Highlights=Ext.extend(Object,{highlight:false,highlightCfg:null,constructor:function(a){if(a.highlight){if(a.highlight!==true){this.highlightCfg=Ext.apply({},a.highlight)}else{this.highlightCfg={fill:"#fdd",radius:20,lineWidth:5,stroke:"#f55"}}}},highlightItem:function(k){if(!k){return}var g=this,j=k.sprite,a=g.highlightCfg,e=g.chart.surface,d=g.chart.animate,b,i,h,f;if(!g.highlight||!j||j._highlighted){return}if(j._anim){j._anim.paused=true}j._highlighted=true;if(!j._defaults){j._defaults=Ext.apply(j._defaults||{},j.attr);i={};h={};for(b in a){if(!(b in j._defaults)){j._defaults[b]=e.availableAttrs[b]}i[b]=j._defaults[b];h[b]=a[b];if(Ext.isObject(a[b])){i[b]={};h[b]={};Ext.apply(j._defaults[b],j.attr[b]);Ext.apply(i[b],j._defaults[b]);for(f in j._defaults[b]){if(!(f in a[b])){h[b][f]=i[b][f]}else{h[b][f]=a[b][f]}}for(f in a[b]){if(!(f in h[b])){h[b][f]=a[b][f]}}}}j._from=i;j._to=h}if(d){j._anim=new Ext.fx.Anim({target:j,from:j._from,to:j._to,duration:150})}else{j.setAttributes(j._to,true)}},unHighlightItem:function(){if(!this.highlight||!this.items){return}var j=this,h=j.items,g=h.length,a=j.highlightCfg,d=j.chart.animate,f=0,e,b,k;for(;f<g;f++){if(!h[f]){continue}k=h[f].sprite;if(k&&k._highlighted){if(k._anim){k._anim.paused=true}e={};for(b in a){if(Ext.isObject(k._defaults[b])){e[b]={};Ext.apply(e[b],k._defaults[b])}else{e[b]=k._defaults[b]}}if(d){k._anim=new Ext.fx.Anim({target:k,to:e,duration:150})}else{k.setAttributes(e,true)}delete k._highlighted}}},cleanHighlights:function(){if(!this.highlight){return}var e=this.group,d=this.markerGroup,b=0,a;for(a=e.getCount();b<a;b++){delete e.getAt(b)._defaults}if(d){for(a=d.getCount();b<a;b++){delete d.getAt(b)._defaults}}}});Ext.chart.MaskLayer=Ext.extend(Ext.Component,{constructor:function(a){a=Ext.apply(a||{},{style:"position:absolute;background-color:#888;cursor:move;opacity:0.6;border:1px solid #222;"});Ext.chart.MaskLayer.superclass.constructor.apply(this,[a])},initComponent:function(){var a=this;Ext.chart.MaskLayer.superclass.initComponent.call(this);a.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave")},initDraggable:function(){Ext.chart.MaskLayer.superclass.initDraggable.apply(this,arguments);this.dd.onStart=function(d){var b=this,a=b.comp;this.startPosition=a.getPosition(true);if(a.ghost&&!a.liveDrag){b.proxy=a.ghost();b.dragTarget=b.proxy.header.el}if(b.constrain||b.constrainDelegate){b.constrainTo=b.calculateConstrainRegion()}}}});Ext.draw.Component=Ext.extend(Ext.Component,{implOrder:["SVG","Canvas","VML"],baseCls:"x-surface",componentLayout:"draw",viewBox:true,autoSize:false,initComponent:function(){Ext.draw.Component.superclass.initComponent.call(this);this.addEvents("mousedown","mouseup","mousemove","mouseenter","mouseleave","click")},onRender:function(a,e){var g=this,l=g.viewBox,d=g.autoSize,k,f,b,j,i,h;Ext.draw.Component.superclass.onRender.apply(this,arguments);g.createSurface();f=g.surface.items;if(l||d){k=f.getBBox();b=k.width;j=k.height;i=k.x;h=k.y;if(g.viewBox){g.surface.setViewBox(i,h,b,j)}else{g.autoSizeSurface()}}},autoSizeSurface:function(){var e=this,b=e.surface.items,f=b.getBBox(),d=f.width,a=f.height;b.setAttributes({translate:{x:-f.x,y:-f.y}},true);if(e.rendered){e.setSize(d,a)}else{e.surface.setSize(d,a)}e.el.setSize(d,a)},createSurface:function(){var a=Ext.draw.Surface.newInstance(Ext.apply({},{width:this.width,height:this.height,renderTo:this.el},this.initialConfig));this.surface=a;function b(d){return function(f){this.fireEvent(d,f)}}a.on({scope:this,mouseup:b("mouseup"),mousedown:b("mousedown"),mousemove:b("mousemove"),mouseenter:b("mouseenter"),mouseleave:b("mouseleave"),click:b("click")})},onDestroy:function(){var a=this.surface;if(a){a.destroy()}Ext.draw.Component.superclass.onDestroy.call(this)}});Ext.chart.Chart=Ext.extend(Ext.draw.Component,{viewBox:false,animate:false,legend:false,insetPadding:10,implOrder:["SVG","VML","Canvas"],background:false,constructor:function(b){var d=this,a;d.initTheme(b.theme||d.theme);if(d.gradients){Ext.apply(b,{gradients:d.gradients})}if(d.background){Ext.apply(b,{background:d.background})}if(b.animate){a={easing:"ease",duration:500};if(Ext.isObject(b.animate)){b.animate=Ext.applyIf(b.animate,a)}else{b.animate=a}}Ext.chart.Chart.superclass.constructor.apply(this,arguments)},initComponent:function(){var b=this,d,a;Ext.chart.Chart.superclass.initComponent.call(this);b.addEvents("itemmousedown","itemmouseup","itemmouseover","itemmouseout","itemclick","itemdoubleclick","itemdragstart","itemdrag","itemdragend","beforerefresh","refresh");Ext.applyIf(b,{zoom:{width:1,height:1,x:0,y:0}});b.maxGutter=[0,0];b.store=Ext.StoreMgr.lookup(b.store);d=b.axes;b.axes=new Ext.util.MixedCollection(false,function(e){return e.position});if(d){b.axes.addAll(d)}a=b.series;b.series=new Ext.util.MixedCollection(false,function(e){return e.seriesId||(e.seriesId=Ext.id(null,"ext-chart-series-"))});if(a){b.series.addAll(a)}if(b.legend!==false){b.legend=new Ext.chart.Legend(Ext.applyIf({chart:b},b.legend))}b.on({mousemove:b.onMouseMove,mouseleave:b.onMouseLeave,mousedown:b.onMouseDown,mouseup:b.onMouseUp,scope:b})},doComponentLayout:function(b,a){var d=this;if(Ext.isNumber(b)&&Ext.isNumber(a)){d.curWidth=b;d.curHeight=a;d.redraw(true)}Ext.chart.Chart.superclass.doComponentLayout.apply(d,arguments)},redraw:function(a){var e=this,d=e.chartBBox={x:0,y:0,height:e.curHeight,width:e.curWidth},b=e.legend;e.surface.setSize(d.width,d.height);e.series.each(e.initializeSeries,e);e.axes.each(e.initializeAxis,e);if(b!==false){b.create()}e.alignAxes();if(e.legend!==false){b.updatePosition()}e.getMaxGutter();e.resizing=!!a;e.axes.each(e.drawAxis,e);e.series.each(e.drawCharts,e);e.resizing=false},afterRender:function(){var b,a=this;Ext.chart.Chart.superclass.afterRender.call(a);if(a.categoryNames){a.setCategoryNames(a.categoryNames)}if(a.tipRenderer){b=a.getFunctionRef(a.tipRenderer);a.setTipRenderer(b.fn,b.scope)}a.bindStore(a.store,true);a.refresh()},getEventXY:function(f){var d=this,b=this.surface.getRegion(),h=f.getXY(),a=h[0]-b.left,g=h[1]-b.top;return[a,g]},onClick:function(f){var d=this,a=d.getEventXY(f),b;d.series.each(function(e){if(Ext.draw.Draw.withinBox(a[0],a[1],e.bbox)){if(e.getItemForPoint){b=e.getItemForPoint(a[0],a[1]);if(b){d.fireEvent("itemclick",b)}}}},d)},onMouseDown:function(f){var d=this,a=d.getEventXY(f),b;if(d.mask){d.mixins.mask.onMouseDown.call(d,f)}d.series.each(function(e){if(Ext.draw.Draw.withinBox(a[0],a[1],e.bbox)){if(e.getItemForPoint){b=e.getItemForPoint(a[0],a[1]);if(b){d.fireEvent("itemmousedown",b)}}}},d)},onMouseUp:function(f){var d=this,a=d.getEventXY(f),b;if(d.mask){d.mixins.mask.onMouseUp.call(d,f)}d.series.each(function(e){if(Ext.draw.Draw.withinBox(a[0],a[1],e.bbox)){if(e.getItemForPoint){b=e.getItemForPoint(a[0],a[1]);if(b){d.fireEvent("itemmouseup",b)}}}},d)},onMouseMove:function(i){var h=this,a=h.getEventXY(i),g,f,d,b;if(h.mask){h.mixins.mask.onMouseMove.call(h,i)}h.series.each(function(e){if(Ext.draw.Draw.withinBox(a[0],a[1],e.bbox)){if(e.getItemForPoint){g=e.getItemForPoint(a[0],a[1]);f=e._lastItemForPoint;d=e._lastStoreItem;b=e._lastStoreField;if(g!==f||g&&(g.storeItem!=d||g.storeField!=b)){if(f){h.fireEvent("itemmouseout",f);delete e._lastItemForPoint;delete e._lastStoreField;delete e._lastStoreItem}if(g){h.fireEvent("itemmouseover",g);e._lastItemForPoint=g;e._lastStoreItem=g.storeItem;e._lastStoreField=g.storeField}}}}},h)},onMouseLeave:function(b){var a=this;if(a.mask){a.mixins.mask.onMouseLeave.call(a,b)}a.series.each(function(d){delete d._lastItemForPoint})},delayRefresh:function(){var a=this;if(!a.refreshTask){a.refreshTask=new Ext.util.DelayedTask(a.refresh,a)}a.refreshTask.delay(a.refreshBuffer)},refresh:function(){var a=this;if(a.rendered&&a.curWidth!=undefined&&a.curHeight!=undefined){if(a.fireEvent("beforerefresh",a)!==false){a.redraw();a.fireEvent("refresh",a)}}},bindStore:function(a,b){var d=this;if(!b&&d.store){if(a!==d.store&&d.store.autoDestroy){d.store.destroy()}else{d.store.un("datachanged",d.refresh,d);d.store.un("add",d.delayRefresh,d);d.store.un("remove",d.delayRefresh,d);d.store.un("update",d.delayRefresh,d);d.store.un("clear",d.refresh,d)}}if(a){a=Ext.StoreMgr.lookup(a);a.on({scope:d,datachanged:d.refresh,add:d.delayRefresh,remove:d.delayRefresh,update:d.delayRefresh,clear:d.refresh})}d.store=a;if(a&&!b){d.refresh()}},initializeAxis:function(axis){var me=this,chartBBox=me.chartBBox,w=chartBBox.width,h=chartBBox.height,x=chartBBox.x,y=chartBBox.y,themeAttrs=me.themeAttrs,config={chart:me};if(themeAttrs){config.axisStyle=Ext.apply({},themeAttrs.axis);config.axisLabelLeftStyle=Ext.apply({},themeAttrs.axisLabelLeft);config.axisLabelRightStyle=Ext.apply({},themeAttrs.axisLabelRight);config.axisLabelTopStyle=Ext.apply({},themeAttrs.axisLabelTop);config.axisLabelBottomStyle=Ext.apply({},themeAttrs.axisLabelBottom);config.axisTitleLeftStyle=Ext.apply({},themeAttrs.axisTitleLeft);config.axisTitleRightStyle=Ext.apply({},themeAttrs.axisTitleRight);config.axisTitleTopStyle=Ext.apply({},themeAttrs.axisTitleTop);config.axisTitleBottomStyle=Ext.apply({},themeAttrs.axisTitleBottom)}switch(axis.position){case"top":Ext.apply(config,{length:w,width:h,x:x,y:y});break;case"bottom":Ext.apply(config,{length:w,width:h,x:x,y:h});break;case"left":Ext.apply(config,{length:h,width:w,x:x,y:h});break;case"right":Ext.apply(config,{length:h,width:w,x:w,y:h});break}if(!axis.chart){Ext.apply(config,axis);var claz="Ext.chart.axis."+axis.type;var obj=eval("new "+claz+"(config)");axis=me.axes.replace(obj)}else{Ext.apply(axis,config)}axis.drawAxis(true)},alignAxes:function(){var g=this,h=g.axes,f=g.legend,b=["top","right","bottom","left"],e,d=g.insetPadding,a={top:d,right:d,bottom:d,left:d};function i(k){var j=h.findIndex("position",k);return(j<0)?null:h.getAt(j)}Ext.each(b,function(k){var m=(k==="left"||k==="right"),j=i(k),l;if(f!==false){if(f.position===k){l=f.getBBox();a[k]+=(m?l.width:l.height)+a[k]}}if(j&&j.bbox){l=j.bbox;a[k]+=(m?l.width:l.height)}});e={x:a.left,y:a.top,width:g.curWidth-a.left-a.right,height:g.curHeight-a.top-a.bottom};g.chartBBox=e;h.each(function(j){var l=j.position,k=(l==="left"||l==="right");j.x=(l==="right"?e.x+e.width:e.x);j.y=(l==="top"?e.y:e.y+e.height);j.width=(k?e.width:e.height);j.length=(k?e.height:e.width)})},initializeSeries:function(series,idx){var me=this,themeAttrs=me.themeAttrs,seriesObj,markerObj,seriesThemes,st,markerThemes,colorArrayStyle=[],i=0,l,config={chart:me,seriesId:series.seriesId};if(themeAttrs){seriesThemes=themeAttrs.seriesThemes;markerThemes=themeAttrs.markerThemes;seriesObj=Ext.apply({},themeAttrs.series);markerObj=Ext.apply({},themeAttrs.marker);config.seriesStyle=Ext.apply(seriesObj,seriesThemes[idx%seriesThemes.length]);config.seriesLabelStyle=Ext.apply({},themeAttrs.seriesLabel);config.markerStyle=Ext.apply(markerObj,markerThemes[idx%markerThemes.length]);if(themeAttrs.colors){config.colorArrayStyle=themeAttrs.colors}else{colorArrayStyle=[];for(l=seriesThemes.length;i<l;i++){st=seriesThemes[i];if(st.fill||st.stroke){colorArrayStyle.push(st.fill||st.stroke)}}if(colorArrayStyle.length){config.colorArrayStyle=colorArrayStyle}}config.seriesIdx=idx}if(!series.chart){Ext.applyIf(config,series);var cla="Ext.chart.series."+Ext.capitalize(series.type);var classObj=eval("new "+cla+"(config)");series=me.series.replace(classObj)}else{Ext.apply(series,config)}if(series.initialize){series.initialize()}},getMaxGutter:function(){var b=this,a=[0,0];b.series.each(function(d){var e=d.getGutters&&d.getGutters()||[0,0];a[0]=Math.max(a[0],e[0]);a[1]=Math.max(a[1],e[1])});b.maxGutter=a},drawAxis:function(a){a.drawAxis()},drawCharts:function(a){a.drawSeries()},destroy:function(){this.surface.destroy();this.bindStore(null);Ext.chart.Chart.superclass.destroy.call(this)},setSize:function(b,a){var d=this;d.curWidth=b;d.curHeight=a;Ext.chart.Chart.superclass.setSize.apply(d,arguments)}});Ext.reg("chart",Ext.chart.Chart);Ext.mixin(Ext.chart.Chart,"themeMgr",Ext.chart.theme.Theme);Ext.mixin(Ext.chart.Chart,"mask",Ext.chart.Mask);Ext.chart.TipSurface=Ext.extend(Ext.draw.Component,{spriteArray:false,renderFirst:true,constructor:function(a){Ext.chart.TipSurface.superclass.constructor.apply(this,arguments);if(a.sprites){this.spriteArray=[].concat(a.sprites);delete a.sprites}},onRender:function(){var d=this,b=0,a=0,e,f;Ext.chart.TipSurface.superclass.onRender.apply(d,arguments);f=d.spriteArray;if(d.renderFirst&&f){d.renderFirst=false;for(a=f.length;b<a;b++){e=d.surface.add(f[b]);e.setAttributes({hidden:false},true)}}}});Ext.chart.axis.Abstract=Ext.extend(Ext.util.Observable,{constructor:function(a){a=a||{};var b=this,d=a.position||"left";d=d.charAt(0).toUpperCase()+d.substring(1);a.label=Ext.apply(a["axisLabel"+d+"Style"]||{},a.label||{});a.axisTitleStyle=Ext.apply(a["axisTitle"+d+"Style"]||{},a.labelTitle||{});Ext.apply(b,a);b.fields=[].concat(b.fields);Ext.chart.axis.Abstract.superclass.constructor.call(b);b.labels=[];b.getId();b.labelGroup=b.chart.surface.getGroup(b.axisId+"-labels")},alignment:null,grid:false,steps:10,x:0,y:0,minValue:0,maxValue:0,getId:function(){return this.axisId||(this.axisId=Ext.id(null,"ext-axis-"))},drawAxis:Ext.emptyFn,addDisplayAndLabels:Ext.emptyFn});Ext.chart.axis.Axis=Ext.extend(Ext.chart.axis.Abstract,{dashSize:3,position:"bottom",skipFirst:false,length:0,width:0,applyData:Ext.emptyFn,calcEnds:function(){var t=this,b=Math,v=b.max,s=b.min,d=t.chart.store,f=t.chart.series.items,h=t.fields,e=h.length,m=isNaN(t.minimum)?Infinity:t.minimum,q=isNaN(t.maximum)?-Infinity:t.maximum,k=t.prevMin,o=t.prevMax,g=false,u=0,a=[],r,n,j,p;for(r=0,n=f.length;!g&&r<n;r++){g=g||f[r].stacked;a=f[r].__excludes||a}d.each(function(i){if(g){if(!isFinite(m)){m=0}for(j=0,r=0;r<e;r++){if(a[r]){continue}j+=i.get(h[r])}q=v(q,j);m=s(m,j)}else{for(r=0;r<e;r++){if(a[r]){continue}j=i.get(h[r]);q=v(q,j);m=s(m,j)}}});if(!isFinite(q)){q=t.prevMax||0}if(!isFinite(m)){m=t.prevMin||0}if(m!=q){q=(q>>0)+1}p=Ext.draw.Draw.snapEnds(m,q,t.steps);if(!isNaN(t.maximum)){p.to=v(p.to,t.maximum)}if(!isNaN(t.minimum)){p.from=s(p.from,t.minimum)}if(t.adjustMaximumByMajorUnit){p.to+=p.step}if(t.adjustMinimumByMajorUnit){p.from-=p.step}t.prevMin=m;t.prevMax=q;return p},drawAxis:function(p){var v=this,i=v.x,h=v.y,t=v.chart.maxGutter[0],s=v.chart.maxGutter[1],f=v.dashSize,b=v.length,w=v.position,g=[],j=false,d=v.applyData(),e=d.step,q=d.steps,o=d.from,a=d.to,r,n,m,l,k,u;if(v.hidden||isNaN(e)||(o==a)){return}v.from=d.from;v.to=d.to;if(w=="left"||w=="right"){n=Math.floor(i)+0.5;l=["M",n,h,"l",0,-b];r=b-(s*2)}else{m=Math.floor(h)+0.5;l=["M",i,m,"l",b,0];r=b-(t*2)}u=r/(q||1);if(v.type=="Numeric"){j=true;v.labels=[d.from]}if(w=="right"||w=="left"){m=h-s;n=i-((w=="left")*f*2);while(m>=h-s-r){l=l.concat(["M",n,Math.floor(m)+0.5,"l",f*2+1,0]);g.push([Math.floor(i),Math.floor(m)]);m-=u;if(j){v.labels.push(v.labels[v.labels.length-1]+e)}if(u===0){break}}if(Math.round(m+u-(h-s-r))){l=l.concat(["M",n,Math.floor(h-b+s)+0.5,"l",f*2+1,0]);g.push([Math.floor(i),Math.floor(m)]);if(j){v.labels.push(v.labels[v.labels.length-1]+e)}}}else{n=i+t;m=h-(!!(w=="top")*f*2);while(n<=i+t+r){l=l.concat(["M",Math.floor(n)+0.5,m,"l",0,f*2+1]);g.push([Math.floor(n),Math.floor(h)]);n+=u;if(j){v.labels.push(v.labels[v.labels.length-1]+e)}if(u===0){break}}if(Math.round(n-u-(i+t+r))){l=l.concat(["M",Math.floor(i+b-t)+0.5,m,"l",0,f*2+1]);g.push([Math.floor(n),Math.floor(h)]);if(j){v.labels.push(v.labels[v.labels.length-1]+e)}}}if(!v.axis){v.axis=v.chart.surface.add(Ext.apply({type:"path",path:l},v.axisStyle))}v.axis.setAttributes({path:l},true);v.inflections=g;if(!p&&v.grid){v.drawGrid()}v.axisBBox=v.axis.getBBox();v.drawLabels()},drawGrid:function(){var u=this,o=u.chart.surface,b=u.grid,e=b.odd,f=b.even,h=u.inflections,k=h.length-((e||f)?0:1),v=u.position,d=u.chart.maxGutter,n=u.width-2,s=false,p,q,r=1,m=[],g,a,j,l=[],t=[];if((d[1]!==0&&(v=="left"||v=="right"))||(d[0]!==0&&(v=="top"||v=="bottom"))){r=0;k++}for(;r<k;r++){p=h[r];q=h[r-1];if(e||f){m=(r%2)?l:t;g=((r%2)?e:f)||{};a=(g.lineWidth||g["stroke-width"]||0)/2;j=2*a;if(v=="left"){m.push("M",q[0]+1+a,q[1]+0.5-a,"L",q[0]+1+n-a,q[1]+0.5-a,"L",p[0]+1+n-a,p[1]+0.5+a,"L",p[0]+1+a,p[1]+0.5+a,"Z")}else{if(v=="right"){m.push("M",q[0]-a,q[1]+0.5-a,"L",q[0]-n+a,q[1]+0.5-a,"L",p[0]-n+a,p[1]+0.5+a,"L",p[0]-a,p[1]+0.5+a,"Z")}else{if(v=="top"){m.push("M",q[0]+0.5+a,q[1]+1+a,"L",q[0]+0.5+a,q[1]+1+n-a,"L",p[0]+0.5-a,p[1]+1+n-a,"L",p[0]+0.5-a,p[1]+1+a,"Z")}else{m.push("M",q[0]+0.5+a,q[1]-a,"L",q[0]+0.5+a,q[1]-n+a,"L",p[0]+0.5-a,p[1]-n+a,"L",p[0]+0.5-a,p[1]-a,"Z")}}}}else{if(v=="left"){m=m.concat(["M",p[0]+0.5,p[1]+0.5,"l",n,0])}else{if(v=="right"){m=m.concat(["M",p[0]-0.5,p[1]+0.5,"l",-n,0])}else{if(v=="top"){m=m.concat(["M",p[0]+0.5,p[1]+0.5,"l",0,n])}else{m=m.concat(["M",p[0]+0.5,p[1]-0.5,"l",0,-n])}}}}}if(e||f){if(l.length){if(!u.gridOdd&&l.length){u.gridOdd=o.add({type:"path",path:l})}u.gridOdd.setAttributes(Ext.apply({path:l,hidden:false},e||{}),true)}if(t.length){if(!u.gridEven){u.gridEven=o.add({type:"path",path:t})}u.gridEven.setAttributes(Ext.apply({path:t,hidden:false},f||{}),true)}}else{if(m.length){if(!u.gridLines){u.gridLines=u.chart.surface.add({type:"path",path:m,"stroke-width":u.lineWidth||1,stroke:u.gridColor||"#ccc"})}u.gridLines.setAttributes({hidden:false,path:m},true)}else{if(u.gridLines){u.gridLines.hide(true)}}}},drawLabels:function(){var B=this,g=B.inflections,k=g.length,p=B.chart,C=B.position,z=B.labels,s=p.surface,q=B.labelGroup,v=0,r=0,w=B.chart.maxGutter[1],a,t,d,b,l,A,n,f,o,e,j,m,h,u;if(C=="left"||C=="right"){j=k;for(u=0;u<j;u++){t=g[u];o=B.label.renderer(z[u]);A=q.getAt(u);if(A){if(o!=A.attr.text){A.setAttributes(Ext.apply({text:o},B.label),true);A._bbox=A.getBBox()}}else{A=s.add(Ext.apply({group:q,type:"text",x:0,y:0,text:o},B.label));s.renderItem(A);A._bbox=A.getBBox()}n=A.attr;a=A._bbox;v=Math.max(v,a.width+B.dashSize+B.label.padding);h=t[1];if(w<a.height/2){if(u==j-1&&p.axes.findIndex("position","top")==-1){h=B.y-B.length+Math.ceil(a.height/2)}else{if(u==0&&p.axes.findIndex("position","bottom")==-1){h=B.y-Math.floor(a.height/2)}}}if(C=="left"){m=t[0]-a.width-B.dashSize-B.label.padding-2}else{m=t[0]+B.dashSize+B.label.padding+2}if(m!=n.x||h!=n.y||n.hidden){A.setAttributes(Ext.apply({hidden:false,x:m,y:h},B.label),true)}if(u!=0&&(u!=j)&&(h+a.height>b)&&!(n.rotation&&n.rotation.degrees)){A.hide(true)}b=h}}else{j=k-1;for(u=j;u>=0;u--){t=g[u];o=B.label.renderer(z[u]);A=q.getAt(j-u);if(A){if(o!=A.attr.text){A.setAttributes({text:o},true);A._bbox=A.getBBox()}}else{A=s.add(Ext.apply({group:q,type:"text",x:0,y:0,text:o},B.label));s.renderItem(A);A._bbox=A.getBBox()}n=A.attr;a=A._bbox;r=Math.max(r,a.height+B.dashSize+B.label.padding);m=Math.floor(t[0]-(a.width/2)-a.x*Math.abs(Math.sin(((n.rotation&&n.rotation.degrees||0)*Math.PI/180)||0)));if(B.chart.maxGutter[0]==0){if(u==0&&p.axes.findIndex("position","left")==-1){m=t[0]}else{if(u==j&&p.axes.findIndex("position","right")==-1){m=t[0]-a.width}}}f=m+a.width+B.label.padding;if(u!=0&&(u!=j)&&f>d&&!(n.rotation&&n.rotation.degrees)){if(!B.elipsis(A,o,d-m,35,t[0])){A.hide(true);continue}}if(u==0&&d<f){if(q.getCount()>2){l=q.getAt((j-u)-1);B.elipsis(l,l.attr.text,q.getAt((j-u)-2).getBBox().x-f,35,g[u+1][0])}}d=m;if(C=="top"){h=t[1]-(B.dashSize*2)-B.label.padding-(a.height/2)}else{h=t[1]+(B.dashSize*2)+B.label.padding+(a.height/2)}A.setAttributes({hidden:false,x:m,y:h},true)}}k=q.getCount();u=g.length;for(;u<k;u++){q.getAt(u).hide(true)}B.bbox={};Ext.apply(B.bbox,B.axisBBox);B.bbox.height=r;B.bbox.width=v;if(Ext.isString(B.title)){B.drawTitle(v,r)}},elipsis:function(e,h,d,f,b){var g,a;if(d<f){e.hide(true);return false}while(h.length>4){h=h.substr(0,h.length-4)+"...";e.setAttributes({text:h},true);g=e.getBBox();if(g.width<d){if(typeof b=="number"){e.setAttributes({x:Math.floor(b-(g.width/2))},true)}break}}return true},drawTitle:function(j,k){var g=this,f=g.position,b=g.chart.surface,e=(f=="left"||f=="right"),i=g.x,h=g.y,a,l,d;if(!g.displaySprite){a={type:"text",x:0,y:0,text:g.title};g.displaySprite=b.add(Ext.apply(a,g.axisTitleStyle,g.labelTitle));b.renderItem(g.displaySprite)}l=g.displaySprite.getBBox();d=g.dashSize+g.label.padding;if(e){h-=((g.length/2)-(l.height/2));if(f=="left"){i-=(j+d+(l.width/2))}else{i+=(j+d+l.width-(l.width/2))}g.bbox.width+=l.width+10}else{i+=(g.length/2)-(l.width*0.5);if(f=="top"){h-=(k+d+(l.height*0.3))}else{h+=(k+d+(l.height*0.8))}g.bbox.height+=l.height+10}g.displaySprite.setAttributes({translate:{x:i,y:h}},true)}});Ext.chart.axis.Category=Ext.extend(Ext.chart.axis.Axis,{categoryNames:null,calculateCategoryCount:false,setLabels:function(){var b=this.chart.store,a=this.fields,e=a.length,d;this.labels=[];b.each(function(f){for(d=0;d<e;d++){this.labels.push(f.get(a[d]))}},this)},applyData:function(){Ext.chart.axis.Category.superclass.applyData.call(this);this.setLabels();var a=this.chart.store.getCount();return{from:0,to:a,power:1,step:1,steps:a-1}}});Ext.chart.axis.Numeric=Ext.extend(Ext.chart.axis.Axis,{type:"numeric",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:true,alwaysShowZero:true,scale:"linear",roundMajorUnit:true,calculateByLabelSize:true,position:"left",adjustMaximumByMajorUnit:false,adjustMinimumByMajorUnit:false,applyData:function(){Ext.chart.axis.Numeric.superclass.applyData.call(this);return this.calcEnds()}});Ext.chart.axis.Radial=Ext.extend(Ext.chart.axis.Abstract,{position:"radial",drawAxis:function(u){var m=this.chart,a=m.surface,t=m.chartBBox,q=m.store,b=q.getCount(),f=t.x+(t.width/2),d=t.y+(t.height/2),p=Math.min(t.width,t.height)/2,k=[],r,o=this.steps,g,e,h=Math.PI*2,s=Math.cos,n=Math.sin;if(this.sprites&&!m.resizing){this.drawLabels();return}if(!this.sprites){for(g=1;g<=o;g++){r=a.add({type:"circle",x:f,y:d,radius:Math.max(p*g/o,0),stroke:"#ccc"});r.setAttributes({hidden:false},true);k.push(r)}q.each(function(l,j){r=a.add({type:"path",path:["M",f,d,"L",f+p*s(j/b*h),d+p*n(j/b*h),"Z"],stroke:"#ccc"});r.setAttributes({hidden:false},true);k.push(r)})}else{k=this.sprites;for(g=0;g<o;g++){k[g].setAttributes({x:f,y:d,radius:Math.max(p*(g+1)/o,0),stroke:"#ccc"},true)}q.each(function(l,i){k[g+i].setAttributes({path:["M",f,d,"L",f+p*s(i/b*h),d+p*n(i/b*h),"Z"],stroke:"#ccc"},true)})}this.sprites=k;this.drawLabels()},drawLabels:function(){var r=this.chart,w=r.surface,b=r.chartBBox,h=r.store,m=b.x+(b.width/2),l=b.y+(b.height/2),f=Math.min(b.width,b.height)/2,A=Math.max,D=Math.round,s=[],k,u=[],d,v=[],g,C=0,B=this.steps,z=0,y,p,o,t=Math.PI*2,e=Math.cos,a=Math.sin,x=this.label.display,n=x!=="none",q=10;if(!n){return}r.series.each(function(i){u.push(i.yField);g=i.xField});h.each(function(j,E){for(E=0,d=u.length;E<d;E++){C=A(+j.get(u[E]),C)}v.push(j.get(g))});if(!this.labelArray){if(x!="categories"){for(z=1;z<=B;z++){k=w.add({type:"text",text:D(z/B*C),x:m,y:l-f*z/B,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"});k.setAttributes({hidden:false},true);s.push(k)}}if(x!="scale"){for(y=0,B=v.length;y<B;y++){p=e(y/B*t)*(f+q);o=a(y/B*t)*(f+q);k=w.add({type:"text",text:v[y],x:m+p,y:l+o,"text-anchor":p*p<=0.001?"middle":(p<0?"end":"start")});k.setAttributes({hidden:false},true);s.push(k)}}}else{s=this.labelArray;if(x!="categories"){for(z=0;z<B;z++){s[z].setAttributes({text:D((z+1)/B*C),x:m,y:l-f*(z+1)/B,"text-anchor":"middle","stroke-width":0.1,stroke:"#333"},true)}}if(x!="scale"){for(y=0,B=v.length;y<B;y++){p=e(y/B*t)*(f+q);o=a(y/B*t)*(f+q);if(s[z+y]){s[z+y].setAttributes({type:"text",text:v[y],x:m+p,y:l+o,"text-anchor":p*p<=0.001?"middle":(p<0?"end":"start")},true)}}}}this.labelArray=s}});Ext.chart.axis.Time=Ext.extend(Ext.chart.axis.Category,{calculateByLabelSize:true,dateFormat:false,groupBy:"year,month,day",aggregateOp:"sum",fromDate:false,toDate:false,step:[Ext.Date.DAY,1],constrain:false,dateMethods:{year:function(a){return a.getFullYear()},day:function(a){return a.getDate()},month:function(a){return a.getMonth()+1}},aggregateFn:{sum:function(d){var b=0,a=d.length,e=0;if(!d.length||isNaN(d[0])){return d[0]}for(;b<a;b++){e+=d[b]}return e},max:function(a){if(!a.length||isNaN(a[0])){return a[0]}return Math.max.apply(Math,a)},min:function(a){if(!a.length||isNaN(a[0])){return a[0]}return Math.min.apply(Math,a)},avg:function(d){var b=0,a=d.length,e=0;if(!d.length||isNaN(d[0])){return d[0]}for(;b<a;b++){e+=d[b]}return e/a}},constrainDates:function(){var f=new Date(this.fromDate),e=new Date(this.toDate),b=this.step,g=this.fields,i=this.chart.store,d,h,k=[],a=new Ext.data.Store({model:i.model});var j=(function(){var n=0,m=i.getCount();return function(o){var p,l;for(;n<m;n++){p=i.getAt(n);l=new Date(p.get(g));if(+l>+o){return false}else{if(+l==+o){return p}}}return false}})();if(!this.constrain){this.chart.filteredStore=this.chart.store;return}while(+f<=+e){d=j(f);h={};if(d){a.add(d.data)}else{a.model.prototype.fields.each(function(l){h[l.name]=false});h.date=f;a.add(h)}f=f.add(b[0],b[1])}this.chart.filteredStore=a},aggregate:function(){var s={},o=[],u,n,j=this.aggregateOp,a=this.fields,q,m=this.groupBy.split(","),d,t=[],e=0,k,f=[],r=[],p=m.length,b=this.dateMethods,h=this.aggregateFn,g=this.chart.filteredStore||this.chart.store;g.each(function(i){if(!t.length){i.fields.each(function(l){t.push(l.name)});e=t.length}n=new Date(i.get(a));for(q=0;q<p;q++){if(q==0){u=String(b[m[q]](n))}else{u+="||"+b[m[q]](n)}}if(u in s){k=s[u]}else{k=s[u]={};o.push(u);f.push(n)}for(q=0;q<e;q++){d=t[q];if(!k[d]){k[d]=[]}if(i.get(d)!==undefined){k[d].push(i.get(d))}}});for(u in s){k=s[u];for(q=0;q<e;q++){d=t[q];k[d]=h[j](k[d])}r.push(k)}this.chart.substore=new Ext.data.JsonStore({fields:t,data:r});this.dates=f},setLabels:function(){var b=this.chart.substore,a=this.fields,g=this.dateFormat,h,e,f=this.dates,d=Ext.Date.format;this.labels=h=[];b.each(function(j,k){if(!g){h.push(j.get(a))}else{h.push(d(f[k],g))}},this)},applyData:function(){if(this.constrain){this.constrainDates();this.aggregate();this.chart.substore=this.chart.filteredStore}else{this.aggregate()}this.setLabels();var a=this.chart.substore.getCount();return{from:0,to:a,steps:a-1}}});Ext.chart.Tips=Ext.extend(Object,{constructor:function(b){var d=this,a,e,f;if(b.tips){this.tipTimeout=null;d.tipConfig=Ext.apply({},b.tips,{renderer:Ext.emptyFn});d.tooltip=new Ext.tip.ToolTip(d.tipConfig);Ext.getBody().on("mousemove",d.tooltip.onMouseMove,d.tooltip);if(d.tipConfig.surface){a=d.tipConfig.surface;e=a.sprites;f=new Ext.chart.TipSurface({id:"tipSurfaceComponent",sprites:e});if(a.width&&a.height){f.setSize(a.width,a.height)}d.tooltip.add(f);this.spriteTip=f}}},showTip:function(l){var f=this;if(!f.tooltip){return}clearTimeout(f.tipTimeout);var m=f.tooltip,a=f.spriteTip,d=f.tipConfig,e=m.trackMouse,k,b,j,h,i,g;if(!e){m.trackMouse=true;k=l.sprite;b=k.surface;j=Ext.get(b.getId());h=j.getXY();i=h[0]+(k.attr.x||0)+(k.attr.translation&&k.attr.translation.x||0);g=h[1]+(k.attr.y||0)+(k.attr.translation&&k.attr.translation.y||0);m.targetXY=[i,g]}if(a){d.renderer.call(m,l.storeItem,l,a.surface)}else{d.renderer.call(m,l.storeItem,l)}m.show();m.trackMouse=e},hideTip:function(a){var b=this.tooltip;if(!b){return}clearTimeout(this.tipTimeout);this.tipTimeout=setTimeout(function(){b.hide()},0)}});Ext.chart.series.Series=Ext.extend(Ext.util.Observable,{type:null,title:null,showInLegend:true,renderer:function(f,a,d,e,b){return d},shadowAttributes:null,constructor:function(a){var b=this;if(a){Ext.apply(b,a)}b.listeners=Ext.applyIf(a.listeners||{},{itemmouseover:Ext.emptyFn,itemmouseout:Ext.emptyFn,itemmousedown:Ext.emptyFn,itemmouseup:Ext.emptyFn});b.shadowGroups=[];b.mixins.labels.constructor.call(b,a);b.mixins.highlights.constructor.call(b,a);b.mixins.callouts.constructor.call(b,a);b.chart.on({scope:b,itemmouseover:b.onItemMouseOver,itemmouseout:b.onItemMouseOut,itemmousedown:b.onItemMouseDown,itemmouseup:b.onItemMouseUp,mouseleave:b.onMouseLeave})},setBBox:function(a){var f=this,d=f.chart,b=d.chartBBox,g=a?0:d.maxGutter[0],e=a?0:d.maxGutter[1],h,i;h={x:b.x,y:b.y,width:b.width,height:b.height};f.clipBox=h;i={x:(h.x+g)-(d.zoom.x*d.zoom.width),y:(h.y+e)-(d.zoom.y*d.zoom.height),width:(h.width-(g*2))*d.zoom.width,height:(h.height-(e*2))*d.zoom.height};f.bbox=i},onAnimate:function(b,a){b.stopFx();return b.animate(Ext.applyIf(a,this.chart.animate))},getGutters:function(){return[0,0]},onItemMouseUp:function(a){this.listeners.itemmouseup(a)},onItemMouseDown:function(a){this.listeners.itemmousedown(a)},onItemMouseOver:function(b){var a=this;if(b.series===a){if(a.highlight){a.highlightItem(b)}if(a.tooltip){a.showTip(b)}}a.listeners.itemmouseover(b)},onItemMouseOut:function(b){var a=this;if(b.series===a){a.unHighlightItem();if(a.tooltip){a.hideTip(b)}}a.listeners.itemmouseout(b)},onMouseLeave:function(){var a=this;a.unHighlightItem();if(a.tooltip){a.hideTip()}},getItemForPoint:function(a,j){if(!this.items||!this.items.length||this.seriesIsHidden){return null}var g=this,b=g.items,h=g.bbox,f,d,e;if(!Ext.draw.Draw.withinBox(a,j,h)){return null}for(d=0,e=b.length;d<e;d++){if(b[d]&&this.isItemInPoint(a,j,b[d],d)){return b[d]}}return null},isItemInPoint:function(a,e,d,b){return false},hideAll:function(){var g=this,b=g.items,f,a,e,d;g.seriesIsHidden=true;g._prevShowMarkers=g.showMarkers;g.showMarkers=false;g.hideLabels(0);for(e=0,a=b.length;e<a;e++){f=b[e];d=f.sprite;if(d){d.setAttributes({hidden:true},true)}}},showAll:function(){var a=this,b=a.chart.animate;a.chart.animate=false;a.seriesIsHidden=false;a.showMarkers=a._prevShowMarkers;a.drawSeries();a.chart.animate=b},getLegendColor:function(a){var b=this,e,d;if(b.seriesStyle){e=b.seriesStyle.fill;d=b.seriesStyle.stroke;if(e&&e!="none"){return e}return d}return"#000"},visibleInLegend:function(a){var b=this.__excludes;if(b){return !b[a]}return !this.seriesIsHidden}});Ext.mixin(Ext.chart.series.Series,"labels",Ext.chart.Labels);Ext.mixin(Ext.chart.series.Series,"highlights",Ext.chart.Highlights);Ext.mixin(Ext.chart.series.Series,"tips",Ext.chart.Tips);Ext.mixin(Ext.chart.series.Series,"callouts",Ext.chart.Callouts);Ext.chart.series.Cartesian=Ext.extend(Ext.chart.series.Series,{xField:null,yField:null,axis:"left"});Ext.chart.series.Area=Ext.extend(Ext.chart.series.Cartesian,{type:"area",style:{},constructor:function(d){Ext.chart.series.Area.superclass.constructor.apply(this,arguments);var f=this,a=f.chart.surface,e,b;Ext.apply(f,d,{__excludes:[],highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"}});if(f.highlight){f.highlightSprite=a.add({type:"path",path:["M",0,0],zIndex:1000,opacity:0.3,lineWidth:5,hidden:true,stroke:"#444"})}f.group=a.getGroup(f.seriesId)},shrink:function(b,n,o){var k=b.length,m=Math.floor(k/o),h,g,e=0,l=this.areas.length,a=[],f=[],d=[];for(g=0;g<l;++g){a[g]=0}for(h=0;h<k;++h){e+=b[h];for(g=0;g<l;++g){a[g]+=n[h][g]}if(h%m==0){f.push(e/m);for(g=0;g<l;++g){a[g]/=m}d.push(a);e=0;for(g=0,a=[];g<l;++g){a[g]=0}}}return{x:f,y:d}},getBounds:function(){var v=this,l=v.chart,h=l.substore||l.store,g=[].concat(v.yField),x=g.length,n=[],e=[],w=Infinity,t=w,r=w,s=-w,q=-w,d=Math,u=d.min,A=d.max,a,z,b,m,o,y,j,i,f,k,p;v.setBBox();a=v.bbox;h.each(function(B,C){m=B.get(v.xField);o=[];if(typeof m!="number"){m=C}n.push(m);j=0;for(y=0;y<x;y++){p=B.get(g[y]);if(typeof p=="number"){r=u(r,p);o.push(p);j+=p}}t=u(t,m);s=A(s,m);q=A(q,j);e.push(o)},v);z=a.width/(s-t);b=a.height/(q-r);i=n.length;if((i>a.width)&&v.areas){f=v.shrink(n,e,a.width);n=f.x;e=f.y}return{bbox:a,minX:t,minY:r,xValues:n,yValues:e,xScale:z,yScale:b,areasLen:x}},getPaths:function(){var v=this,l=v.chart,d=l.substore||l.store,e=true,f=v.getBounds(),a=f.bbox,m=v.items=[],u=[],b,o=[],r,h,j,g,p,s,k,w,q,t,n;h=f.xValues.length;for(r=0;r<h;r++){p=f.xValues[r];s=f.yValues[r];j=a.x+(p-f.minX)*f.xScale;k=0;for(w=0;w<f.areasLen;w++){if(v.__excludes[w]){continue}if(!u[w]){u[w]=[]}t=s[w];k+=t;g=a.y+a.height-(k-f.minY)*f.yScale;if(!o[w]){o[w]=["M",j,g];u[w].push(["L",j,g])}else{o[w].push("L",j,g);u[w].push(["L",j,g])}if(!m[w]){m[w]={pointsUp:[],pointsDown:[],series:v}}m[w].pointsUp.push([j,g])}}for(w=0;w<f.areasLen;w++){if(v.__excludes[w]){continue}n=o[w];if(w==0||e){e=false;n.push("L",j,a.y+a.height,"L",a.x,a.y+a.height,"Z")}else{b=u[q];b.reverse();n.push("L",j,b[0][2]);for(r=0;r<h;r++){n.push(b[r][0],b[r][1],b[r][2]);m[w].pointsDown[h-r-1]=[b[r][1],b[r][2]]}n.push("L",a.x,n[2],"Z")}q=w}return{paths:o,areasLen:f.areasLen}},drawSeries:function(){var h=this,g=h.chart,i=g.substore||g.store,d=g.surface,b=g.animate,k=h.group,a=Ext.apply(h.seriesStyle,h.style),l=h.colorArrayStyle,o=l&&l.length||0,e,f,n,m,j;h.unHighlightItem();h.cleanHighlights();if(!i||!i.getCount()){return}n=h.getPaths();if(!h.areas){h.areas=[]}for(e=0;e<n.areasLen;e++){if(h.__excludes[e]){continue}if(!h.areas[e]){h.items[e].sprite=h.areas[e]=d.add(Ext.apply({},{type:"path",group:k,path:n.paths[e],stroke:a.stroke||l[e%o],fill:l[e%o]},a||{}))}f=h.areas[e];m=n.paths[e];if(b){j=h.renderer(f,false,{path:m,fill:l[e%o],stroke:a.stroke||l[e%o]},e,i);h.animation=h.onAnimate(f,{to:j})}else{j=h.renderer(f,false,{path:m,hidden:false,fill:l[e%o],stroke:a.stroke||l[e%o]},e,i);h.areas[e].setAttributes(j,true)}}h.renderLabels();h.renderCallouts()},onAnimate:function(d,a){d.show();var b=Ext.chart.series.Area.superclass.onAnimate.apply(this,arguments);return b},onCreateLabel:function(e,k,d,f){var g=this,h=g.labelsGroup,a=g.label,j=g.bbox,b=Ext.apply(a,g.seriesLabelStyle);return g.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:h,x:k.point[0],y:j.y+j.height/2},b||{}))},onPlaceLabel:function(g,k,s,p,o,d,f){var u=this,l=u.chart,r=l.resizing,t=u.label,q=t.renderer,b=t.field,a=u.bbox,j=s.point[0],h=s.point[1],e,n,m;g.setAttributes({text:q(k.get(b[f])),hidden:true},true);e=g.getBBox();n=e.width/2;m=e.height/2;j=j-n<a.x?a.x+n:j;j=(j+n>a.x+a.width)?(j-(j+n-a.x-a.width)):j;h=h-m<a.y?a.y+m:h;h=(h+m>a.y+a.height)?(h-(h+m-a.y-a.height)):h;if(u.chart.animate&&!u.chart.resizing){g.show(true);u.onAnimate(g,{to:{x:j,y:h}})}else{g.setAttributes({x:j,y:h},true);if(r){u.animation.on("afteranimate",function(){g.show(true)})}else{g.show(true)}}},onPlaceCallout:function(m,r,J,G,F,e,k){var M=this,s=M.chart,D=s.surface,H=s.resizing,L=M.callouts,t=M.items,v=(G==0)?false:t[G-1].point,z=(G==t.length-1)?false:t[G+1].point,d=J.point,A,g,N,K,o,q,b=m.label.getBBox(),I=30,C=10,B=3,h,f,j,w,u,E=M.clipRect,n,l;if(!v){v=d}if(!z){z=d}K=(z[1]-v[1])/(z[0]-v[0]);o=(d[1]-v[1])/(d[0]-v[0]);q=(z[1]-d[1])/(z[0]-d[0]);g=Math.sqrt(1+K*K);A=[1/g,K/g];N=[-A[1],A[0]];if(o>0&&q<0&&N[1]<0||o<0&&q>0&&N[1]>0){N[0]*=-1;N[1]*=-1}else{if(Math.abs(o)<Math.abs(q)&&N[0]<0||Math.abs(o)>Math.abs(q)&&N[0]>0){N[0]*=-1;N[1]*=-1}}n=d[0]+N[0]*I;l=d[1]+N[1]*I;h=n+(N[0]>0?0:-(b.width+2*B));f=l-b.height/2-B;j=b.width+2*B;w=b.height+2*B;if(h<E[0]||(h+j)>(E[0]+E[2])){N[0]*=-1}if(f<E[1]||(f+w)>(E[1]+E[3])){N[1]*=-1}n=d[0]+N[0]*I;l=d[1]+N[1]*I;h=n+(N[0]>0?0:-(b.width+2*B));f=l-b.height/2-B;j=b.width+2*B;w=b.height+2*B;m.lines.setAttributes({path:["M",d[0],d[1],"L",n,l,"Z"]},true);m.box.setAttributes({x:h,y:f,width:j,height:w},true);m.label.setAttributes({x:n+(N[0]>0?B:-(b.width+B)),y:l},true);for(u in m){m[u].show(true)}},isItemInPoint:function(j,h,l,d){var g=this,b=l.pointsUp,e=l.pointsDown,n=Math.abs,f=Infinity,a,m,k;for(a=0,m=b.length;a<m;a++){k=[b[a][0],b[a][1]];if(f>n(j-k[0])){f=n(j-k[0])}else{k=b[a-1];if(h>=k[1]&&(!e.length||h<=(e[a-1][1]))){l.storeIndex=a-1;l.storeField=g.yField[d];l.storeItem=g.chart.store.getAt(a-1);l._points=e.length?[k,e[a-1]]:[k];return true}else{break}}}return false},highlightSeries:function(){var a,d,b;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}a.__highlighted=true;a.__prevOpacity=a.__prevOpacity||a.attr.opacity||1;a.__prevFill=a.__prevFill||a.attr.fill;a.__prevLineWidth=a.__prevLineWidth||a.attr.lineWidth;b=Ext.draw.Color.fromString(a.__prevFill);d={lineWidth:(a.__prevLineWidth||0)+2};if(b){d.fill=b.getLighter(0.2).toString()}else{d.opacity=Math.max(a.__prevOpacity-0.3,0)}if(this.chart.animate){a.__highlightAnim=new Ext.fx.Anim(Ext.apply({target:a,to:d},this.chart.animate))}else{a.setAttributes(d,true)}}},unHighlightSeries:function(){var a;if(this._index!==undefined){a=this.areas[this._index];if(a.__highlightAnim){a.__highlightAnim.paused=true}if(a.__highlighted){a.__highlighted=false;a.__highlightAnim=new Ext.fx.Anim({target:a,to:{fill:a.__prevFill,opacity:a.__prevOpacity,lineWidth:a.__prevLineWidth}})}}},highlightItem:function(d){var b=this,a,e;if(!d){this.highlightSeries();return}a=d._points;e=a.length==2?["M",a[0][0],a[0][1],"L",a[1][0],a[1][1]]:["M",a[0][0],a[0][1],"L",a[0][0],b.bbox.y+b.bbox.height];b.highlightSprite.setAttributes({path:e,hidden:false},true)},unHighlightItem:function(a){if(!a){this.unHighlightSeries()}if(this.highlightSprite){this.highlightSprite.hide(true)}},hideAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=true;this.areas[this._index].hide(true);this.drawSeries()}},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.areas[this._index].show(true);this.drawSeries()}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.chart.series.Bar=Ext.extend(Ext.chart.series.Cartesian,{type:"bar",column:false,style:{},gutter:38.2,groupGutter:38.2,xpadding:0,ypadding:10,constructor:function(d){Ext.chart.series.Bar.superclass.constructor.apply(this,arguments);var f=this,a=f.chart.surface,g=f.chart.shadow,e,b;Ext.apply(f,d,{highlightCfg:{lineWidth:3,stroke:"#55c",opacity:0.8,color:"#f00"},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:1.2}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:0.9}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:0.6}}]});f.group=a.getGroup(f.seriesId+"-bars");if(g){for(e=0,b=f.shadowAttributes.length;e<b;e++){f.shadowGroups.push(a.getGroup(f.seriesId+"-shadows"+e))}}},getBarGirth:function(){var e=this,a=e.chart.store,b=e.column,d=a.getCount(),f=e.gutter/100;return(e.chart.chartBBox[b?"width":"height"]-e[b?"xpadding":"ypadding"]*2)/(d*(f+1)-f)},getGutters:function(){var b=this,a=b.column,d=Math.ceil(b[a?"xpadding":"ypadding"]+b.getBarGirth()/2);return b.column?[d,0]:[0,d]},getBounds:function(){var z=this,q=z.chart,i=q.substore||q.store,r=[].concat(z.yField),b=r.length,k=b,h=z.groupGutter/100,f=z.column,m=z.xpadding,o=z.ypadding,w=z.stacked,p=z.getBarGirth(),g=Math,C=g.max,u=g.abs,y,a,x,v,e,A,n,B,l,s,t,d;z.setBBox(true);a=z.bbox;if(z.__excludes){for(s=0,B=z.__excludes.length;s<B;s++){if(z.__excludes[s]){k--}}}if(z.axis){e=q.axes.get(z.axis);if(e){x=e.from;v=C(e.to,0)}}if(z.yField&&!Ext.isNumber(x)){e=new Ext.chart.axis.Axis({chart:q,fields:[].concat(z.yField)}).calcEnds();x=e.from;v=C(e.to,0)}if(!Ext.isNumber(x)){x=0}if(!Ext.isNumber(v)){v=0}A=(f?a.height-o*2:a.width-m*2)/(v-x);y=p/((w?1:k)*(h+1)-h);n=(f)?a.y+a.height-o:a.x+m;if(w){B=[[],[]];i.each(function(j,D){B[0][D]=B[0][D]||0;B[1][D]=B[1][D]||0;for(s=0;s<b;s++){if(z.__excludes&&z.__excludes[s]){continue}l=j.get(r[s]);B[+(l>0)][D]+=u(l)}});t=C.apply(g,B[0]);d=C.apply(g,B[1]);A=(f?a.height-o*2:a.width-m*2)/(t+d);n=n+t*A*(f?-1:1)}else{if(x/v<0){n=n-x*A*(f?-1:1)}}return{bars:r,bbox:a,barsLen:b,groupBarsLen:k,barWidth:p,groupBarWidth:y,scale:A,zero:n,xpadding:m,ypadding:o,signed:x/v<0,minY:x,maxY:v}},getPaths:function(){var u=this,O=u.chart,b=O.substore||O.store,D=u.bounds=u.getBounds(),y=u.items=[],k=u.gutter/100,d=u.groupGutter/100,M=O.animate,H=u.column,w=u.group,l=O.shadow,K=u.shadowGroups,J=u.shadowAttributes,o=K.length,x=D.bbox,q=u.xpadding,t=u.ypadding,L=u.stacked,v=D.barsLen,I=u.colorArrayStyle,h=I&&I.length||0,A=Math,m=A.max,E=A.min,s=A.abs,N,P,f,F,B,a,i,r,p,n,g,e,C,z,G;b.each(function(j,Q,S){a=D.zero;i=D.zero;F=0;B=0;r=false;for(N=0,g=0;N<v;N++){if(u.__excludes&&u.__excludes[N]){continue}P=j.get(D.bars[N]);f=Math.round((P-((D.minY<0)?0:D.minY))*D.scale);p={fill:I[(v>1?N:0)%h]};if(H){Ext.apply(p,{height:f,width:m(D.groupBarWidth,0),x:(x.x+q+Q*D.barWidth*(1+k)+g*D.groupBarWidth*(1+d)*!L),y:a-f})}else{G=(S-1)-Q;Ext.apply(p,{height:m(D.groupBarWidth,0),width:f+(a==D.zero),x:a+(a!=D.zero),y:(x.y+t+G*D.barWidth*(1+k)+g*D.groupBarWidth*(1+d)*!L+1)})}if(f<0){if(H){p.y=i;p.height=s(f)}else{p.x=i+f;p.width=s(f)}}if(L){if(f<0){i+=f*(H?-1:1)}else{a+=f*(H?-1:1)}F+=s(f);if(f<0){B+=s(f)}}p.x=Math.round(p.x)+1;p.y=Math.round(p.y);p.width=Math.floor(p.width);p.height=Math.floor(p.height);y.push({series:u,storeItem:j,value:[j.get(u.xField),P],attr:p,point:H?[p.x+p.width/2,P>=0?p.y:p.y+p.height]:[P>=0?p.x+p.width:p.x,p.y+p.height/2]});if(M&&O.resizing){n=H?{x:p.x,y:D.zero,width:p.width,height:0}:{x:D.zero,y:p.y,width:0,height:p.height};if(l&&(L&&!r||!L)){r=true;for(e=0;e<o;e++){C=K[e].getAt(L?Q:(Q*v+N));if(C){C.setAttributes(n,true)}}}z=w.getAt(Q*v+N);if(z){z.setAttributes(n,true)}}g++}if(L&&y.length){y[Q*g].totalDim=F;y[Q*g].totalNegDim=B}},u)},renderShadows:function(u,v,y,l){var z=this,p=z.chart,s=p.surface,g=p.animate,x=z.stacked,a=z.shadowGroups,w=z.shadowAttributes,o=a.length,h=p.substore||p.store,e=z.column,r=z.items,b=[],m=l.zero,f,q,k,A,n,t,d;if((x&&(u%l.groupBarsLen===0))||!x){t=u/l.groupBarsLen;for(f=0;f<o;f++){q=Ext.apply({},w[f]);k=a[f].getAt(x?t:u);Ext.copyTo(q,v,"x,y,width,height");if(!k){k=s.add(Ext.apply({type:"rect",group:a[f]},Ext.apply({},y,q)))}if(x){A=r[u].totalDim;n=r[u].totalNegDim;if(e){q.y=m-n;q.height=A}else{q.x=m-n;q.width=A}}if(g){if(!x){d=z.renderer(k,h.getAt(t),q,u,h);z.onAnimate(k,{to:d})}else{d=z.renderer(k,h.getAt(t),Ext.apply(q,{hidden:true}),u,h);k.setAttributes(d,true)}}else{d=z.renderer(k,h.getAt(t),Ext.apply(q,{hidden:false}),u,h);k.setAttributes(d,true)}b.push(k)}}return b},drawSeries:function(){var C=this,r=C.chart,m=r.substore||r.store,v=r.surface,k=r.animate,A=C.stacked,e=C.column,b=r.shadow,a=C.shadowGroups,q=a.length,o=C.group,g=C.seriesStyle,s,p,y,x,B,t,d,f,h,n,l,z,u,w;if(!m||!m.getCount()){return}delete g.fill;l=Ext.apply(g,this.style);C.unHighlightItem();C.cleanHighlights();C.getPaths();n=C.bounds;s=C.items;B=e?{y:n.zero,height:0}:{x:n.zero,width:0};p=s.length;for(y=0;y<p;y++){t=o.getAt(y);z=s[y].attr;if(b){s[y].shadows=C.renderShadows(y,z,B,n)}if(!t){u=Ext.apply({},B,z);u=Ext.apply(u,l||{});t=v.add(Ext.apply({},{type:"rect",group:o},u))}if(k){d=C.renderer(t,m.getAt(y),z,y,m);t._to=d;w=C.onAnimate(t,{to:Ext.apply(d,l)});if(b&&A&&(y%n.barsLen===0)){x=y/n.barsLen;for(f=0;f<q;f++){w.on("afteranimate",function(){this.show(true)},a[f].getAt(x))}}}else{d=C.renderer(t,m.getAt(y),Ext.apply(z,{hidden:false}),y,m);t.setAttributes(Ext.apply(d,l),true)}s[y].sprite=t}p=o.getCount();for(x=y;x<p;x++){o.getAt(x).hide(true)}if(b){for(f=0;f<q;f++){h=a[f];p=h.getCount();for(x=y;x<p;x++){h.getAt(x).hide(true)}}}C.renderLabels()},onCreateLabel:function(f,l,e,g){var h=this,a=h.chart.surface,k=h.labelsGroup,b=h.label,d=Ext.apply({},b,h.seriesLabelStyle||{}),j;return a.add(Ext.apply({type:"text",group:k},d||{}))},onPlaceLabel:function(h,n,I,B,w,e,f){var M=this,a=M.bounds,L=a.groupBarWidth,d=M.column,p=M.chart,l=p.chartBBox,H=p.resizing,v=I.value[0],F=I.value[1],u=I.attr,K=M.label,A=K.orientation=="vertical",b=[].concat(K.field),C=K.renderer,o=C(n.get(b[f])),r=M.getLabelSize(o),t=r.width,q=r.height,m=a.zero,J="outside",D="insideStart",s="insideEnd",G=10,E=6,g=a.signed,k,j,z;h.setAttributes({text:o});if(d){if(w==J){if(q+E+u.height>(F>=0?m-l.y:l.y+l.height-m)){w=s}}else{if(q+E>u.height){w=J}}k=u.x+L/2;j=w==D?(m+((q/2+3)*(F>=0?-1:1))):(F>=0?(u.y+((q/2+3)*(w==J?-1:1))):(u.y+u.height+((q/2+3)*(w===J?1:-1))))}else{if(w==J){if(t+G+u.width>(F>=0?l.x+l.width-m:m-l.x)){w=s}}else{if(t+G>u.width){w=J}}k=w==D?(m+((t/2+5)*(F>=0?1:-1))):(F>=0?(u.x+u.width+((t/2+5)*(w===J?1:-1))):(u.x+((t/2+5)*(w===J?-1:1))));j=u.y+L/2}z={x:k,y:j};if(A){z.rotate={x:k,y:j,degrees:270}}if(e&&H){if(d){k=u.x+u.width/2;j=m}else{k=m;j=u.y+u.height/2}h.setAttributes({x:k,y:j},true);if(A){h.setAttributes({rotate:{x:k,y:j,degrees:270}},true)}}if(e){M.onAnimate(h,{to:z})}else{h.setAttributes(Ext.apply(z,{hidden:false}),true)}},getLabelSize:function(g){var k=this.testerLabel,a=this.label,e=Ext.apply({},a,this.seriesLabelStyle||{}),b=a.orientation==="vertical",j,i,f,d;if(!k){k=this.testerLabel=this.chart.surface.add(Ext.apply({type:"text",opacity:0},e))}k.setAttributes({text:g},true);j=k.getBBox();i=j.width;f=j.height;return{width:b?f:i,height:b?i:f}},onAnimate:function(d,a){d.show();var b=Ext.chart.series.Bar.superclass.onAnimate.apply(this,arguments);return b},isItemInPoint:function(a,e,b){var d=b.sprite.getBBox();return d.x<=a&&d.y<=e&&(d.x+d.width)>=a&&(d.y+d.height)>=e},hideAll:function(){var a=this.chart.axes;if(!isNaN(this._index)){if(!this.__excludes){this.__excludes=[]}this.__excludes[this._index]=true;this.drawSeries();a.each(function(b){b.drawAxis()})}},showAll:function(){var a=this.chart.axes;if(!isNaN(this._index)){if(!this.__excludes){this.__excludes=[]}this.__excludes[this._index]=false;this.drawSeries();a.each(function(b){b.drawAxis()})}},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.chart.series.Column=Ext.extend(Ext.chart.series.Bar,{type:"column",column:true,xpadding:10,ypadding:0,constructor:function(a){Ext.chart.series.Column.superclass.constructor.apply(this,arguments)}});Ext.chart.series.Line=Ext.extend(Ext.chart.series.Cartesian,{type:"line",selectionTolerance:20,showMarkers:true,markerCfg:{},style:{},dash:"",fill:false,constructor:function(d){Ext.chart.series.Line.superclass.constructor.apply(this,arguments);var f=this,a=f.chart.surface,g=f.chart.shadow,e,b;Ext.apply(f,d,{highlightCfg:{lineWidth:3},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)",translate:{x:1,y:1}}]});f.group=a.getGroup(f.seriesId);if(f.showMarkers){f.markerGroup=a.getGroup(f.seriesId+"-markers")}if(g){for(e=0,b=this.shadowAttributes.length;e<b;e++){f.shadowGroups.push(a.getGroup(f.seriesId+"-shadows"+e))}}},shrink:function(b,k,l){var h=b.length,j=Math.floor(h/l),g=1,e=0,a=0,f=[b[0]],d=[k[0]];for(;g<h;++g){e+=b[g]||0;a+=k[g]||0;if(g%j==0){f.push(e/j);d.push(a/j);e=0;a=0}}return{x:f,y:d}},drawSeries:function(){var u=this,ao=u.chart,e=ao.substore||ao.store,ab=ao.surface,P=ao.chartBBox,B={},A=u.group,U=ao.maxGutter[0],T=ao.maxGutter[1],q=u.showMarkers,ap=u.markerGroup,l=ao.shadow,ah=u.shadowGroups,ag=this.shadowAttributes,at=ah.length,ak=["M"],af=["M"],k=ao.markerIndex,aa=[].concat(u.axis),aj,L,Y=[],ad=[],H=false,v=u.markerStyle,m=u.seriesStyle,d=u.seriesLabelStyle,h=u.colorArrayStyle,z=h&&h.length||0,M=u.seriesIdx,I,S,K,w,s,g,p,X,W,b,a,O,t,an,am,N,E,al,aq,V,J,F,ar,o,r,ai,ac,D,Z,C,n,au,f,ae,av,G,Q;if(!e||!e.getCount()){return}f=Ext.apply(v,u.markerCfg);av=f.type;delete f.type;ae=Ext.apply(m,u.style);if(!ae["stroke-width"]){ae["stroke-width"]=0.5}if(k&&ap&&ap.getCount()){for(an=0;an<k;an++){aq=ap.getAt(an);ap.remove(aq);ap.add(aq);V=ap.getAt(ap.getCount()-2);aq.setAttributes({x:0,y:0,translate:{x:V.attr.translation.x,y:V.attr.translation.y}})}}u.unHighlightItem();u.cleanHighlights();u.setBBox();B=u.bbox;u.clipRect=[B.x,B.y,B.width,B.height];for(an=0,N=aa.length;an<N;an++){E=ao.axes.get(aa[an]);if(E){if(E.position=="top"||E.position=="bottom"){ac=E.from;D=E.to}else{Z=E.from;C=E.to}}}if(u.xField&&!Ext.isNumber(ac)){E=new Ext.chart.axis.Axis({chart:ao,fields:[].concat(u.xField)}).calcEnds();ac=E.from;D=E.to}if(u.yField&&!Ext.isNumber(Z)){E=new Ext.chart.axis.Axis({chart:ao,fields:[].concat(u.yField)}).calcEnds();Z=E.from;C=E.to}if(isNaN(ac)){ac=0;r=B.width/(e.getCount()-1)}else{r=B.width/(D-ac)}if(isNaN(Z)){Z=0;ai=B.height/(e.getCount()-1)}else{ai=B.height/(C-Z)}e.each(function(j,x){F=j.get(u.xField);ar=j.get(u.yField);if(typeof F=="string"||typeof F=="object"){F=x}if(typeof ar=="string"){ar=x}Y.push(F);ad.push(ar)},u);N=Y.length;if(N>B.width){o=u.shrink(Y,ad,B.width);Y=o.x;ad=o.y}u.items=[];N=Y.length;for(an=0;an<N;an++){F=Y[an];ar=ad[an];if(ar===false){if(af.length==1){af=[]}H=true;continue}else{X=(B.x+(F-ac)*r).toFixed(2);W=((B.y+B.height)-(ar-Z)*ai).toFixed(2);if(H){H=false;af.push("M")}af=af.concat([X,W])}if((typeof O=="undefined")&&(typeof W!="undefined")){O=W}if(!u.line||ao.resizing){ak=ak.concat([X,B.y+B.height/2])}if(ao.animate&&ao.resizing&&u.line){u.line.setAttributes({path:ak},true);if(u.fillPath){u.fillPath.setAttributes({path:ak,opacity:0.2},true)}if(u.line.shadows){I=u.line.shadows;for(am=0,at=I.length;am<at;am++){S=I[am];S.setAttributes({path:ak},true)}}}if(q){aq=ap.getAt(an);if(!aq){aq=Ext.chart.Shapes[av](ab,Ext.apply({group:[A,ap],x:0,y:0,translate:{x:b||X,y:a||(B.y+B.height/2)},value:'"'+F+", "+ar+'"'},f));aq._to={translate:{x:X,y:W}}}else{aq.setAttributes({value:'"'+F+", "+ar+'"',x:0,y:0,hidden:false},true);aq._to={translate:{x:X,y:W}}}}u.items.push({series:u,value:[F,ar],point:[X,W],sprite:aq,storeItem:e.getAt(an)});b=X;a=W}if(af.length<=1){return}if(u.smooth){af=Ext.draw.Draw.smooth(af,6)}if(ao.markerIndex&&u.previousPath){w=u.previousPath;w.splice(1,2)}else{w=af}if(!u.line){u.line=ab.add(Ext.apply({type:"path",group:A,path:ak,stroke:ae.stroke||ae.fill},ae||{}));u.line.setAttributes({fill:"none"});if(!ae.stroke&&z){u.line.setAttributes({stroke:h[M%z]},true)}if(l){I=u.line.shadows=[];for(K=0;K<at;K++){L=ag[K];L=Ext.apply({},L,{path:ak});S=ao.surface.add(Ext.apply({},{type:"path",group:ah[K]},L));I.push(S)}}}if(u.fill){g=af.concat([["L",X,B.y+B.height],["L",B.x,B.y+B.height],["L",B.x,O]]);if(!u.fillPath){u.fillPath=ab.add({group:A,type:"path",opacity:ae.opacity||0.3,fill:h[M%z]||ae.fill,path:ak})}}t=q&&ap.getCount();if(ao.animate){s=u.fill;n=u.line;p=u.renderer(n,false,{path:af},an,e);Ext.apply(p,ae||{},{stroke:ae.stroke||ae.fill});delete p.fill;if(ao.markerIndex&&u.previousPath){u.animation=au=u.onAnimate(n,{to:p,from:{path:w}})}else{u.animation=au=u.onAnimate(n,{to:p})}if(l){I=n.shadows;for(am=0;am<at;am++){if(ao.markerIndex&&u.previousPath){u.onAnimate(I[am],{to:{path:af},from:{path:w}})}else{u.onAnimate(I[am],{to:{path:af}})}}}if(s){u.onAnimate(u.fillPath,{to:Ext.apply({},{path:g,fill:h[M%z]||ae.fill},ae||{})})}if(q){for(an=0;an<N;an++){J=ap.getAt(an);if(J){p=u.renderer(J,e.getAt(an),J._to,an,e);u.onAnimate(J,{to:Ext.apply(p,f||{})})}}for(;an<t;an++){J=ap.getAt(an);J.hide(true)}}}else{p=u.renderer(u.line,false,{path:af,hidden:false},an,e);Ext.apply(p,ae||{},{stroke:ae.stroke||ae.fill});delete p.fill;u.line.setAttributes(p,true);if(l){I=u.line.shadows;for(am=0;am<at;am++){I[am].setAttributes({path:af},true)}}if(u.fill){u.fillPath.setAttributes({path:g},true)}if(q){for(an=0;an<N;an++){J=ap.getAt(an);if(J){p=u.renderer(J,e.getAt(an),J._to,an,e);J.setAttributes(Ext.apply(f||{},p||{}),true)}}for(;an<t;an++){J=ap.getAt(an);J.hide(true)}}}if(ao.markerIndex){af.splice(1,0,af[1],af[2]);u.previousPath=af}u.renderLabels();u.renderCallouts()},onCreateLabel:function(e,k,d,f){var g=this,h=g.labelsGroup,a=g.label,j=g.bbox,b=Ext.apply(a,g.seriesLabelStyle);return g.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:h,x:k.point[0],y:j.y+j.height/2},b||{}))},onPlaceLabel:function(g,k,s,p,o,e){var u=this,l=u.chart,r=l.resizing,t=u.label,q=t.renderer,b=t.field,a=u.bbox,j=s.point[0],h=s.point[1],d=s.sprite.attr.radius,f,n,m;g.setAttributes({text:q(k.get(b)),hidden:true},true);if(o=="rotate"){g.setAttributes({"text-anchor":"start",rotation:{x:j,y:h,degrees:-45}},true);f=g.getBBox();n=f.width;m=f.height;j=j<a.x?a.x:j;j=(j+n>a.x+a.width)?(j-(j+n-a.x-a.width)):j;h=(h-m<a.y)?a.y+m:h}else{if(o=="under"||o=="over"){f=s.sprite.getBBox();f.width=f.width||(d*2);f.height=f.height||(d*2);h=h+(o=="over"?-f.height:f.height);f=g.getBBox();n=f.width/2;m=f.height/2;j=j-n<a.x?a.x+n:j;j=(j+n>a.x+a.width)?(j-(j+n-a.x-a.width)):j;h=h-m<a.y?a.y+m:h;h=(h+m>a.y+a.height)?(h-(h+m-a.y-a.height)):h}}if(u.chart.animate&&!u.chart.resizing){g.show(true);u.onAnimate(g,{to:{x:j,y:h}})}else{g.setAttributes({x:j,y:h},true);if(r){u.animation.on("afteranimate",function(){g.show(true)})}else{g.show(true)}}},highlightItem:function(){var a=this;Ext.chart.series.Line.superclass.highlightItem.apply(a,arguments);if(this.line&&!this.highlighted){if(!("__strokeWidth" in this.line)){this.line.__strokeWidth=this.line.attr["stroke-width"]||0}if(this.line.__anim){this.line.__anim.paused=true}this.line.__anim=new Ext.fx.Anim({target:this.line,to:{"stroke-width":this.line.__strokeWidth+3}});this.highlighted=true}},unHighlightItem:function(){var a=this;Ext.chart.series.Line.superclass.unHighlightItem.apply(a,arguments);if(this.line&&this.highlighted){this.line.__anim=new Ext.fx.Anim({target:this.line,to:{"stroke-width":this.line.__strokeWidth}});this.highlighted=false}},onPlaceCallout:function(m,r,J,G,F,e,k){if(!F){return}var M=this,s=M.chart,D=s.surface,H=s.resizing,L=M.callouts,t=M.items,v=G==0?false:t[G-1].point,z=(G==t.length-1)?false:t[G+1].point,d=[+J.point[0],+J.point[1]],A,g,N,K,o,q,I=L.offsetFromViz||30,C=L.offsetToSide||10,B=L.offsetBox||3,h,f,j,w,u,E=M.clipRect,b={width:L.styles.width||10,height:L.styles.height||10},n,l;if(!v){v=d}if(!z){z=d}K=(z[1]-v[1])/(z[0]-v[0]);o=(d[1]-v[1])/(d[0]-v[0]);q=(z[1]-d[1])/(z[0]-d[0]);g=Math.sqrt(1+K*K);A=[1/g,K/g];N=[-A[1],A[0]];if(o>0&&q<0&&N[1]<0||o<0&&q>0&&N[1]>0){N[0]*=-1;N[1]*=-1}else{if(Math.abs(o)<Math.abs(q)&&N[0]<0||Math.abs(o)>Math.abs(q)&&N[0]>0){N[0]*=-1;N[1]*=-1}}n=d[0]+N[0]*I;l=d[1]+N[1]*I;h=n+(N[0]>0?0:-(b.width+2*B));f=l-b.height/2-B;j=b.width+2*B;w=b.height+2*B;if(h<E[0]||(h+j)>(E[0]+E[2])){N[0]*=-1}if(f<E[1]||(f+w)>(E[1]+E[3])){N[1]*=-1}n=d[0]+N[0]*I;l=d[1]+N[1]*I;h=n+(N[0]>0?0:-(b.width+2*B));f=l-b.height/2-B;j=b.width+2*B;w=b.height+2*B;if(s.animate){M.onAnimate(m.lines,{to:{path:["M",d[0],d[1],"L",n,l,"Z"]}});if(m.panel){m.panel.setPosition(h,f,true)}}else{m.lines.setAttributes({path:["M",d[0],d[1],"L",n,l,"Z"]},true);if(m.panel){m.panel.setPosition(h,f)}}for(u in m){m[u].show(true)}},isItemInPoint:function(j,g,A,q){var C=this,n=C.items,s=C.selectionTolerance,k=null,z,d,p,v,h,w,b,t,a,l,B,f,e,o,u,r,D=Math.sqrt,m=Math.abs;d=n[q];z=q&&n[q-1];if(q>=h){z=n[h-1]}p=z&&z.point;v=d&&d.point;w=z?p[0]:v[0]-s;b=z?p[1]:v[1];t=d?v[0]:p[0]+s;a=d?v[1]:p[1];f=D((j-w)*(j-w)+(g-b)*(g-b));e=D((j-t)*(j-t)+(g-a)*(g-a));o=Math.min(f,e);if(o<=s){return o==f?z:d}return false},toggleAll:function(a){var f=this,b,e,g,d;if(!a){Ext.chart.series.Line.superclass.hideAll.call(f)}else{Ext.chart.series.Line.superclass.showAll.call(f)}if(f.line){f.line.setAttributes({hidden:!a},true);if(f.line.shadows){for(b=0,d=f.line.shadows,e=d.length;b<e;b++){g=d[b];g.setAttributes({hidden:!a},true)}}}if(f.fillPath){f.fillPath.setAttributes({hidden:!a},true)}},hideAll:function(){this.toggleAll(false)},showAll:function(){this.toggleAll(true)}});Ext.chart.series.Pie=Ext.extend(Ext.chart.series.Series,{type:"pie",rad:Math.PI/180,highlightDuration:150,angleField:false,lengthField:false,donut:false,showInLegend:false,style:{},constructor:function(b){Ext.chart.series.Pie.superclass.constructor.apply(this,arguments);var h=this,g=h.chart,a=g.surface,j=g.store,k=g.shadow,e,d,f;Ext.applyIf(h,{highlightCfg:{segment:{margin:20}}});Ext.apply(h,b,{shadowAttributes:[{"stroke-width":6,"stroke-opacity":1,stroke:"rgb(200, 200, 200)",translate:{x:1.2,y:2}},{"stroke-width":4,"stroke-opacity":1,stroke:"rgb(150, 150, 150)",translate:{x:0.9,y:1.5}},{"stroke-width":2,"stroke-opacity":1,stroke:"rgb(100, 100, 100)",translate:{x:0.6,y:1}}]});h.group=a.getGroup(h.seriesId);if(k){for(e=0,d=h.shadowAttributes.length;e<d;e++){h.shadowGroups.push(a.getGroup(h.seriesId+"-shadows"+e))}}a.customAttributes.segment=function(i){return h.getSegment(i)}},initialize:function(){var b=this,a=b.chart.substore||b.chart.store;b.yField=[];if(b.label.field){a.each(function(d){b.yField.push(d.get(b.label.field))})}},getSegment:function(b){var C=this,B=C.rad,e=Math.cos,a=Math.sin,n=Math.abs,k=C.centerX,i=C.centerY,w=0,v=0,u=0,s=0,h=0,g=0,f=0,d=0,z=0.01,m=b.endRho-b.startRho,q=b.startAngle,p=b.endAngle,j=(q+p)/2*B,l=b.margin||0,t=n(p-q)>180,D=Math.min(q,p)*B,A=Math.max(q,p)*B,o=false;k+=l*e(j);i+=l*a(j);w=k+b.startRho*e(D);h=i+b.startRho*a(D);v=k+b.endRho*e(D);g=i+b.endRho*a(D);u=k+b.startRho*e(A);f=i+b.startRho*a(A);s=k+b.endRho*e(A);d=i+b.endRho*a(A);if(n(w-u)<=z&&n(h-f)<=z){o=true}if(o){return{path:[["M",w,h],["L",v,g],["A",b.endRho,b.endRho,0,+t,1,s,d],["Z"]]}}else{return{path:[["M",w,h],["L",v,g],["A",b.endRho,b.endRho,0,+t,1,s,d],["L",u,f],["A",b.startRho,b.startRho,0,+t,0,w,h],["Z"]]}}},calcMiddle:function(p){var k=this,l=k.rad,o=p.slice,n=k.centerX,m=k.centerY,j=o.startAngle,f=o.endAngle,i=Math.max(("rho" in o)?o.rho:k.radius,k.label.minMargin),h=+k.donut,b=Math.min(j,f)*l,a=Math.max(j,f)*l,e=-(b+(a-b)/2),g=n+(p.endRho+p.startRho)/2*Math.cos(e),d=m-(p.endRho+p.startRho)/2*Math.sin(e);p.middle={x:g,y:d}},drawSeries:function(){var y=this,b=y.chart.substore||y.chart.store,E=y.group,ae=y.chart.animate,q=y.angleField||y.field||y.xField,H=[].concat(y.lengthField),ad=0,W=y.colorSet,aj=y.chart,T=aj.surface,N=aj.chartBBox,m=aj.shadow,ab=y.shadowGroups,aa=y.shadowAttributes,an=ab.length,h=y.rad,U=H.length,I=0,e=+y.donut,al=[],am={},ak,F=[],k=false,B=0,X=0,l=9,ao=true,A=0,o=y.seriesStyle,a=y.seriesLabelStyle,g=y.colorArrayStyle,D=g&&g.length||0,Q=aj.maxGutter[0],P=aj.maxGutter[1],v,ac,ai,J,O,L,f,d,w,s=0,x,u,G,V,K,ap,M,S,ag,af,n,ah,z,r,Y,Z,t,C;Ext.apply(o,y.style||{});y.setBBox();C=y.bbox;if(y.colorSet){g=y.colorSet;D=g.length}if(!b||!b.getCount()){return}y.unHighlightItem();y.cleanHighlights();f=y.centerX=N.x+(N.width/2);d=y.centerY=N.y+(N.height/2);y.radius=Math.min(f-N.x,d-N.y);y.slices=u=[];y.items=F=[];b.each(function(j,p){if(this.__excludes&&this.__excludes[p]){return}B+=+j.get(q);if(H[0]){for(af=0,ad=0;af<U;af++){ad+=+j.get(H[af])}al[p]=ad;X=Math.max(X,ad)}},this);b.each(function(j,p){if(this.__excludes&&this.__excludes[p]){return}V=j.get(q);z=A-360*V/B/2;if(!p||s==0){A=360-z;y.firstAngle=A;z=A-360*V/B/2}ah=A-360*V/B;x={series:y,value:V,startAngle:A,endAngle:ah,storeItem:j};if(H[0]){ap=al[p];x.rho=y.radius*(ap/X)}else{x.rho=y.radius}u[p]=x;if((x.startAngle%360)==(x.endAngle%360)){x.startAngle-=0.0001}A=ah;s++},y);if(m){for(ag=0,M=u.length;ag<M;ag++){if(this.__excludes&&this.__excludes[ag]){continue}x=u[ag];x.shadowAttrs=[];for(af=0,I=0,J=[];af<U;af++){G=E.getAt(ag*U+af);w=H[af]?b.getAt(ag).get(H[af])/al[ag]*x.rho:x.rho;v={segment:{startAngle:x.startAngle,endAngle:x.endAngle,margin:0,rho:x.rho,startRho:I+(w*e/100),endRho:I+w}};for(L=0,J=[];L<an;L++){ai=aa[L];O=ab[L].getAt(ag);if(!O){O=aj.surface.add(Ext.apply({},{type:"path",group:ab[L],strokeLinejoin:"round"},v,ai))}if(ae){v=y.renderer(O,b.getAt(ag),Ext.apply({},v,ai),ag,b);y.onAnimate(O,{to:v})}else{v=y.renderer(O,b.getAt(ag),Ext.apply(ai,{hidden:false}),ag,b);O.setAttributes(v,true)}J.push(O)}x.shadowAttrs[af]=J}}}for(ag=0,M=u.length;ag<M;ag++){if(this.__excludes&&this.__excludes[ag]){continue}x=u[ag];for(af=0,I=0;af<U;af++){G=E.getAt(ag*U+af);w=H[af]?b.getAt(ag).get(H[af])/al[ag]*x.rho:x.rho;v=Ext.apply({segment:{startAngle:x.startAngle,endAngle:x.endAngle,margin:0,rho:x.rho,startRho:I+(w*e/100),endRho:I+w}},Ext.apply(o,g&&{fill:g[(U>1?af:ag)%D]}||{}));K=Ext.apply({},v.segment,{slice:x,series:y,storeItem:x.storeItem,index:ag});y.calcMiddle(K);if(m){K.shadows=x.shadowAttrs[af]}F[ag]=K;if(!G){t=Ext.apply({type:"path",group:E,middle:K.middle},Ext.apply(o,g&&{fill:g[(U>1?af:ag)%D]}||{}));G=T.add(Ext.apply(t,v))}x.sprite=x.sprite||[];K.sprite=G;x.sprite.push(G);x.point=[K.middle.x,K.middle.y];if(ae){v=y.renderer(G,b.getAt(ag),v,ag,b);G._to=v;G._animating=true;y.onAnimate(G,{to:v,listeners:{afteranimate:{fn:function(){this._animating=false},scope:G}}})}else{v=y.renderer(G,b.getAt(ag),Ext.apply(v,{hidden:false}),ag,b);G.setAttributes(v,true)}I+=w}}M=E.getCount();for(ag=0;ag<M;ag++){if(!u[(ag/U)>>0]&&E.getAt(ag)){E.getAt(ag).hide(true)}}if(m){an=ab.length;for(L=0;L<M;L++){if(!u[(L/U)>>0]){for(af=0;af<an;af++){if(ab[af].getAt(L)){ab[af].getAt(L).hide(true)}}}}}y.renderLabels();y.renderCallouts()},onCreateLabel:function(g,l,f,h){var j=this,k=j.labelsGroup,a=j.label,e=j.centerX,d=j.centerY,m=l.middle,b=Ext.apply(j.seriesLabelStyle||{},a||{});return j.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:k,x:m.x,y:m.y},b))},onPlaceLabel:function(k,p,z,t,s,f,g){var B=this,q=B.chart,w=q.resizing,A=B.label,u=A.renderer,d=[].concat(A.field),m=B.centerX,l=B.centerY,C=z.middle,b={x:C.x,y:C.y},o=C.x-m,n=C.y-l,r={},e=1,j=Math.atan2(n,o||1),v=j*180/Math.PI,h;function a(i){if(i<0){i+=360}return i%360}k.setAttributes({text:u(p.get(d[g]))},true);switch(s){case"outside":e=Math.sqrt(o*o+n*n)*2;b.x=e*Math.cos(j)+m;b.y=e*Math.sin(j)+l;break;case"rotate":v=a(v);v=(v>90&&v<270)?v+180:v;h=k.attr.rotation.degrees;if(h!=null&&Math.abs(h-v)>180){if(v>h){v-=360}else{v+=360}v=v%360}else{v=a(v)}b.rotate={degrees:v,x:b.x,y:b.y};break;default:break}b.translate={x:0,y:0};if(f&&!w&&(s!="rotate"||h!=null)){B.onAnimate(k,{to:b})}else{k.setAttributes(b,true)}k._from=r},onPlaceCallout:function(l,o,A,v,u,e,f){var C=this,q=C.chart,w=q.resizing,B=C.callouts,j=C.centerX,h=C.centerY,D=A.middle,b={x:D.x,y:D.y},n=D.x-j,k=D.y-h,d=1,m,g=Math.atan2(k,n||1),a=l.label.getBBox(),z=20,t=10,s=10,r;d=A.endRho+z;m=(A.endRho+A.startRho)/2+(A.endRho-A.startRho)/3;b.x=d*Math.cos(g)+j;b.y=d*Math.sin(g)+h;n=m*Math.cos(g);k=m*Math.sin(g);if(q.animate){C.onAnimate(l.lines,{to:{path:["M",n+j,k+h,"L",b.x,b.y,"Z","M",b.x,b.y,"l",n>0?t:-t,0,"z"]}});C.onAnimate(l.box,{to:{x:b.x+(n>0?t:-(t+a.width+2*s)),y:b.y+(k>0?(-a.height-s/2):(-a.height-s/2)),width:a.width+2*s,height:a.height+2*s}});C.onAnimate(l.label,{to:{x:b.x+(n>0?(t+s):-(t+a.width+s)),y:b.y+(k>0?-a.height/4:-a.height/4)}})}else{l.lines.setAttributes({path:["M",n+j,k+h,"L",b.x,b.y,"Z","M",b.x,b.y,"l",n>0?t:-t,0,"z"]},true);l.box.setAttributes({x:b.x+(n>0?t:-(t+a.width+2*s)),y:b.y+(k>0?(-a.height-s/2):(-a.height-s/2)),width:a.width+2*s,height:a.height+2*s},true);l.label.setAttributes({x:b.x+(n>0?(t+s):-(t+a.width+s)),y:b.y+(k>0?-a.height/4:-a.height/4)},true)}for(r in l){l[r].show(true)}},onAnimate:function(b,a){b.show();var d=Ext.chart.series.Pie.superclass.onAnimate.apply(this,arguments);return d},isItemInPoint:function(l,j,n,f){var h=this,e=h.centerX,d=h.centerY,p=Math.abs,o=p(l-e),m=p(j-d),g=n.startAngle,a=n.endAngle,k=Math.sqrt(o*o+m*m),b=Math.atan2(j-d,l-e)/h.rad+360;if(b>h.firstAngle){b-=360}return(b<=g&&b>a&&k>=n.startRho&&k<=n.endRho)},hideAll:function(){var f,b,h,g,e,a,d;if(!isNaN(this._index)){this.__excludes=this.__excludes||[];this.__excludes[this._index]=true;d=this.slices[this._index].sprite;for(e=0,a=d.length;e<a;e++){d[e].setAttributes({hidden:true},true)}if(this.slices[this._index].shadowAttrs){for(f=0,g=this.slices[this._index].shadowAttrs,b=g.length;f<b;f++){h=g[f];for(e=0,a=h.length;e<a;e++){h[e].setAttributes({hidden:true},true)}}}this.drawSeries()}},showAll:function(){if(!isNaN(this._index)){this.__excludes[this._index]=false;this.drawSeries()}},highlightItem:function(s){var u=this,t=u.rad;s=s||this.items[this._index];if(!s||s.sprite&&s.sprite._animating){return}Ext.chart.series.Pie.superclass.highlightItem.call(u,s);if(!u.highlight){return}if("segment" in u.highlightCfg){var w=u.highlightCfg.segment,e=u.chart.animate,o,q,a,f,k,b,m,d;if(u.labelsGroup){var g=u.labelsGroup,p=u.label.display,h=g.getAt(s.index),v=(s.startAngle+s.endAngle)/2*t,n=w.margin||0,l=n*Math.cos(v),j=n*Math.sin(v);if(e){h.stopFx();h.animate({to:{translate:{x:l,y:j}},duration:u.highlightDuration})}else{h.setAttributes({translate:{x:l,y:j}},true)}}if(u.chart.shadow&&s.shadows){q=0;a=s.shadows;k=a.length;for(;q<k;q++){f=a[q];b={};m=s.sprite._from.segment;for(d in m){if(!(d in w)){b[d]=m[d]}}o={segment:Ext.apply(b,u.highlightCfg.segment)};if(e){f.stopFx();f.animate({to:o,duration:u.highlightDuration})}else{f.setAttributes(o,true)}}}}},unHighlightItem:function(){var w=this;if(!w.highlight){return}if(("segment" in w.highlightCfg)&&w.items){var l=w.items,f=w.chart.animate,e=!!w.chart.shadow,k=w.labelsGroup,t=l.length,s=0,r=0,q=w.label.display,x,m,d,a,v,n,b,g,u,h,o;for(;s<t;s++){u=l[s];if(!u){continue}n=u.sprite;if(n&&n._highlighted){if(k){h=k.getAt(u.index);o=Ext.apply({translate:{x:0,y:0}},q=="rotate"?{rotate:{x:h.attr.x,y:h.attr.y,degrees:h.attr.rotation.degrees}}:{});if(f){h.stopFx();h.animate({to:o,duration:w.highlightDuration})}else{h.setAttributes(o,true)}}if(e){b=u.shadows;x=b.length;for(;r<x;r++){d={};a=u.sprite._to.segment;v=u.sprite._from.segment;Ext.apply(d,v);for(m in a){if(!(m in v)){d[m]=a[m]}}g=b[r];if(g){g.stopFx();g.animate({to:{segment:d},duration:w.highlightDuration})}else{g.setAttributes({segment:d},true)}}}}}}Ext.chart.series.Pie.superclass.unHighlightItem.call(w)},getLegendColor:function(a){var b=this;return b.colorArrayStyle[a%b.colorArrayStyle.length]}});Ext.chart.series.Radar=Ext.extend(Ext.chart.series.Series,{type:"pie",rad:Math.PI/180,showInLegend:false,style:{},constructor:function(d){Ext.chart.series.Radar.superclass.constructor.call(this,d);var f=this,a=f.chart.surface,e,b;f.group=a.getGroup(f.seriesId);if(f.showMarkers){f.markerGroup=a.getGroup(f.seriesId+"-markers")}},drawSeries:function(){var J=this,m=J.chart.substore||J.chart.store,o=J.group,A,u=J.chart,k=u.animate,d=J.field||J.yField,C=u.surface,t=u.chartBBox,g,q,p,v,h,H=0,B=[],F=Math.max,f=Math.cos,a=Math.sin,z=Math.PI*2,D=m.getCount(),I,w,s,r,e,E,b,j=J.seriesStyle,G=J.seriesLabelStyle,n=u.resizing||!J.radar;Ext.apply(j,J.style||{});if(!m||!m.getCount()){return}J.unHighlightItem();J.cleanHighlights();q=J.centerX=t.x+(t.width/2);p=J.centerY=t.y+(t.height/2);J.radius=h=Math.min(t.width,t.height)/2;J.items=v=[];u.series.each(function(i){B.push(i.yField)});m.each(function(l,x){for(x=0,b=B.length;x<b;x++){H=F(+l.get(B[x]),H)}});I=[];w=[];m.each(function(l,x){e=h*l.get(d)/H;s=e*f(x/D*z);r=e*a(x/D*z);if(x==0){w.push("M",s+q,r+p);I.push("M",0.01*s+q,0.01*r+p)}else{w.push("L",s+q,r+p);I.push("L",0.01*s+q,0.01*r+p)}v.push({sprite:false,point:[q+s,p+r]})});w.push("Z");if(!J.radar){J.radar=C.add(Ext.apply({type:"path",group:o,path:I},j||{}))}if(u.resizing){J.radar.setAttributes({path:I},true)}if(u.animate){J.onAnimate(J.radar,{to:Ext.apply({path:w},j||{})})}else{J.radar.setAttributes(Ext.apply({path:w},j||{}),true)}if(J.showMarkers){J.drawMarkers()}J.renderLabels();J.renderCallouts()},drawMarkers:function(){var n=this,k=n.chart,a=k.surface,b=Ext.apply({},n.markerStyle||{}),j=Ext.apply(b,n.markerCfg),m=n.items,o=j.type,q=n.markerGroup,f=n.centerX,e=n.centerY,p,h,d,g;delete j.type;for(h=0,d=m.length;h<d;h++){p=m[h];g=q.getAt(h);if(!g){g=Ext.chart.Shapes[o](a,Ext.apply({group:q,x:0,y:0,translate:{x:f,y:e}},j))}else{g.show()}if(k.resizing){g.setAttributes({x:0,y:0,translate:{x:f,y:e}},true)}g._to={translate:{x:p.point[0],y:p.point[1]}};if(k.animate){n.onAnimate(g,{to:g._to})}else{g.setAttributes(Ext.apply(g._to,j||{}),true)}}},onCreateLabel:function(g,m,f,h){var j=this,l=j.labelsGroup,a=j.label,e=j.centerX,d=j.centerY,k=m.point,b=Ext.apply(j.seriesLabelStyle||{},a);return j.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:l,x:e,y:d},a||{}))},onPlaceLabel:function(q,h,s,g,k,b){var m=this,l=m.chart,j=l.resizing,d=m.label,r=d.renderer,p=d.field,f=m.centerX,e=m.centerY,a={x:s.point[0],y:s.point[1]},o=a.x-f,n=a.y-e;q.setAttributes({text:r(h.get(p)),hidden:true},true);if(j){q.setAttributes({x:f,y:e},true)}if(b){q.show(true);m.onAnimate(q,{to:a})}else{q.setAttributes(a,true);q.show(true)}},toggleAll:function(a){var f=this,b,e,g,d;if(!a){Ext.chart.series.Radar.superclass.hideAll.call(f)}else{Ext.chart.series.Radar.superclass.showAll.call(f)}if(f.radar){f.radar.setAttributes({hidden:!a},true);if(f.radar.shadows){for(b=0,d=f.radar.shadows,e=d.length;b<e;b++){g=d[b];g.setAttributes({hidden:!a},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(a){var e=this,d=e.markerGroup&&e.markerGroup.getCount()||0,b=a||0;for(;b<d;b++){e.markerGroup.getAt(b).hide(true)}}});Ext.chart.series.Scatter=Ext.extend(Ext.chart.series.Cartesian,{type:"scatter",constructor:function(d){Ext.chart.series.Scatter.superclass.constructor.call(this,d);var f=this,g=f.chart.shadow,a=f.chart.surface,e,b;Ext.apply(f,d,{style:{},markerCfg:{},shadowAttributes:[{"stroke-width":6,"stroke-opacity":0.05,stroke:"rgb(0, 0, 0)"},{"stroke-width":4,"stroke-opacity":0.1,stroke:"rgb(0, 0, 0)"},{"stroke-width":2,"stroke-opacity":0.15,stroke:"rgb(0, 0, 0)"}]});f.group=a.getGroup(f.seriesId);if(g){for(e=0,b=f.shadowAttributes.length;e<b;e++){f.shadowGroups.push(a.getGroup(f.seriesId+"-shadows"+e))}}},getBounds:function(){var m=this,l=m.chart,n=l.substore||l.store,j=[].concat(m.axis),p,o,d,k,g,f,b,a,h,e;m.setBBox();p=m.bbox;for(h=0,k=j.length;h<k;h++){e=l.axes.get(j[h]);if(e){if(e.position=="top"||e.position=="bottom"){g=e.from;b=e.to}else{f=e.from;a=e.to}}}if(m.xField&&!Ext.isNumber(g)){e=new Ext.chart.axis.Axis({chart:l,fields:[].concat(m.xField)}).calcEnds();g=e.from;b=e.to}if(m.yField&&!Ext.isNumber(f)){e=new Ext.chart.axis.Axis({chart:l,fields:[].concat(m.yField)}).calcEnds();f=e.from;a=e.to}if(isNaN(g)){g=0;o=p.width/(n.getCount()-1)}else{o=p.width/(b-g)}if(isNaN(f)){f=0;d=p.height/(n.getCount()-1)}else{d=p.height/(a-f)}return{bbox:p,minX:g,minY:f,xScale:o,yScale:d}},getPaths:function(){var t=this,k=t.chart,b=k.shadow,e=k.substore||k.store,h=t.group,f=t.bounds=t.getBounds(),a=t.bbox,v=f.xScale,d=f.yScale,r=f.minX,q=f.minY,u=a.x,s=a.y,g=a.height,l=t.items=[],n=[],j,i,o,p,m;e.each(function(w,x){o=w.get(t.xField);p=w.get(t.yField);if(typeof o=="string"){o=x}if(typeof p=="string"){p=x}j=u+(o-r)*v;i=s+g-(p-q)*d;n.push({x:j,y:i});t.items.push({series:t,value:[o,p],point:[j,i],storeItem:w});if(k.animate&&k.resizing){m=h.getAt(x);if(m){t.resetPoint(m);if(b){t.resetShadow(m)}}}});return n},resetPoint:function(a){var b=this.bbox;a.setAttributes({translate:{x:(b.x+b.width)/2,y:(b.y+b.height)/2}},true)},resetShadow:function(d){var g=this,f=d.shadows,j=g.shadowAttributes,e=g.shadowGroups.length,h=g.bbox,b,a;for(b=0;b<e;b++){a=Ext.apply({},j[b]);if(a.translate){a.translate.x+=(h.x+h.width)/2;a.translate.y+=(h.y+h.height)/2}else{a.translate={x:(h.x+h.width)/2,y:(h.y+h.height)/2}}f[b].setAttributes(a,true)}},createPoint:function(a,d){var e=this,b=e.chart,f=e.group,g=e.bbox;return Ext.chart.Shapes[d](b.surface,Ext.apply({},{x:0,y:0,group:f,translate:{x:(g.x+g.width)/2,y:(g.y+g.height)/2}},a))},createShadow:function(n){var k=this,h=k.chart,l=k.shadowGroups,e=k.shadowAttributes,a=l.length,o=k.bbox,d,m,b,g,f,j;f=Ext.apply(k.markerStyle,k.markerCfg);j=f.type;delete f.type;n.shadows=b=[];for(d=0;d<a;d++){g=Ext.apply({},e[d]);if(g.translate){g.translate.x+=(o.x+o.width)/2;g.translate.y+=(o.y+o.height)/2}else{Ext.apply(g,{translate:{x:(o.x+o.width)/2,y:(o.y+o.height)/2}})}Ext.apply(g,f);m=Ext.chart.Shapes[j](h.surface,Ext.apply({},{x:0,y:0,group:l[d]},g));b.push(m)}},drawSeries:function(){var u=this,l=u.chart,h=l.substore||l.store,j=u.group,d=l.shadow,a=u.shadowGroups,q=u.shadowAttributes,r=a.length,m,n,o,k,p,t,f,g,b,e,s;t=Ext.apply(u.markerStyle,u.markerCfg);g=t.type;delete t.type;if(!h||!h.getCount()){return}u.unHighlightItem();u.cleanHighlights();n=u.getPaths();k=n.length;for(p=0;p<k;p++){o=n[p];m=j.getAt(p);Ext.apply(o,t);if(!m){m=u.createPoint(o,g);if(d){u.createShadow(m)}}b=m.shadows;if(l.animate){e=u.renderer(m,h.getAt(p),{translate:o},p,h);m._to=e;u.onAnimate(m,{to:e});for(f=0;f<r;f++){s=Ext.apply({},q[f]);e=u.renderer(b[f],h.getAt(p),Ext.apply({},{translate:{x:o.x+(s.translate?s.translate.x:0),y:o.y+(s.translate?s.translate.y:0)}},s),p,h);u.onAnimate(b[f],{to:e})}}else{e=u.renderer(m,h.getAt(p),Ext.apply({translate:o},{hidden:false}),p,h);m.setAttributes(e,true);for(f=0;f<r;f++){s=q[f];e=u.renderer(b[f],h.getAt(p),Ext.apply({x:o.x,y:o.y},s),p,h);b[f].setAttributes(e,true)}}u.items[p].sprite=m}k=j.getCount();for(p=n.length;p<k;p++){j.getAt(p).hide(true)}u.renderLabels();u.renderCallouts()},onCreateLabel:function(e,k,d,f){var g=this,h=g.labelsGroup,a=g.label,b=Ext.apply({},a,g.seriesLabelStyle),j=g.bbox;return g.chart.surface.add(Ext.apply({type:"text",group:h,x:k.point[0],y:j.y+j.height/2},b))},onPlaceLabel:function(g,k,t,q,p,e){var v=this,l=v.chart,s=l.resizing,u=v.label,r=u.renderer,b=u.field,a=v.bbox,j=t.point[0],h=t.point[1],d=t.sprite.attr.radius,f,n,m,o;g.setAttributes({text:r(k.get(b)),hidden:true},true);if(p=="rotate"){g.setAttributes({"text-anchor":"start",rotation:{x:j,y:h,degrees:-45}},true);f=g.getBBox();n=f.width;m=f.height;j=j<a.x?a.x:j;j=(j+n>a.x+a.width)?(j-(j+n-a.x-a.width)):j;h=(h-m<a.y)?a.y+m:h}else{if(p=="under"||p=="over"){f=t.sprite.getBBox();f.width=f.width||(d*2);f.height=f.height||(d*2);h=h+(p=="over"?-f.height:f.height);f=g.getBBox();n=f.width/2;m=f.height/2;j=j-n<a.x?a.x+n:j;j=(j+n>a.x+a.width)?(j-(j+n-a.x-a.width)):j;h=h-m<a.y?a.y+m:h;h=(h+m>a.y+a.height)?(h-(h+m-a.y-a.height)):h}}if(!l.animate){g.setAttributes({x:j,y:h},true);g.show(true)}else{if(s){o=t.sprite.hasActiveFx();if(o){o.on("afteranimate",function(){g.setAttributes({x:j,y:h},true);g.show(true)})}else{g.show(true)}}else{v.onAnimate(g,{to:{x:j,y:h}})}}},onPlaceCallout:function(k,m,B,z,w,d,h){var E=this,n=E.chart,u=n.surface,A=n.resizing,D=E.callouts,o=E.items,b=B.point,F,a=k.label.getBBox(),C=30,t=10,s=3,f,e,g,r,q,v=E.bbox,l,j;F=[Math.cos(Math.PI/4),-Math.sin(Math.PI/4)];l=b[0]+F[0]*C;j=b[1]+F[1]*C;f=l+(F[0]>0?0:-(a.width+2*s));e=j-a.height/2-s;g=a.width+2*s;r=a.height+2*s;if(f<v[0]||(f+g)>(v[0]+v[2])){F[0]*=-1}if(e<v[1]||(e+r)>(v[1]+v[3])){F[1]*=-1}l=b[0]+F[0]*C;j=b[1]+F[1]*C;f=l+(F[0]>0?0:-(a.width+2*s));e=j-a.height/2-s;g=a.width+2*s;r=a.height+2*s;if(n.animate){E.onAnimate(k.lines,{to:{path:["M",b[0],b[1],"L",l,j,"Z"]}},true);E.onAnimate(k.box,{to:{x:f,y:e,width:g,height:r}},true);E.onAnimate(k.label,{to:{x:l+(F[0]>0?s:-(a.width+s)),y:j}},true)}else{k.lines.setAttributes({path:["M",b[0],b[1],"L",l,j,"Z"]},true);k.box.setAttributes({x:f,y:e,width:g,height:r},true);k.label.setAttributes({x:l+(F[0]>0?s:-(a.width+s)),y:j},true)}for(q in k){k[q].show(true)}},onAnimate:function(b,a){b.show();var d=Ext.chart.series.Scatter.superclass.onAnimate.apply(this,arguments);return d},isItemInPoint:function(d,h,f){var b,e=10,a=Math.abs;function g(i){var k=a(i[0]-d),j=a(i[1]-h);return Math.sqrt(k*k+j*j)}b=f.point;return(b[0]-e<=d&&b[0]+e>=d&&b[1]-e<=h&&b[1]+e>=h)}});